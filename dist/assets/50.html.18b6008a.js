import{_ as l,r as c,o as i,c as d,a as n,b as a,w as o,e as s,d as r}from"./app.df617644.js";const p={},u=n("h1",{id:"docker-\u8054\u5408\u6587\u4EF6\u7CFB\u7EDF-\u6DF1\u5165\u89E3\u8BFB",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#docker-\u8054\u5408\u6587\u4EF6\u7CFB\u7EDF-\u6DF1\u5165\u89E3\u8BFB","aria-hidden":"true"},"#"),s(" docker \u8054\u5408\u6587\u4EF6\u7CFB\u7EDF \u6DF1\u5165\u89E3\u8BFB")],-1),b={class:"table-of-contents"},m=s("\u4F5C\u7528"),v=s("\u547D\u4EE4\u683C\u5F0F"),k=s("\u7B5B\u9009"),f=s("docker GraphDriver"),g=s("\u5BB9\u5668\u5185"),h=s("lower"),x=s("UpperDir"),_=s("/proc/<pid>/root"),y=s("\u83B7\u53D6\u547D\u540D\u7A7A\u95F4"),w=s("\u83B7\u53D6 PID"),q=s("\u67E5\u770B/proc/<pid>/root"),D=s("\u5BB9\u5668\u8FDB\u7A0B\u76EE\u5F55\u4E0B\u6709\u4EC0\u4E48\uFF1F"),N=s("\u6700\u540E"),M=n("p",null,"[toc]",-1),P=n("h2",{id:"\u4F5C\u7528",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4F5C\u7528","aria-hidden":"true"},"#"),s(" \u4F5C\u7528")],-1),V=s("\u83B7\u53D6"),E={href:"https://cloud.tencent.com/product/tke?from=10680",target:"_blank",rel:"noopener noreferrer"},I=s("\u5BB9\u5668"),T=s("/\u955C\u50CF\u7684\u5143\u6570\u636E\uFF08JSON\u683C\u5F0F\uFF09"),S=r(`<h2 id="\u547D\u4EE4\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u547D\u4EE4\u683C\u5F0F" aria-hidden="true">#</a> \u547D\u4EE4\u683C\u5F0F</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> inspect <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> NAME<span class="token operator">|</span>ID <span class="token punctuation">[</span>NAME<span class="token operator">|</span>ID<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">options \u8BF4\u660E</p><table><thead><tr><th style="text-align:left;">option</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;">-f</td><td style="text-align:left;">\u6307\u5B9A\u8FD4\u56DE\u503C\u7684\u6A21\u677F\u6587\u4EF6</td></tr><tr><td style="text-align:left;">-s</td><td style="text-align:left;">\u5982\u679C\u7C7B\u578B\u4E3A\u5BB9\u5668\uFF0C\u5219\u663E\u793A\u6587\u4EF6\u603B\u5927\u5C0F</td></tr><tr><td style="text-align:left;">--type</td><td style="text-align:left;">\u8FD4\u56DE\u6307\u5B9A\u7C7B\u578B\u7684JSON</td></tr></tbody></table></div><h2 id="\u7B5B\u9009" tabindex="-1"><a class="header-anchor" href="#\u7B5B\u9009" aria-hidden="true">#</a> \u7B5B\u9009</h2><p><strong>\u83B7\u53D6 IP \u5730\u5740\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> inspect tomcat7 <span class="token operator">|</span> <span class="token function">grep</span> IPAddress
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u83B7\u53D6 Dir \uFF1A</strong></p><blockquote><p>\u6211\u4E3B\u8981\u662F\u5E0C\u671B\u5F88\u719F\u6089 Data \u5B57\u6BB5\uFF0C\u6240\u4EE5\u540E\u9762\u91CD\u70B9\u8BF4\u660E~</p></blockquote><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">[</span>root@VM<span class="token punctuation">-</span>4<span class="token punctuation">-</span>6<span class="token punctuation">-</span>centos 123<span class="token punctuation">]</span><span class="token comment"># docker  inspect -s 40da9cff87a0 |grep &quot;Dir&quot;</span>
                <span class="token key atrule">&quot;LowerDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/0a0abda0165a1342ddac4ba3263352d79564e9a56dfdb497ac66e25030bb5b57-init/diff:/var/lib/docker/overlay2/2e6f81e45b3db01494296c925185d77831443eca0dd3cbf119f8d32190f90d5c/diff:/var/lib/docker/overlay2/ebf60447144fb679348fc4534bc30b68ce19618aac23b39ee93e5f941d6b13bc/diff:/var/lib/docker/overlay2/eb6694dc2ad08ab91f8f4e3f00bf7481d2c59df52c3a1553f0b7f3c3512179ed/diff:/var/lib/docker/overlay2/c4acacb9aa7f0e60af79eeb6cb7506d736df1789710da7f7e53747feffaead95/diff:/var/lib/docker/overlay2/29165236db2b92b69ae83bc679d17cf7237880dde09e5d3c1f5890ca6e907861/diff:/var/lib/docker/overlay2/3b17651312652668a9c2ef61df2a957ca7ceeb6307166a23a5726ca8dbaf1c23/diff:/var/lib/docker/overlay2/23a2a19d74c1945307e606a0df77496e2bdca76b85ea9058bd76a1cb9e1be205/diff:/var/lib/docker/overlay2/2916a80e9370af849f411871cad64cbb13d04617c91e66f45a16cbe979ffe88f/diff:/var/lib/docker/overlay2/d78b6c08a6749d7b88e7eb4fac33de1355cb1d926fcb01a8b1c72361d1867cbc/diff:/var/lib/docker/overlay2/be49972d15fe94755593cfd846c231d2a18e625a256fa86fe62e131e711f200a/diff&quot;</span><span class="token punctuation">,</span>
                <span class="token key atrule">&quot;MergedDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/0a0abda0165a1342ddac4ba3263352d79564e9a56dfdb497ac66e25030bb5b57/merged&quot;</span><span class="token punctuation">,</span>
                <span class="token key atrule">&quot;UpperDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/0a0abda0165a1342ddac4ba3263352d79564e9a56dfdb497ac66e25030bb5b57/diff&quot;</span><span class="token punctuation">,</span>
                <span class="token key atrule">&quot;WorkDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/0a0abda0165a1342ddac4ba3263352d79564e9a56dfdb497ac66e25030bb5b57/work&quot;</span>
            <span class="token key atrule">&quot;WorkingDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/application&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-graphdriver" tabindex="-1"><a class="header-anchor" href="#docker-graphdriver" aria-hidden="true">#</a> docker GraphDriver</h2><p>\u8FD9\u91CC\u6211\u4EEC\u4E86\u89E3\u4E00\u4E0B docker \u7684\u955C\u50CF\u5B58\u50A8\uFF0C\u5728Docker\u4E2D\uFF0C\u4E00\u4E2A\u5F88\u91CD\u8981\u7684\u6982\u5FF5\u5C31\u662F <code>GraphDriver</code>\uFF0C\u5B83\u4E3B\u8981\u7528\u4E8E\u7BA1\u7406\u548C\u7EF4\u62A4\u955C\u50CF\uFF0C\u5305\u62EC\u628A\u955C\u50CF\u4ECE\u4ED3\u5E93\u4E0B\u8F7D\u4E0B\u6765\uFF0C\u5230\u8FD0\u884C\u65F6\u628A\u955C\u50CF\u6302\u8F7D\u8D77\u6765\u53EF\u4EE5\u88AB\u5BB9\u5668\u8BBF\u95EE\u7B49\uFF0C\u90FD\u662F<code>GraphDriver</code>\u53BB\u5B8C\u6210\u7684\u3002</p><p><strong>\u6211\u4EEC\u4EE5 Golang \u955C\u50CF\u4E3A\u51C6\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> <span class="token function">docker</span>  inspect <span class="token parameter variable">-s</span> golang 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u5B57\u6BB5 GraphDriver\uFF1A</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code> <span class="token key atrule">&quot;GraphDriver&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;Name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;overlay2&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;Data&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token key atrule">&quot;LowerDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/0a0abda0165a1342ddac4ba3263352d79564e9a56dfdb497ac66e25030bb5b57-init/diff:/var/lib/docker/overlay2/2e6f81e45b3db01494296c925185d77831443eca0dd3cbf119f8d32190f90d5c/diff:/var/lib/docker/overlay2/ebf60447144fb679348fc4534bc30b68ce19618aac23b39ee93e5f941d6b13bc/diff:/var/lib/docker/overlay2/eb6694dc2ad08ab91f8f4e3f00bf7481d2c59df52c3a1553f0b7f3c3512179ed/diff:/var/lib/docker/overlay2/c4acacb9aa7f0e60af79eeb6cb7506d736df1789710da7f7e53747feffaead95/diff:/var/lib/docker/overlay2/29165236db2b92b69ae83bc679d17cf7237880dde09e5d3c1f5890ca6e907861/diff:/var/lib/docker/overlay2/3b17651312652668a9c2ef61df2a957ca7ceeb6307166a23a5726ca8dbaf1c23/diff:/var/lib/docker/overlay2/23a2a19d74c1945307e606a0df77496e2bdca76b85ea9058bd76a1cb9e1be205/diff:/var/lib/docker/overlay2/2916a80e9370af849f411871cad64cbb13d04617c91e66f45a16cbe979ffe88f/diff:/var/lib/docker/overlay2/d78b6c08a6749d7b88e7eb4fac33de1355cb1d926fcb01a8b1c72361d1867cbc/diff:/var/lib/docker/overlay2/be49972d15fe94755593cfd846c231d2a18e625a256fa86fe62e131e711f200a/diff&quot;</span><span class="token punctuation">,</span>
                <span class="token key atrule">&quot;MergedDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/0a0abda0165a1342ddac4ba3263352d79564e9a56dfdb497ac66e25030bb5b57/merged&quot;</span><span class="token punctuation">,</span>
                <span class="token key atrule">&quot;UpperDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/0a0abda0165a1342ddac4ba3263352d79564e9a56dfdb497ac66e25030bb5b57/diff&quot;</span><span class="token punctuation">,</span>
                <span class="token key atrule">&quot;WorkDir&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/0a0abda0165a1342ddac4ba3263352d79564e9a56dfdb497ac66e25030bb5b57/work&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">\u{1F4DC} \u5BF9\u4E0A\u9762\u7684\u89E3\u91CA</p><p><img src="http://sm.nsddd.top/smimage-20221125163549549.png" alt="image-20221125163549549"></p><ul><li>LowerDir\uFF1A\u5305\u542B\u5BB9\u5668\u5185\u6240\u6709\u5C42\u7684\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u6700\u540E\u4E00\u5C42\u9664\u5916</li><li>UpperDir\uFF1A\u5BB9\u5668\u6700\u4E0A\u5C42\u7684\u6587\u4EF6\u7CFB\u7EDF\u3002\u8FD9\u4E5F\u662F\u53CD\u6620\u4EFB\u4F55\u8FD0\u884C\u65F6\u4FEE\u6539\u7684\u5730\u65B9\u3002</li><li>MergedDir\uFF1A\u6587\u4EF6\u7CFB\u7EDF\u6240\u6709\u5C42\u7684\u7EC4\u5408\u89C6\u56FE\u3002</li><li>WorkDir\uFF1A\u7528\u4E8E\u7BA1\u7406\u6587\u4EF6\u7CFB\u7EDF\u7684\u5185\u90E8\u5DE5\u4F5C\u76EE\u5F55\u3002</li></ul></div><h3 id="\u5BB9\u5668\u5185" tabindex="-1"><a class="header-anchor" href="#\u5BB9\u5668\u5185" aria-hidden="true">#</a> \u5BB9\u5668\u5185</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> golang:latest /bin/bash 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u6839\u76EE\u5F55\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>root@cbd9c47e79e3:/<span class="token comment"># cd /; mkdir 111;cd 111; echo &quot;this a test file&quot; &gt;&gt; test.txt; ls</span>
test.txt
go version go1.19.3 linux/amd64
root@cbd9c47e79e3:/111<span class="token comment"># whereis go</span>
go: /usr/local/go /usr/local/go/bin/go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Go\u8BED\u8A00\u5DE5\u4F5C\u76EE\u5F55\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>root@cbd9c47e79e3:/usr/local/go/bin<span class="token comment"># ls -al go</span>
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">15301490</span> Oct <span class="token number">31</span> <span class="token number">20</span>:20 go
root@cbd9c47e79e3:/usr/local/go/bin<span class="token comment"># pwd </span>
/usr/local/go/bin
root@cbd9c47e79e3:/usr/local/go/bin<span class="token comment"># ./go version</span>
go version go1.19.3 linux/amd64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="lower" tabindex="-1"><a class="header-anchor" href="#lower" aria-hidden="true">#</a> lower</h3><p><code>\u6700\u540E\u4E00\u5C42\u9664\u5916</code>\uFF1A\u8FD9\u4E2A\u610F\u601D\u5C31\u662F\u6211\u4EEC\u7684\u53EF\u5199\u5C42\uFF0C\u6211\u4EEC\u5BF9\u5BB9\u5668\u7684\u4FEE\u6539\uFF0C\u90FD\u662F\u5728\u8FD9\u5C42\u4E0A\u9762\u8FDB\u884C\u7684\uFF0C\u5373\u6211\u4EEC\u5BB9\u5668\u91CC\u9762\u7684 <code>cd /; mkdir 111;cd 111; echo &quot;this a test file&quot; &gt;&gt; test.txt;</code> \u8FD9\u4E2A\u6587\u4EF6\u5728LowerDir\u91CC\u770B\u4E0D\u5230\u3002</p><p><strong>MergedDir</strong></p><p>\u5728\u8FD9\u91CC\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u6574\u4E2A\u5BB9\u5668\u91CC\u9762\u7684\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5305\u62EC\u4FEE\u6539\u7684(<strong>\u6CE8\u610F\u662F\u5BB9\u5668</strong>)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-4-6-centos merged<span class="token punctuation">]</span><span class="token comment"># cd /var/lib/docker/overlay2/4ff3e2faabfa51f38c884c1321e20609352f5e009239d146161ec75bc806c3c5/merged</span>
<span class="token punctuation">[</span>root@VM-4-6-centos merged<span class="token punctuation">]</span><span class="token comment"># ls</span>
<span class="token number">111</span>  bin  boot  dev  etc  go  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">\u6D4B\u8BD5\u91CC\u9762\u7684\u73AF\u5883\u53D8\u91CF</p><p>\u662F\u4E0D\u662F\u53EF\u4EE5\u5C06\u91CC\u9762\u7684 Go\u8BED\u8A00 \u73AF\u5883\u53D8\u91CF\u4F4D\u7F6E\u914D\u7F6E\u5230\u4E3B\u673A\u4E2D\uFF1F\uFF1F\uFF1F\u6211\u89C9\u5F97\u8FD9\u6837\u597D\u73A9</p></div><p><strong>\u5F53\u524D\u4F4D\u7F6E\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-4-6-centos bin<span class="token punctuation">]</span><span class="token comment"># ls</span>
go  gofmt
<span class="token punctuation">[</span>root@VM-4-6-centos bin<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/var/lib/docker/overlay2/4ff3e2faabfa51f38c884c1321e20609352f5e009239d146161ec75bc806c3c5/merged/usr/local/go/bin
<span class="token punctuation">[</span>root@VM-4-6-centos bin<span class="token punctuation">]</span><span class="token comment"># cp go golangtext</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u52A0\u5165\u73AF\u5883\u53D8\u91CF\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-4-6-centos bin<span class="token punctuation">]</span><span class="token comment"># cp go golangtext</span>

<span class="token comment"># \u52A0\u5165\u73AF\u5883\u53D8\u91CF</span>
<span class="token punctuation">[</span>root@VM-4-6-centos root<span class="token punctuation">]</span><span class="token comment"># cat /etc/profile.d/mypath </span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">GO_TEST</span><span class="token operator">=</span>$<span class="token string">&quot;/var/lib/docker/overlay2/4ff3e2faabfa51f38c884c1321e20609352f5e009239d146161ec75bc806c3c5/merged/usr/local/go&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$GO_TEST</span>/bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6D4B\u8BD5\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-4-6-centos root<span class="token punctuation">]</span><span class="token comment"># golangtext version</span>
go: cannot <span class="token function">find</span> GOROOT directory: /root/.g/go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="upperdir" tabindex="-1"><a class="header-anchor" href="#upperdir" aria-hidden="true">#</a> UpperDir</h3><p><code>WorkDir</code>\uFF1A\u7528\u4E8E\u7BA1\u7406\u6587\u4EF6\u7CFB\u7EDF\u7684\u5185\u90E8\u5DE5\u4F5C\u76EE\u5F55</p><p>\u6211\u4EEC\u5728 Dockerfile \u4E2D\u53EF\u6307\u5B9A workspaces\uFF0C\u5373\u4F7F\u5728 GitHub \u7684 codespaces \u4E2D\uFF0Cworkspaces \u4E5F\u662F\u975E\u5E38\u91CD\u8981\u7684\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@VM-4-6-centos root]# cd /var/lib/docker/overlay2/4ff3e2faabfa51f38c884c1321e20609352f5e009239d146161ec75bc806c3c5/work
[root@VM-4-6-centos work]# ls
work
[root@VM-4-6-centos work]# cd work/
[root@VM-4-6-centos work]# ls
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,38),A={class:"custom-container tip"},G=n("p",{class:"custom-container-title"},"\u63A8\u8350\u6587\u7AE0",-1),L={href:"https://martinheinz.dev/blog/44",target:"_blank",rel:"noopener noreferrer"},U=s("\u5173\u4E8E\u6587\u4EF6\u7CFB\u7EDF\u5982\u4F55\u5DE5\u4F5C\u7684-"),O=r(`<h2 id="proc-pid-root" tabindex="-1"><a class="header-anchor" href="#proc-pid-root" aria-hidden="true">#</a> <code>/proc/&lt;pid&gt;/root</code></h2><p>\u6211\u4EEC\u5230\u73B0\u5728\u77E5\u9053\u4E86 <code>Pid</code> \u5728 docker \u4E2D\u8D77\u5230\u4E86\u591A\u4E48\u91CD\u8981\u7684\u4F5C\u7528\uFF0C\u8FD9\u4E2A\u5173\u4E4E\u7740\u6211\u4EEC\u672A\u6765\u6784\u5EFA docker \u7684\u8BA1\u5212~</p><p>\u6709\u4E00\u79CD\u66F4\u7B80\u5355\u7684\u65B9\u6CD5\u53EF\u4EE5\u4ECE\u4E3B\u673A\u627E\u5230\u5BB9\u5668\u7684\u6587\u4EF6\u7CFB\u7EDF\u3002\u4F7F\u7528\u5BB9\u5668\u5185\u8FDB\u7A0B\u7684\u4E3B\u673A PID\uFF0C\u60A8\u53EF\u4EE5\u7B80\u5355\u5730\u8FD0\u884C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">ls</span> /proc/<span class="token operator">&lt;</span>pid<span class="token operator">&gt;</span>/root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Linux \u5DF2\u7ECF\u8D1F\u8D23\u4E3A\u60A8\u63D0\u4F9B\u8FDB\u7A0B\u7684\u6302\u8F7D\u547D\u540D\u7A7A\u95F4\u89C6\u56FE\u3002</p><h3 id="\u83B7\u53D6\u547D\u540D\u7A7A\u95F4" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6\u547D\u540D\u7A7A\u95F4" aria-hidden="true">#</a> \u83B7\u53D6\u547D\u540D\u7A7A\u95F4</h3><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u5BB9\u5668\u8FDB\u7A0B\u5C31\u50CF Linux \u4E3B\u673A\u4E0A\u7684\u5176\u4ED6\u8FDB\u7A0B\u4E00\u6837\uFF0C\u53EA\u5728\u547D\u540D\u7A7A\u95F4\u5185\u8FD0\u884C\uFF0C\u4EE5\u4F7F\u5B83\u4EEC\u4E0E\u7CFB\u7EDF\u7684\u5176\u4F59\u90E8\u5206\u9694\u79BB\u3002</p></div>`,7),B=s("\u56E0\u6B64\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528 "),R={href:"https://man7.org/linux/man-pages/man1/nsenter.1.html",target:"_blank",rel:"noopener noreferrer"},Z=n("code",null,"nsenter",-1),W=s(" \u547D\u4EE4\u8F93\u5165\u76EE\u6807\u5BB9\u5668\u7684\u547D\u540D\u7A7A\u95F4"),C=r(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Get the host PID of the process in the container</span>
<span class="token assign-left variable">PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> container inspect mycontainer <span class="token operator">|</span> jq <span class="token string">&#39;.[0].State.Pid&#39;</span><span class="token variable">)</span></span>

<span class="token comment"># Use nsenter to go into the container\u2019s mount namespace.</span>
<span class="token function">sudo</span> nsenter <span class="token parameter variable">-m</span> <span class="token parameter variable">-t</span> <span class="token variable">$PID</span> /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u83B7\u53D6-pid" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6-pid" aria-hidden="true">#</a> \u83B7\u53D6 PID</h3><p>\u524D\u63D0\uFF1A\u6211\u4EEC\u77E5\u9053\u4E86 \u5BB9\u5668 ID</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker inspect -f &#39;{{.State.Pid}}&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u{1F4A1}\u7B80\u5355\u7684\u4E00\u4E2A\u6848\u4F8B\u5982\u4E0B\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-4-6-centos work<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID        IMAGE                          COMMAND                  CREATED             STATUS                      PORTS                    NAMES
cbd9c47e79e3        golang                         <span class="token string">&quot;bash&quot;</span>                   About an hour ago   Up About an hour                                     jolly_chandrasekhar
40da9cff87a0        docker.io/halohub/halo:1.6.0   <span class="token string">&quot;/bin/sh -c &#39;java ...&quot;</span>   <span class="token number">11</span> days ago         Restarting <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">2</span> days ago                            halo-next
0b35d2dcb578        <span class="token number">3293172751</span>/halo_myblog:2.0     <span class="token string">&quot;/bin/sh -c &#39;java ...&quot;</span>   <span class="token number">3</span> weeks ago         Up <span class="token number">11</span> days                  <span class="token number">0.0</span>.0.0:8090-<span class="token operator">&gt;</span><span class="token number">8090</span>/tcp   halo2
<span class="token punctuation">[</span>root@VM-4-6-centos work<span class="token punctuation">]</span><span class="token comment"># docker inspect -f &#39;{{.State.Pid}}&#39; cbd9c47e79e3</span>
<span class="token number">1050</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container danger"><p class="custom-container-title">\u6216\u8005\u4F60\u8FD8\u53EF\u4EE5\u901A\u8FC7container \u83B7\u53D6</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker container top
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h3 id="\u67E5\u770B-proc-pid-root" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B-proc-pid-root" aria-hidden="true">#</a> \u67E5\u770B<code>/proc/&lt;pid&gt;/root</code></h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-4-6-centos work<span class="token punctuation">]</span><span class="token comment"># ll /proc/1050/root/</span>
total <span class="token number">76</span>
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov <span class="token number">25</span> <span class="token number">16</span>:10 <span class="token number">111</span>
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> Nov <span class="token number">15</span> <span class="token number">18</span>:23 bin
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Sep  <span class="token number">3</span> <span class="token number">20</span>:10 boot
drwxr-xr-x   <span class="token number">5</span> root root  <span class="token number">360</span> Nov <span class="token number">25</span> <span class="token number">15</span>:28 dev
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> Nov <span class="token number">25</span> <span class="token number">15</span>:28 etc
drwxrwxrwx   <span class="token number">4</span> root root <span class="token number">4096</span> Nov <span class="token number">16</span> <span class="token number">12</span>:16 go
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Sep  <span class="token number">3</span> <span class="token number">20</span>:10 home
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> Nov <span class="token number">16</span> <span class="token number">12</span>:16 lib
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov <span class="token number">14</span> 08:00 lib64
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov <span class="token number">14</span> 08:00 media
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov <span class="token number">14</span> 08:00 mnt
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov <span class="token number">14</span> 08:00 opt
dr-xr-xr-x <span class="token number">159</span> root root    <span class="token number">0</span> Nov <span class="token number">25</span> <span class="token number">15</span>:28 proc
drwx------   <span class="token number">2</span> root root <span class="token number">4096</span> Nov <span class="token number">14</span> 08:00 root
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> Nov <span class="token number">25</span> <span class="token number">15</span>:28 run
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> Nov <span class="token number">15</span> <span class="token number">18</span>:23 sbin
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov <span class="token number">14</span> 08:00 srv
dr-xr-xr-x  <span class="token number">13</span> root root    <span class="token number">0</span> Nov <span class="token number">25</span> <span class="token number">15</span>:28 sys
drwxrwxrwt   <span class="token number">1</span> root root <span class="token number">4096</span> Nov <span class="token number">16</span> <span class="token number">12</span>:16 tmp
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> Nov <span class="token number">14</span> 08:00 usr
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> Nov <span class="token number">14</span> 08:00 var
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5BB9\u5668\u8FDB\u7A0B\u76EE\u5F55\u4E0B\u6709\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#\u5BB9\u5668\u8FDB\u7A0B\u76EE\u5F55\u4E0B\u6709\u4EC0\u4E48" aria-hidden="true">#</a> \u5BB9\u5668\u8FDB\u7A0B\u76EE\u5F55\u4E0B\u6709\u4EC0\u4E48\uFF1F</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-4-6-centos work<span class="token punctuation">]</span><span class="token comment"># cd /proc/1050/</span>
<span class="token punctuation">[</span>root@VM-4-6-centos <span class="token number">1050</span><span class="token punctuation">]</span><span class="token comment"># ls</span>
attr        <span class="token function">comm</span>             fd        map_files   net            pagemap      schedstat  statm    wchan
autogroup   coredump_filter  fdinfo    maps        ns             patch_state  sessionid  status
auxv        cpuset           gid_map   mem         numa_maps      personality  setgroups  syscall
cgroup      cwd              io        mountinfo   oom_adj        projid_map   smaps      task
clear_refs  environ          limits    mounts      oom_score      root         stack      timers
cmdline     exe              loginuid  mountstats  oom_score_adj  sched        <span class="token function">stat</span>       uid_map
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u67E5\u770B <code>/mountinfo</code></strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-4-6-centos <span class="token number">1050</span><span class="token punctuation">]</span><span class="token comment"># cat mountinfo | head -n 10</span>
<span class="token number">659</span> <span class="token number">493</span> <span class="token number">0</span>:157 / / rw,relatime - overlay overlay rw,lowerdir<span class="token operator">=</span>/var/lib/docker/overlay2/l/PIDEMVBEIEE3VONRURI4Z4EUJX:/var/lib/docker/overlay2/l/BWR7ZEPY4UYAKRS3ZCHZZ6EGTP:/var/lib/docker/overlay2/l/34HR5PAPLZ5473EG5FNPRQLLYQ:/var/lib/docker/overlay2/l/AGIW6BJEBXJNUEBZI67DHV73UC:/var/lib/docker/overlay2/l/6XDUP6AULW7Z4AT5NPHVTGD4SH:/var/lib/docker/overlay2/l/WRKLDD6PZE5FYTSPKPED7F3N7L:/var/lib/docker/overlay2/l/PLPE7MKV5TXKVZFBCSK7ZPA7FD:/var/lib/docker/overlay2/l/BT7MBYLOPX66TO6QWWYBELSZN2,upperdir<span class="token operator">=</span>/var/lib/docker/overlay2/4ff3e2faabfa51f38c884c1321e20609352f5e009239d146161ec75bc806c3c5/diff,workdir<span class="token operator">=</span>/var/lib/docker/overlay2/4ff3e2faabfa51f38c884c1321e20609352f5e009239d146161ec75bc806c3c5/work
<span class="token number">660</span> <span class="token number">659</span> <span class="token number">0</span>:160 / /proc rw,nosuid,nodev,noexec,relatime - proc proc rw
<span class="token number">661</span> <span class="token number">659</span> <span class="token number">0</span>:161 / /dev rw,nosuid - tmpfs tmpfs rw,mode<span class="token operator">=</span><span class="token number">755</span>
<span class="token number">662</span> <span class="token number">661</span> <span class="token number">0</span>:162 / /dev/pts rw,nosuid,noexec,relatime - devpts devpts rw,gid<span class="token operator">=</span><span class="token number">5</span>,mode<span class="token operator">=</span><span class="token number">620</span>,ptmxmode<span class="token operator">=</span><span class="token number">666</span>
<span class="token number">663</span> <span class="token number">659</span> <span class="token number">0</span>:163 / /sys ro,nosuid,nodev,noexec,relatime - sysfs sysfs ro
<span class="token number">664</span> <span class="token number">663</span> <span class="token number">0</span>:164 / /sys/fs/cgroup ro,nosuid,nodev,noexec,relatime - tmpfs tmpfs rw,mode<span class="token operator">=</span><span class="token number">755</span>
<span class="token number">665</span> <span class="token number">664</span> <span class="token number">0</span>:22 /system.slice/docker-cbd9c47e79e39457d638b8d0552aeb2c646dbd7ade72f41f8ffc48ea91188322.scope /sys/fs/cgroup/systemd ro,nosuid,nodev,noexec,relatime - cgroup cgroup rw,xattr,release_agent<span class="token operator">=</span>/usr/lib/systemd/systemd-cgroups-agent,name<span class="token operator">=</span>systemd
<span class="token number">666</span> <span class="token number">664</span> <span class="token number">0</span>:24 /system.slice/docker-cbd9c47e79e39457d638b8d0552aeb2c646dbd7ade72f41f8ffc48ea91188322.scope /sys/fs/cgroup/blkio ro,nosuid,nodev,noexec,relatime - cgroup cgroup rw,blkio
<span class="token number">667</span> <span class="token number">664</span> <span class="token number">0</span>:25 /system.slice/docker-cbd9c47e79e39457d638b8d0552aeb2c646dbd7ade72f41f8ffc48ea91188322.scope /sys/fs/cgroup/hugetlb ro,nosuid,nodev,noexec,relatime - cgroup cgroup rw,hugetlb
<span class="token number">668</span> <span class="token number">664</span> <span class="token number">0</span>:26 /system.slice/docker-cbd9c47e79e39457d638b8d0552aeb2c646dbd7ade72f41f8ffc48ea91188322.scope /sys/fs/cgroup/net_prio,net_cls ro,nosuid,nodev,noexec,relatime - cgroup cgroup rw,net_prio,net_cls
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\u5BB9\u5668\u5DF2\u6302\u8F7D\u4E86\u4E00\u4E2A\u8986\u76D6\u6587\u4EF6\u7CFB\u7EDF\u4F5C\u4E3A\u5176\u6839\u3002\u5B83\u8FD8\u62A5\u544A\u4E0E <code>docker inspect</code>\u62A5\u544A\u76F8\u540C\u7C7B\u578B\u7684\u4FE1\u606F\uFF0C\u5305\u62EC\u5BB9\u5668\u6587\u4EF6\u7CFB\u7EDF\u7684 <code>LowerDir</code> \u548C <code>UpperDir</code>\u3002\u5B83\u4E0D\u76F4\u63A5\u663E\u793A <code>MergedDir</code>\uFF0C\u4F46\u60A8\u53EA\u9700\u4F7F\u7528 <code>UpperDir</code> \u5E76\u5C06 <code>diff</code> \u66F4\u6539\u4E3A<code>merged</code>\uFF0C\u60A8\u5C31\u53EF\u4EE5\u67E5\u770B\u5BB9\u5668\u7684\u6587\u4EF6\u7CFB\u7EDF\u3002</p><h2 id="\u6700\u540E" tabindex="-1"><a class="header-anchor" href="#\u6700\u540E" aria-hidden="true">#</a> \u6700\u540E</h2><p>\u5E0C\u671B\u6211\u4EEC\u90FD\u53EF\u4EE5\u6DF1\u5165\u7406\u89E3\u5BB9\u5668\uFF0C\u80FD\u5C1D\u8BD5\u5176\u4E2D\u7684\u4E00\u4E9B\u6280\u672F\u3002\u4E00\u65E6\u4F60\u4F53\u9A8C\u5230\u4E0D\u518D\u53D7\u5BB9\u5668\u4EE3\u7801\u9650\u5236\u7684\u81EA\u7531\uFF0C\u4F60\u53EF\u80FD\u518D\u4E5F\u56DE\u4E0D\u53BB\u4E86\u3002\u5B83\u6240\u9700\u8981\u7684\u53EA\u662F\u7B80\u5355\u5730\u8BBF\u95EE /<code>/proc/&lt;pid&gt;/root</code>~</p>`,16);function H(j,K){const e=c("router-link"),t=c("ExternalLinkIcon");return i(),d("div",null,[u,n("nav",b,[n("ul",null,[n("li",null,[a(e,{to:"#\u4F5C\u7528"},{default:o(()=>[m]),_:1})]),n("li",null,[a(e,{to:"#\u547D\u4EE4\u683C\u5F0F"},{default:o(()=>[v]),_:1})]),n("li",null,[a(e,{to:"#\u7B5B\u9009"},{default:o(()=>[k]),_:1})]),n("li",null,[a(e,{to:"#docker-graphdriver"},{default:o(()=>[f]),_:1}),n("ul",null,[n("li",null,[a(e,{to:"#\u5BB9\u5668\u5185"},{default:o(()=>[g]),_:1})]),n("li",null,[a(e,{to:"#lower"},{default:o(()=>[h]),_:1})]),n("li",null,[a(e,{to:"#upperdir"},{default:o(()=>[x]),_:1})])])]),n("li",null,[a(e,{to:"#proc-pid-root"},{default:o(()=>[_]),_:1}),n("ul",null,[n("li",null,[a(e,{to:"#\u83B7\u53D6\u547D\u540D\u7A7A\u95F4"},{default:o(()=>[y]),_:1})]),n("li",null,[a(e,{to:"#\u83B7\u53D6-pid"},{default:o(()=>[w]),_:1})]),n("li",null,[a(e,{to:"#\u67E5\u770B-proc-pid-root"},{default:o(()=>[q]),_:1})]),n("li",null,[a(e,{to:"#\u5BB9\u5668\u8FDB\u7A0B\u76EE\u5F55\u4E0B\u6709\u4EC0\u4E48"},{default:o(()=>[D]),_:1})])])]),n("li",null,[a(e,{to:"#\u6700\u540E"},{default:o(()=>[N]),_:1})])])]),M,P,n("p",null,[V,n("a",E,[I,a(t)]),T]),S,n("div",A,[G,n("ul",null,[n("li",null,[n("a",L,[U,a(t)])])])]),O,n("p",null,[B,n("a",R,[Z,a(t)]),W]),C])}const F=l(p,[["render",H],["__file","50.html.vue"]]);export{F as default};
