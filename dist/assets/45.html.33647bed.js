import{_ as i,r as e,o as p,c as l,a as n,b as t,w as c,e as s,d as u}from"./app.ee8200d6.js";const r={},d={href:"http://nsddd.top",target:"_blank",rel:"noopener noreferrer"},k=s("author"),m=n("h1",{id:"\u7B2C45\u8282-openmi-\u53D1\u6D88\u606F\u7684\u65F6\u5019\u505A\u4E86\u4EC0\u4E48",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B2C45\u8282-openmi-\u53D1\u6D88\u606F\u7684\u65F6\u5019\u505A\u4E86\u4EC0\u4E48","aria-hidden":"true"},"#"),s(" \u7B2C45\u8282 OpenMI \u53D1\u6D88\u606F\u7684\u65F6\u5019\u505A\u4E86\u4EC0\u4E48")],-1),v=n("div",null,[n("a",{href:"44.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),n("a",{href:"46.md",style:{float:"right"}}," \u2B07\uFE0F\u4E0B\u4E00\u8282\u{1F517}")],-1),g=n("br",null,null,-1),b=s("\u2764\uFE0F\u{1F495}\u{1F495}\u8BB0\u5F55"),q={href:"https://github.com/cubxxw/sealos",target:"_blank",rel:"noopener noreferrer"},y=s("sealos"),h=s("\u5F00\u6E90\u9879\u76EE\u7684\u5B66\u4E60\u8FC7\u7A0B\u3002"),f={href:"https://github.com/cubxxw/sealos",target:"_blank",rel:"noopener noreferrer"},E=s("k8s,docker\u548C\u4E91\u539F\u751F\u7684\u5B66\u4E60"),j=s("\u3002Myblog:"),x={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},I=s("http://nsddd.top"),_=u('<hr><p>[TOC]</p><h2 id="\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u6D41\u7A0B" aria-hidden="true">#</a> \u6D41\u7A0B</h2><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Conversation<span class="token punctuation">)</span> <span class="token function">CreateTextMessage</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> text <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n	s <span class="token operator">:=</span> sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">{</span><span class="token punctuation">}</span>\n	err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">initBasicInfo</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> constant<span class="token punctuation">.</span>UserMsgType<span class="token punctuation">,</span> constant<span class="token punctuation">.</span>Text<span class="token punctuation">)</span>\n	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>\n		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err\n	<span class="token punctuation">}</span>\n	s<span class="token punctuation">.</span>Content <span class="token operator">=</span> text\n	<span class="token keyword">return</span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token boolean">nil</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Conversation<span class="token punctuation">)</span> <span class="token function">CreateAdvancedTextMessage</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> text <span class="token builtin">string</span><span class="token punctuation">,</span> messageEntities <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>sdk_struct<span class="token punctuation">.</span>MessageEntity<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n	s <span class="token operator">:=</span> sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">{</span><span class="token punctuation">}</span>\n	err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">initBasicInfo</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> constant<span class="token punctuation">.</span>UserMsgType<span class="token punctuation">,</span> constant<span class="token punctuation">.</span>AdvancedText<span class="token punctuation">)</span>\n	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>\n		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err\n	<span class="token punctuation">}</span>\n	s<span class="token punctuation">.</span>MessageEntityElem<span class="token punctuation">.</span>Text <span class="token operator">=</span> text\n	s<span class="token punctuation">.</span>MessageEntityElem<span class="token punctuation">.</span>MessageEntityList <span class="token operator">=</span> messageEntities\n	s<span class="token punctuation">.</span>Content <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">StructToJsonString</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>MessageEntityElem<span class="token punctuation">)</span>\n	<span class="token keyword">return</span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token boolean">nil</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><code>CreateTextMessage(ctx context.Context, text string) (*sdk_struct.MsgStruct, error)</code>\uFF1A\u8FD9\u4E2A\u65B9\u6CD5\u7528\u4E8E\u521B\u5EFA\u4E00\u4E2A\u666E\u901A\u6587\u672C\u6D88\u606F\u3002\u5B83\u63A5\u6536\u4E00\u4E2A\u4E0A\u4E0B\u6587\u5BF9\u8C61<code>ctx</code>\u548C\u4E00\u4E2A\u5B57\u7B26\u4E32<code>text</code>\u4F5C\u4E3A\u53C2\u6570\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u6307\u5411<code>sdk_struct.MsgStruct</code>\u7C7B\u578B\u5BF9\u8C61\u7684\u6307\u9488\u548C\u4E00\u4E2A\u9519\u8BEF\u5BF9\u8C61\u3002\u8BE5\u65B9\u6CD5\u9996\u5148\u521B\u5EFA\u4E00\u4E2A\u7A7A\u7684<code>sdk_struct.MsgStruct</code>\u5BF9\u8C61<code>s</code>\uFF0C\u7136\u540E\u8C03\u7528<code>initBasicInfo</code>\u65B9\u6CD5\u6765\u521D\u59CB\u5316\u6D88\u606F\u7684\u57FA\u672C\u4FE1\u606F\uFF0C\u5305\u62EC\u6D88\u606F\u7C7B\u578B\u548C\u5185\u5BB9\u7C7B\u578B\u3002\u6700\u540E\uFF0C\u5C06\u6587\u672C\u6D88\u606F\u5185\u5BB9<code>text</code>\u8D4B\u503C\u7ED9<code>s.Content</code>\u5B57\u6BB5\uFF0C\u5E76\u8FD4\u56DE<code>s</code>\u6307\u9488\u548Cnil\u3002</li><li><code>CreateAdvancedTextMessage(ctx context.Context, text string, messageEntities []*sdk_struct.MessageEntity) (*sdk_struct.MsgStruct, error)</code>\uFF1A\u8FD9\u4E2A\u65B9\u6CD5\u7528\u4E8E\u521B\u5EFA\u4E00\u4E2A\u9AD8\u7EA7\u6587\u672C\u6D88\u606F\uFF0C\u652F\u6301\u81EA\u5B9A\u4E49\u6D88\u606F\u5B9E\u4F53\u3002\u5B83\u63A5\u6536\u4E00\u4E2A\u4E0A\u4E0B\u6587\u5BF9\u8C61<code>ctx</code>\u3001\u4E00\u4E2A\u5B57\u7B26\u4E32<code>text</code>\u548C\u4E00\u4E2A<code>sdk_struct.MessageEntity</code>\u7C7B\u578B\u7684\u5207\u7247<code>messageEntities</code>\u4F5C\u4E3A\u53C2\u6570\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u6307\u5411<code>sdk_struct.MsgStruct</code>\u7C7B\u578B\u5BF9\u8C61\u7684\u6307\u9488\u548C\u4E00\u4E2A\u9519\u8BEF\u5BF9\u8C61\u3002\u8BE5\u65B9\u6CD5\u9996\u5148\u521B\u5EFA\u4E00\u4E2A\u7A7A\u7684<code>sdk_struct.MsgStruct</code>\u5BF9\u8C61<code>s</code>\uFF0C\u7136\u540E\u8C03\u7528<code>initBasicInfo</code>\u65B9\u6CD5\u6765\u521D\u59CB\u5316\u6D88\u606F\u7684\u57FA\u672C\u4FE1\u606F\uFF0C\u5305\u62EC\u6D88\u606F\u7C7B\u578B\u548C\u5185\u5BB9\u7C7B\u578B\u3002\u63A5\u4E0B\u6765\uFF0C\u5C06\u6587\u672C\u6D88\u606F\u5185\u5BB9<code>text</code>\u8D4B\u503C\u7ED9<code>s.MessageEntityElem.Text</code>\u5B57\u6BB5\uFF0C\u5E76\u5C06<code>sdk_struct.MessageEntity</code>\u7C7B\u578B\u7684\u5207\u7247<code>messageEntities</code>\u8D4B\u503C\u7ED9<code>s.MessageEntityElem.MessageEntityList</code>\u5B57\u6BB5\u3002\u6700\u540E\uFF0C\u5C06<code>s.MessageEntityElem</code>\u7ED3\u6784\u4F53\u5E8F\u5217\u5316\u6210<code>JSON</code>\u683C\u5F0F\u7684\u5B57\u7B26\u4E32\u5E76\u8D4B\u503C\u7ED9<code>s.Content</code>\u5B57\u6BB5\uFF0C\u5E76\u8FD4\u56DE<code>s</code>\u6307\u9488\u548C<code>nil</code>\u3002</li></ol><h3 id="\u7ED3\u6784\u4F53\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#\u7ED3\u6784\u4F53\u5B57\u6BB5" aria-hidden="true">#</a> \u7ED3\u6784\u4F53\u5B57\u6BB5</h3><p>\u8FD9\u662F\u4E00\u4E2A\u5F88\u91CD\u5E76\u4E14\u5F88\u5927\u7684\u4E00\u4E2A\u6D88\u606F\u7ED3\u6784\u4F53\uFF0C<code>MsgStruct</code> \u7ED3\u6784\u4F53\u662F\u6211\u4EEC\u7ED9\u5BA2\u6237\u7AEF\u7528\u5230\u7684\u7ED3\u6784\u4F53\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> MsgStruct <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n	ClientMsgID          <span class="token builtin">string</span>                <span class="token string">`json:&quot;clientMsgID,omitempty&quot;`</span>\n	ServerMsgID          <span class="token builtin">string</span>                <span class="token string">`json:&quot;serverMsgID,omitempty&quot;`</span>\n	CreateTime           <span class="token builtin">int64</span>                 <span class="token string">`json:&quot;createTime&quot;`</span>\n	SendTime             <span class="token builtin">int64</span>                 <span class="token string">`json:&quot;sendTime&quot;`</span>\n	SessionType          <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;sessionType&quot;`</span>\n	SendID               <span class="token builtin">string</span>                <span class="token string">`json:&quot;sendID,omitempty&quot;`</span>\n	RecvID               <span class="token builtin">string</span>                <span class="token string">`json:&quot;recvID,omitempty&quot;`</span>\n	MsgFrom              <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;msgFrom&quot;`</span>\n	ContentType          <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;contentType&quot;`</span>\n	SenderPlatformID     <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;platformID&quot;`</span>\n	SenderNickname       <span class="token builtin">string</span>                <span class="token string">`json:&quot;senderNickname,omitempty&quot;`</span>\n	SenderFaceURL        <span class="token builtin">string</span>                <span class="token string">`json:&quot;senderFaceUrl,omitempty&quot;`</span>\n	GroupID              <span class="token builtin">string</span>                <span class="token string">`json:&quot;groupID,omitempty&quot;`</span>\n	Content              <span class="token builtin">string</span>                <span class="token string">`json:&quot;content,omitempty&quot;`</span>\n	Seq                  <span class="token builtin">int64</span>                 <span class="token string">`json:&quot;seq&quot;`</span>\n	IsRead               <span class="token builtin">bool</span>                  <span class="token string">`json:&quot;isRead&quot;`</span>\n	Status               <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;status&quot;`</span>\n	IsReact              <span class="token builtin">bool</span>                  <span class="token string">`json:&quot;isReact,omitempty&quot;`</span>\n	IsExternalExtensions <span class="token builtin">bool</span>                  <span class="token string">`json:&quot;isExternalExtensions,omitempty&quot;`</span>\n	OfflinePush          sdkws<span class="token punctuation">.</span>OfflinePushInfo <span class="token string">`json:&quot;offlinePush,omitempty&quot;`</span>\n	AttachedInfo         <span class="token builtin">string</span>                <span class="token string">`json:&quot;attachedInfo,omitempty&quot;`</span>\n	Ex                   <span class="token builtin">string</span>                <span class="token string">`json:&quot;ex,omitempty&quot;`</span>\n	PictureElem          <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		SourcePath      <span class="token builtin">string</span>          <span class="token string">`json:&quot;sourcePath,omitempty&quot;`</span>\n		SourcePicture   PictureBaseInfo <span class="token string">`json:&quot;sourcePicture,omitempty&quot;`</span>\n		BigPicture      PictureBaseInfo <span class="token string">`json:&quot;bigPicture,omitempty&quot;`</span>\n		SnapshotPicture PictureBaseInfo <span class="token string">`json:&quot;snapshotPicture,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;pictureElem,omitempty&quot;`</span>\n	SoundElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		UUID      <span class="token builtin">string</span> <span class="token string">`json:&quot;uuid,omitempty&quot;`</span>\n		SoundPath <span class="token builtin">string</span> <span class="token string">`json:&quot;soundPath,omitempty&quot;`</span>\n		SourceURL <span class="token builtin">string</span> <span class="token string">`json:&quot;sourceUrl,omitempty&quot;`</span>\n		DataSize  <span class="token builtin">int64</span>  <span class="token string">`json:&quot;dataSize&quot;`</span>\n		Duration  <span class="token builtin">int64</span>  <span class="token string">`json:&quot;duration&quot;`</span>\n		SoundType <span class="token builtin">string</span> <span class="token string">`json:&quot;soundType,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;soundElem,omitempty&quot;`</span>\n	VideoElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		VideoPath      <span class="token builtin">string</span> <span class="token string">`json:&quot;videoPath,omitempty&quot;`</span>\n		VideoUUID      <span class="token builtin">string</span> <span class="token string">`json:&quot;videoUUID,omitempty&quot;`</span>\n		VideoURL       <span class="token builtin">string</span> <span class="token string">`json:&quot;videoUrl,omitempty&quot;`</span>\n		VideoType      <span class="token builtin">string</span> <span class="token string">`json:&quot;videoType,omitempty&quot;`</span>\n		VideoSize      <span class="token builtin">int64</span>  <span class="token string">`json:&quot;videoSize&quot;`</span>\n		Duration       <span class="token builtin">int64</span>  <span class="token string">`json:&quot;duration&quot;`</span>\n		SnapshotPath   <span class="token builtin">string</span> <span class="token string">`json:&quot;snapshotPath,omitempty&quot;`</span>\n		SnapshotUUID   <span class="token builtin">string</span> <span class="token string">`json:&quot;snapshotUUID,omitempty&quot;`</span>\n		SnapshotSize   <span class="token builtin">int64</span>  <span class="token string">`json:&quot;snapshotSize&quot;`</span>\n		SnapshotURL    <span class="token builtin">string</span> <span class="token string">`json:&quot;snapshotUrl,omitempty&quot;`</span>\n		SnapshotWidth  <span class="token builtin">int32</span>  <span class="token string">`json:&quot;snapshotWidth&quot;`</span>\n		SnapshotHeight <span class="token builtin">int32</span>  <span class="token string">`json:&quot;snapshotHeight&quot;`</span>\n		SnapshotType   <span class="token builtin">string</span> <span class="token string">`json:&quot;snapshotType,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;videoElem,omitempty&quot;`</span>\n	FileElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		FilePath  <span class="token builtin">string</span> <span class="token string">`json:&quot;filePath,omitempty&quot;`</span>\n		UUID      <span class="token builtin">string</span> <span class="token string">`json:&quot;uuid,omitempty&quot;`</span>\n		SourceURL <span class="token builtin">string</span> <span class="token string">`json:&quot;sourceUrl,omitempty&quot;`</span>\n		FileName  <span class="token builtin">string</span> <span class="token string">`json:&quot;fileName,omitempty&quot;`</span>\n		FileSize  <span class="token builtin">int64</span>  <span class="token string">`json:&quot;fileSize&quot;`</span>\n		FileType  <span class="token builtin">string</span> <span class="token string">`json:&quot;fileType,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;fileElem,omitempty&quot;`</span>\n	MergeElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Title             <span class="token builtin">string</span>           <span class="token string">`json:&quot;title,omitempty&quot;`</span>\n		AbstractList      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>         <span class="token string">`json:&quot;abstractList,omitempty&quot;`</span>\n		MultiMessage      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>MsgStruct     <span class="token string">`json:&quot;multiMessage,omitempty&quot;`</span>\n		MessageEntityList <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>MessageEntity <span class="token string">`json:&quot;messageEntityList,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;mergeElem,omitempty&quot;`</span>\n	AtElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Text         <span class="token builtin">string</span>     <span class="token string">`json:&quot;text,omitempty&quot;`</span>\n		AtUserList   <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>   <span class="token string">`json:&quot;atUserList,omitempty&quot;`</span>\n		AtUsersInfo  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>AtInfo  <span class="token string">`json:&quot;atUsersInfo,omitempty&quot;`</span>\n		QuoteMessage <span class="token operator">*</span>MsgStruct <span class="token string">`json:&quot;quoteMessage,omitempty&quot;`</span>\n		IsAtSelf     <span class="token builtin">bool</span>       <span class="token string">`json:&quot;isAtSelf&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;atElem,omitempty&quot;`</span>\n	FaceElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Index <span class="token builtin">int</span>    <span class="token string">`json:&quot;index&quot;`</span>\n		Data  <span class="token builtin">string</span> <span class="token string">`json:&quot;data,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;faceElem,omitempty&quot;`</span>\n	LocationElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Description <span class="token builtin">string</span>  <span class="token string">`json:&quot;description,omitempty&quot;`</span>\n		Longitude   <span class="token builtin">float64</span> <span class="token string">`json:&quot;longitude&quot;`</span>\n		Latitude    <span class="token builtin">float64</span> <span class="token string">`json:&quot;latitude&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;locationElem,omitempty&quot;`</span>\n	CustomElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Data        <span class="token builtin">string</span> <span class="token string">`json:&quot;data,omitempty&quot;`</span>\n		Description <span class="token builtin">string</span> <span class="token string">`json:&quot;description,omitempty&quot;`</span>\n		Extension   <span class="token builtin">string</span> <span class="token string">`json:&quot;extension,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;customElem,omitempty&quot;`</span>\n	QuoteElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Text              <span class="token builtin">string</span>           <span class="token string">`json:&quot;text,omitempty&quot;`</span>\n		QuoteMessage      <span class="token operator">*</span>MsgStruct       <span class="token string">`json:&quot;quoteMessage,omitempty&quot;`</span>\n		MessageEntityList <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>MessageEntity <span class="token string">`json:&quot;messageEntityList,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;quoteElem,omitempty&quot;`</span>\n	NotificationElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Detail      <span class="token builtin">string</span> <span class="token string">`json:&quot;detail,omitempty&quot;`</span>\n		DefaultTips <span class="token builtin">string</span> <span class="token string">`json:&quot;defaultTips,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;notificationElem,omitempty&quot;`</span>\n	MessageEntityElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Text              <span class="token builtin">string</span>           <span class="token string">`json:&quot;text,omitempty&quot;`</span>\n		MessageEntityList <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>MessageEntity <span class="token string">`json:&quot;messageEntityList,omitempty&quot;`</span>\n	<span class="token punctuation">}</span> <span class="token string">`json:&quot;messageEntityElem,omitempty&quot;`</span>\n	AttachedInfoElem AttachedInfoElem <span class="token string">`json:&quot;attachedInfoElem,omitempty&quot;`</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u662F\u4E00\u4E2A\u540D\u4E3A <code>MsgStruct</code> \u7684\u7ED3\u6784\u4F53\uFF0C\u5305\u542B\u4E86\u4E00\u4E2A\u5373\u65F6\u901A\u8BAF\u6D88\u606F\u7684\u5404\u79CD\u5143\u7D20\u3002\u4E0B\u9762\u662F\u6BCF\u4E2A\u5B57\u6BB5\u7684\u89E3\u91CA\uFF1A</p><ul><li><code>ClientMsgID</code>\uFF1A\u5BA2\u6237\u7AEF\u751F\u6210\u7684\u6D88\u606F ID\u3002</li><li><code>ServerMsgID</code>\uFF1A\u670D\u52A1\u5668\u751F\u6210\u7684\u6D88\u606F ID\u3002</li><li><code>CreateTime</code>\uFF1A\u6D88\u606F\u521B\u5EFA\u65F6\u95F4\uFF0CUnix \u65F6\u95F4\u6233\u3002</li><li><code>SendTime</code>\uFF1A\u6D88\u606F\u53D1\u9001\u65F6\u95F4\uFF0CUnix \u65F6\u95F4\u6233\u3002</li><li><code>SessionType</code>\uFF1A\u4F1A\u8BDD\u7C7B\u578B\uFF0C\u5982\u5355\u804A\u3001\u7FA4\u804A\u7B49\u3002</li><li><code>SendID</code>\uFF1A\u6D88\u606F\u53D1\u9001\u8005\u7684 ID\u3002</li><li><code>RecvID</code>\uFF1A\u6D88\u606F\u63A5\u6536\u8005\u7684 ID\u3002</li><li><code>MsgFrom</code>\uFF1A\u6D88\u606F\u6765\u6E90\uFF0C\u5982\u53D1\u9001\u65B9\u6216\u63A5\u6536\u65B9\u3002</li><li><code>ContentType</code>\uFF1A\u6D88\u606F\u5185\u5BB9\u7C7B\u578B\uFF0C\u5982\u6587\u672C\u3001\u56FE\u7247\u3001\u97F3\u9891\u7B49\u3002</li><li><code>SenderPlatformID</code>\uFF1A\u53D1\u9001\u8005\u4F7F\u7528\u7684\u5E73\u53F0 ID\u3002</li><li><code>SenderNickname</code>\uFF1A\u53D1\u9001\u8005\u7684\u6635\u79F0\u3002</li><li><code>SenderFaceURL</code>\uFF1A\u53D1\u9001\u8005\u7684\u5934\u50CF URL\u3002</li><li><code>GroupID</code>\uFF1A\u5982\u679C\u662F\u7FA4\u804A\u6D88\u606F\uFF0C\u7FA4\u804A ID\u3002</li><li><code>Content</code>\uFF1A\u6D88\u606F\u5185\u5BB9\u3002</li><li><code>Seq</code>\uFF1A\u6D88\u606F\u5E8F\u5217\u53F7\u3002</li><li><code>IsRead</code>\uFF1A\u6D88\u606F\u662F\u5426\u5DF2\u8BFB\u3002</li><li><code>Status</code>\uFF1A\u6D88\u606F\u72B6\u6001\uFF0C\u5982\u53D1\u9001\u4E2D\u3001\u53D1\u9001\u6210\u529F\u3001\u53D1\u9001\u5931\u8D25\u7B49\u3002</li><li><code>IsReact</code>\uFF1A\u662F\u5426\u9700\u8981\u53CD\u9988\u3002</li><li><code>IsExternalExtensions</code>\uFF1A\u662F\u5426\u5305\u542B\u6269\u5C55\u4FE1\u606F\u3002</li><li><code>OfflinePush</code>\uFF1A\u79BB\u7EBF\u63A8\u9001\u4FE1\u606F\uFF0C\u5305\u62EC\u6807\u9898\u3001\u5185\u5BB9\u3001\u58F0\u97F3\u7B49\u3002</li><li><code>AttachedInfo</code>\uFF1A\u9644\u52A0\u4FE1\u606F\u3002</li><li><code>Ex</code>\uFF1A\u9884\u7559\u5B57\u6BB5\u3002</li><li><code>PictureElem</code>\uFF1A\u56FE\u7247\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u539F\u56FE\u3001\u5927\u56FE\u3001\u5FEB\u7167\u7B49\u3002</li><li><code>SoundElem</code>\uFF1A\u97F3\u9891\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC UUID\u3001\u8DEF\u5F84\u3001\u5927\u5C0F\u3001\u65F6\u957F\u7B49\u3002</li><li><code>VideoElem</code>\uFF1A\u89C6\u9891\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u8DEF\u5F84\u3001UUID\u3001\u5927\u5C0F\u3001\u65F6\u957F\u3001\u5FEB\u7167\u7B49\u3002</li><li><code>FileElem</code>\uFF1A\u6587\u4EF6\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u8DEF\u5F84\u3001UUID\u3001\u5927\u5C0F\u3001\u540D\u79F0\u3001\u7C7B\u578B\u7B49\u3002</li><li><code>MergeElem</code>\uFF1A\u5408\u5E76\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u6807\u9898\u3001\u6458\u8981\u3001\u591A\u6761\u6D88\u606F\u3001\u6D88\u606F\u5B9E\u4F53\u7B49\u3002</li><li><code>AtElem</code>\uFF1A@ \u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u6587\u672C\u3001@ \u7528\u6237\u5217\u8868\u3001@ \u7528\u6237\u4FE1\u606F\u3001\u5F15\u7528\u6D88\u606F\u3001\u662F\u5426 @ \u81EA\u5DF1\u7B49\u3002</li><li><code>FaceElem</code>\uFF1A\u8868\u60C5\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u8868\u60C5\u7D22\u5F15\u3001\u6570\u636E\u7B49\u3002</li><li><code>LocationElem</code>\uFF1A\u4F4D\u7F6E\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u63CF\u8FF0\u3001\u7ECF\u5EA6\u3001\u7EAC\u5EA6\u7B49\u3002</li><li><code>CustomElem</code>\uFF1A\u81EA\u5B9A\u4E49\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u6570\u636E\u3001\u63CF\u8FF0\u3001\u6269\u5C55\u7B49\u3002</li><li><code>QuoteElem</code>\uFF1A\u5F15\u7528\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u6587\u672C\u3001\u5F15\u7528\u7684\u6D88\u606F\u3001\u6D88\u606F\u5B9E\u4F53\u7B49\u3002</li><li><code>NotificationElem</code>\uFF1A\u901A\u77E5\u6D88\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u8BE6\u60C5\u3001\u9ED8\u8BA4\u63D0\u793A\u7B49\u3002</li><li><code>MessageEntityElem</code>\uFF1A\u6D88\u606F\u5B9E\u4F53\u5143\u7D20\uFF0C\u5305\u62EC\u6587\u672C\u3001\u6D88\u606F\u5B9E\u4F53\u5217\u8868\u7B49\u3002</li><li><code>AttachedInfoElem</code>\uFF1A\u9644\u52A0\u4FE1\u606F\u5143\u7D20\uFF0C\u5305\u62EC\u7C7B\u578B\u3001\u6570\u636E\u7B49\u3002</li></ul><h3 id="\u53D1\u9001\u6D88\u606F\u9700\u8981\u7684\u7ED3\u6784\u4F53\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#\u53D1\u9001\u6D88\u606F\u9700\u8981\u7684\u7ED3\u6784\u4F53\u5B57\u6BB5" aria-hidden="true">#</a> \u53D1\u9001\u6D88\u606F\u9700\u8981\u7684\u7ED3\u6784\u4F53\u5B57\u6BB5</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> TextElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n	Text <span class="token builtin">string</span> <span class="token string">`json:&quot;text,omitempty&quot;`</span>\n<span class="token punctuation">}</span>\n\n\n<span class="token keyword">type</span> MsgStruct <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n	ClientMsgID          <span class="token builtin">string</span>                <span class="token string">`json:&quot;clientMsgID,omitempty&quot;`</span>\n	CreateTime           <span class="token builtin">int64</span>                 <span class="token string">`json:&quot;createTime&quot;`</span>\n	SendTime             <span class="token builtin">int64</span>                 <span class="token string">`json:&quot;sendTime&quot;`</span>\n	MsgFrom              <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;msgFrom&quot;`</span>\n	ContentType          <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;contentType&quot;`</span>\n	SenderPlatformID     <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;platformID&quot;`</span>\n	SenderNickname       <span class="token builtin">string</span>                <span class="token string">`json:&quot;senderNickname,omitempty&quot;`</span>\n	SenderFaceURL        <span class="token builtin">string</span>                <span class="token string">`json:&quot;senderFaceUrl,omitempty&quot;`</span>\n	Status               <span class="token builtin">int32</span>                 <span class="token string">`json:&quot;status&quot;`</span>\n	IsReact              <span class="token builtin">bool</span>                  <span class="token string">`json:&quot;isReact,omitempty&quot;`</span>\n	IsExternalExtensions <span class="token builtin">bool</span>                  <span class="token string">`json:&quot;isExternalExtensions,omitempty&quot;`</span>\n	OfflinePush          sdkws<span class="token punctuation">.</span>OfflinePushInfo <span class="token string">`json:&quot;offlinePush,omitempty&quot;`</span>\n	AttachedInfo         <span class="token builtin">string</span>                <span class="token string">`json:&quot;attachedInfo,omitempty&quot;`</span>\n	Ex                   <span class="token builtin">string</span>                <span class="token string">`json:&quot;ex,omitempty&quot;`</span>\n	TextElem             TextElem              <span class="token string">`json:&quot;textElem,omitempty&quot;`</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u7ED3\u6784\u4F53\u7684\u903B\u8F91\u90E8\u5206\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Conversation<span class="token punctuation">)</span> <span class="token function">initBasicInfo</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> message <span class="token operator">*</span>sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">,</span> msgFrom<span class="token punctuation">,</span> contentType <span class="token builtin">int32</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>\n	message<span class="token punctuation">.</span>CreateTime <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">GetCurrentTimestampByMill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n	message<span class="token punctuation">.</span>SendTime <span class="token operator">=</span> message<span class="token punctuation">.</span>CreateTime\n	message<span class="token punctuation">.</span>IsRead <span class="token operator">=</span> <span class="token boolean">false</span>\n	message<span class="token punctuation">.</span>Status <span class="token operator">=</span> constant<span class="token punctuation">.</span>MsgStatusSending\n	message<span class="token punctuation">.</span>SendID <span class="token operator">=</span> c<span class="token punctuation">.</span>loginUserID\n	userInfo<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">GetLoginUser</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> c<span class="token punctuation">.</span>loginUserID<span class="token punctuation">)</span>\n	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>\n		<span class="token keyword">return</span> err\n	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n		message<span class="token punctuation">.</span>SenderFaceURL <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>FaceURL\n		message<span class="token punctuation">.</span>SenderNickname <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>Nickname\n	<span class="token punctuation">}</span>\n	ClientMsgID <span class="token operator">:=</span> utils<span class="token punctuation">.</span><span class="token function">GetMsgID</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>SendID<span class="token punctuation">)</span>\n	message<span class="token punctuation">.</span>ClientMsgID <span class="token operator">=</span> ClientMsgID\n	message<span class="token punctuation">.</span>MsgFrom <span class="token operator">=</span> msgFrom\n	message<span class="token punctuation">.</span>ContentType <span class="token operator">=</span> contentType\n	message<span class="token punctuation">.</span>SenderPlatformID <span class="token operator">=</span> c<span class="token punctuation">.</span>platformID\n	message<span class="token punctuation">.</span>IsExternalExtensions <span class="token operator">=</span> c<span class="token punctuation">.</span>IsExternalExtensions\n	<span class="token keyword">return</span> <span class="token boolean">nil</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#end-\u94FE\u63A5" aria-hidden="true">#</a> END \u94FE\u63A5</h2><ul><li><div><a href="44.md" style="float:left;">\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} </a><a href="46.md" style="float:right;"> \uFE0F\u4E0B\u4E00\u8282\u{1F517}</a></div></li></ul>',16),S=s("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),M={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},D=n("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),T=s(")"),C=s("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),U={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},w=s("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function P(L,F){const a=e("ExternalLinkIcon"),o=e("RouterLink");return p(),l("div",null,[n("ul",null,[n("li",null,[n("a",d,[k,t(a)])])]),m,v,g,n("blockquote",null,[n("p",null,[b,n("a",q,[y,t(a)]),h,n("a",f,[E,t(a)]),j,n("a",x,[I,t(a)])])]),_,n("ul",null,[n("li",null,[n("p",null,[t(o,{to:"/"},{default:c(()=>[S]),_:1})])]),n("li",null,[n("p",null,[n("a",M,[D,t(a)]),T])]),n("li",null,[n("p",null,[C,n("a",U,[w,t(a)])])])])])}const A=i(r,[["render",P],["__file","45.html.vue"]]);export{A as default};
