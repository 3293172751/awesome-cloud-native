import{_ as e,o as s,c as d,d as r}from"./app.c1668249.js";const n="/assets/gXUlwdcHPBbahsR.c9d2dec9.png",i="/assets/QerPMzas1F5vpTG.fde366d0.png",a="/assets/4jQiFxfPsTXg329.60579896.png",t="/assets/GJZbA7l5hmCEuBS.a5a6d3ce.png",l="/assets/bLF4Xw6vt2yh8Cr.617a0d5a.png",c={},o=r(`<h1 id="redis\u4E3B\u4ECE\u6269\u5BB9" tabindex="-1"><a class="header-anchor" href="#redis\u4E3B\u4ECE\u6269\u5BB9" aria-hidden="true">#</a> redis\u4E3B\u4ECE\u6269\u5BB9</h1><p>[toc]</p><p><strong>\u6211\u4EEC\u518D\u52A0\u5165\u7ED3\u70B9\u4E3B\u673A\u5F97\u65F6\u5019\uFF0C\u5BF9\u4E8E\u65B0\u673A\u52A0\u76DF\u4F1A\u6709\u4EC0\u4E48\u6837\u7684\u53D8\u5316\u5462</strong></p><p>\u200B</p><h3 id="\u65B0\u5EFA\u4E24\u4E2A\u7ED3\u70B9\u5E76\u4E14\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#\u65B0\u5EFA\u4E24\u4E2A\u7ED3\u70B9\u5E76\u4E14\u542F\u52A8" aria-hidden="true">#</a> \u65B0\u5EFA\u4E24\u4E2A\u7ED3\u70B9\u5E76\u4E14\u542F\u52A8</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run -d --name redis-node-7 --net host --privileged=true \\
-v /data/redis/share/redis-node-7:/data \\
redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6387

docker run -d --name redis-node-8 --net host --privileged=true \\
-v /data/redis/share/redis-node-8:/data \\
redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6388

docker ps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+n+`" alt="image-20220512200740037"></p><h3 id="\u5C06\u65B0\u589E\u7684\u7ED3\u70B97\u53F7-\u7A7A\u69FD-\u4F5C\u4E3Amaster\u7ED3\u70B9\u52A0\u5165\u539F\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#\u5C06\u65B0\u589E\u7684\u7ED3\u70B97\u53F7-\u7A7A\u69FD-\u4F5C\u4E3Amaster\u7ED3\u70B9\u52A0\u5165\u539F\u96C6\u7FA4" aria-hidden="true">#</a> \u5C06\u65B0\u589E\u7684\u7ED3\u70B97\u53F7\uFF08\u7A7A\u69FD\uFF09\u4F5C\u4E3Amaster\u7ED3\u70B9\u52A0\u5165\u539F\u96C6\u7FA4</h3><p><strong>\u65B0\u7684\u7ED3\u70B9\u52A0\u5165\u4E00\u5B9A\u8981\u91CD\u65B0\u6D17\u724C</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker exec -it redis-node-1 /bin/bash
redis-cli --cluster add-node 192.168.121.129:6387 192.168.121.129:6381
#redis-cli --cluster add-node \u65B0\u7ED3\u70B9 \u539F\u7ED3\u70B9
reids-cli --cluster check 192.168.121.129:6381 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>slots\u8FDB\u884C\u69FD\u4F4D\u5206\u6BB5</p></blockquote><p><img src="`+i+`" alt="image-20220512204012846"></p><p><strong>\u63D0\u9192\u6211\u4EEC\u6682\u65F6\u6CA1\u6709\u69FD\u4F4D\uFF080\uFF0C0\uFF0C0\uFF09\uFF0C\u6211\u4EEC\u5F00\u59CB\u5206\u914D\uFF0C\u4F7F\u7528reshard</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>redis-cli --cluster reshard 192.168.121.129:6381
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u4E0A\u9762\u6211\u4EEC\u91CD\u65B0\u5206\u914D\u4E86\u4E00\u4E2A\u69FD\u4F4D</p></blockquote><p><img src="`+a+'" alt="image-20220512204956570"><strong>\u6CE8\u610F\uFF1A\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u5206\u914D\u69FD\u4F4D</strong></p><blockquote><p>How many slots do you want to move (from 1 to 16384)?</p><p>\u60A8\u60F3\u79FB\u52A8\u591A\u5C11\u4E2A\u69FD(\u4ECE1\u79FB\u52A8\u523016384)?</p></blockquote><p><strong>\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u8FDB\u884C\u8BA1\u7B9716384/4=4096\uFF08\u662F\u56DB\u53F0master\uFF09</strong></p><p><strong>\u63A5\u53D7\u7684ID\u9700\u8981\u586B6387\u7684ID</strong></p><blockquote><p>Do you want to proceed with the proposed reshard plan (yes/no)?</p><p>\u4F60\u60F3\u7EE7\u7EED\u62DF\u8BAE\u7684reshard\u8BA1\u5212\u5417(\u662F/\u5426)?</p></blockquote><p><img src="'+t+`" alt="image-20220512205709713"></p><p><strong>\u6B64\u65F6\u6211\u4EEC\u53D1\u73B0\u69FD\u4F4D\u53D1\u751F\u53D8\u5316\uFF0C\u6BCF\u4E00\u5BB6\u90FD\u6DA6\u4E86\u4E00\u70B9\u7ED9\u4E03\u53F7</strong></p><p><strong>\u6240\u4EE5\u662F\u4EE5\u524D\u7684\u533A\u95F4\uFF0C\u524D\u4E09\u5BB6\u5404\u81EA\u62FF\u51FA\u4E00\u90E8\u5206\uFF0C\u8FD9\u6837\u53EF\u4EE5\u8282\u7EA6\u5206\u914D\u6210\u672C</strong></p><h3 id="\u5C068\u53F7\u6302\u8F7D\u52307\u53F7\u4E0A\u9762" tabindex="-1"><a class="header-anchor" href="#\u5C068\u53F7\u6302\u8F7D\u52307\u53F7\u4E0A\u9762" aria-hidden="true">#</a> \u5C068\u53F7\u6302\u8F7D\u52307\u53F7\u4E0A\u9762</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>redis-cli --cluster add-node 192.168.121.129:6388 192.168.121.129:6387 \\
--cluster-slave --cluster-master-id 7\u53F7\u7684\u7F16\u53F7

redis-cli --cluster check 192.168.121.129:6387
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+l+'" alt="image-20220512210521860"></p><p><strong>\u6B64\u65F6\u6269\u5BB9\u6210\u529F\uFF01\uFF01\uFF01</strong></p>',27),p=[o];function u(m,v){return s(),d("div",null,p)}const h=e(c,[["render",u],["__file","22.html.vue"]]);export{h as default};
