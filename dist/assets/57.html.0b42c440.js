import{_ as t,r as i,o,c as r,a as n,b as e,w as c,e as s,d}from"./app.9f14a191.js";const p={},u={href:"http://nsddd.top",target:"_blank",rel:"noopener noreferrer"},m=s("author"),v=n("h1",{id:"\u7B2C57\u8282-\u63D0\u6848-sealer-\u6784\u5EFA\u5DE5\u7A0B\u8BBE\u8BA1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B2C57\u8282-\u63D0\u6848-sealer-\u6784\u5EFA\u5DE5\u7A0B\u8BBE\u8BA1","aria-hidden":"true"},"#"),s(" \u7B2C57\u8282 \u63D0\u6848 sealer \u6784\u5EFA\u5DE5\u7A0B\u8BBE\u8BA1")],-1),k=n("div",null,[n("a",{href:"56.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),n("a",{href:"58.md",style:{float:"right"}}," \u2B07\uFE0F\u4E0B\u4E00\u8282\u{1F517}")],-1),b=n("br",null,null,-1),h=s("\u2764\uFE0F\u{1F495}\u{1F495}\u8BB0\u5F55"),g={href:"https://github.com/cubxxw/sealos",target:"_blank",rel:"noopener noreferrer"},f=s("sealos"),_=s("\u5F00\u6E90\u9879\u76EE\u7684\u5B66\u4E60\u8FC7\u7A0B\u3002"),y={href:"https://github.com/cubxxw/sealos",target:"_blank",rel:"noopener noreferrer"},x=s("k8s,docker\u548C\u4E91\u539F\u751F\u7684\u5B66\u4E60"),w=s("\u3002Myblog:"),I={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},q=s("http://nsddd.top"),B=n("hr",null,null,-1),G=n("p",null,"[TOC]",-1),M=n("h1",{id:"\u4E2D\u6587-sealer-\u6784\u5EFA\u5DE5\u7A0B\u8BBE\u8BA1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4E2D\u6587-sealer-\u6784\u5EFA\u5DE5\u7A0B\u8BBE\u8BA1","aria-hidden":"true"},"#"),s(" [\u4E2D\u6587] sealer \u6784\u5EFA\u5DE5\u7A0B\u8BBE\u8BA1")],-1),R=n("h2",{id:"\u{1F525}-questions-that-can-be-solved-with-documentation-and-search-don-t-ask",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u{1F525}-questions-that-can-be-solved-with-documentation-and-search-don-t-ask","aria-hidden":"true"},"#"),s(" \u{1F525} Questions THAT can BE SOLVED WITH DOCUMENTATION and SEARCH, DON'T ASK !!!")],-1),T=s("sealer \u7684 Makefile \u8BBE\u8BA1\u8FC7\u4E8E\u5355\u4E00\u548C\u7B80\u964B\uFF0C\u6784\u5EFA\u811A\u672C("),C={href:"http://build.sh",target:"_blank",rel:"noopener noreferrer"},D=s("build.sh"),O=s(") \u8FC7\u4E8E\u9648\u65E7\u548C\u539A\u91CD\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E9B\u8BBE\u8BA1\u65B9\u6848\u6765\u5BF9 Makefile \u548C "),S={href:"http://build.sh",target:"_blank",rel:"noopener noreferrer"},A=s("build.sh"),E=s(" \u8FDB\u884C\u8BBE\u8BA1\u4EE5\u53CA\u6539\u8FDB\uFF0C\u8BA9\u5B83\u4EEC\u770B\u4E0A\u53BB\u5F88\u53CB\u597D\u3002"),N=n("p",null,"Makefile \u7684\u91CD\u6784\u8BBE\u8BA1\u5230\u5F88\u591A\u7684\u6539\u53D8\uFF0C\u5305\u62EC\u4E00\u4E9B\u6A21\u5757\u7684\u5FAE\u8C03\u548C CICD actions \u7684\u53D8\u5316\uFF0C\u8FD9\u4E9B\u90FD\u4F1A\u6D89\u53CA\u5230\uFF0C\u4E5F\u4F1A\u6162\u6162\u8BBE\u8BA1\uFF0C\u4E3A\u6B64\uFF0C\u4E4B\u524D\u6211\u63D0\u8FC7\u4E00\u4E2A RFC\uFF0C\u79FB\u6B65\u5230 \u2192 https://github.com/sealerio/sealer/issues/2148",-1),P=n("p",null,[n("strong",null,"Notion \u6587\u6863\uFF1A")],-1),V={href:"https://nsddd.notion.site/sealer-construction-engineering-design-e98b303493d5492e98aff79afadc1cce",target:"_blank",rel:"noopener noreferrer"},L=s("https://nsddd.notion.site/sealer-construction-engineering-design-e98b303493d5492e98aff79afadc1cce"),j=n("h2",{id:"\u6848\u4F8B",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u6848\u4F8B","aria-hidden":"true"},"#"),s(" \u6848\u4F8B")],-1),z=n("aside",null," \u2753 \u662F\u5426\u6709\u76F8\u540C\u7684\u6848\u4F8B\uFF0C\u6216\u8005\u7ECF\u9A8C\uFF1F",-1),F=s("\u8FD9\u662F\u6709\u7684\uFF0C\u5728\u7F51\u6613\u7684 "),U={href:"https://github.com/horizoncd",target:"_blank",rel:"noopener noreferrer"},H=s("horizoncd"),K=s(" \u793E\u533A\u4E2D\uFF0C\u6211\u6210\u529F\u8BBE\u8BA1\u4E86\u4E00\u5957\u5B8C\u6574\u7684 Makefile \u6D41\u7A0B\u5E76\u4E14\u53EF\u4EE5\u4F7F\u7528\u3002\u5E76\u4E14\u5E2E\u52A9\u4ED6\u4EEC\u6539\u8FDB\u4E86"),W={href:"https://github.com/horizoncd/horizon/blob/main/CONTRIBUTING.md",target:"_blank",rel:"noopener noreferrer"},$=s("\u8D21\u732E\u8005\u6587\u6863"),Z=s("\u3002\u5728\u5B83\u4EEC\u7684\u9879\u76EE\u4E2D\uFF0C\u6211\u4EEC\u80FD\u627E\u5230\u4E00\u5957\u5DF2\u7ECF\u5B9E\u73B0\u7684\u65B9\u6848\uFF0C\u5E76\u4E14\u63D0\u51FA\u4E86\u8BBE\u8BA1\u6587\u7A3F\uFF1Ahttps://github.com/horizoncd/horizon/issues/100\uFF1A"),Q={href:"https://github.com/horizoncd/horizon",target:"_blank",rel:"noopener noreferrer"},Y=s("GitHub - horizoncd/horizon: Production-Grade GitOps CD PlatForm For CloudNative Applications, MiddleWares, etc."),J=n("p",null,"\u{1F3AF} \u76F8\u6BD4\u8F83 horizon\uFF0Csealer \u7684\u8BBE\u8BA1\u6709\u54EA\u4E9B\u5371\u9669\u4FE1\u53F7\uFF1A",-1),X=n("ul",null,[n("li",null,[s("sealer \u652F\u6301\u591A\u4E8C\u8FDB\u5236\u7F16\u8BD1\uFF0C\u9700\u8981\u5F88\u597D\u7684\u6269\u5C55\u6027\uFF0C\u5E76\u4E14\u6B63\u786E\u7684\u901A\u8FC7 "),n("strong",null,"\u5E76\u884C\u7F16\u8BD1"),s(" \u63D0\u9AD8\u7F16\u8BD1\u901F\u5EA6\u3002")]),n("li",null,[s("sealer \u6709\u4E9B "),n("code",null,"cgo\\c"),s(" \u4EE3\u7801\u6D89\u53CA\u5230 "),n("code",null,"containers_image_openpgp exclude_graphdriver_devicemapper exclude_graphdriver_btrfs"),s(" \u8FDB\u884C\u7F16\u8BD1\u3002")])],-1),nn={href:"https://github.com/mtrmac/image/blob/ed2844ccc615a447b98344d1bbefca61b3cb7749/README.md",target:"_blank",rel:"noopener noreferrer"},sn=s("image/README.md at ed2844ccc615a447b98344d1bbefca61b3cb7749 \xB7 mtrmac/image"),en=n("p",null,[s("\u8FD9\u6837\u63D0\u9AD8\u4E86\u7F16\u8BD1\u548C\u6D4B\u8BD5\u7684\u96BE\u5EA6\uFF0C\u7ECF\u8FC7\u8C03\u7814\uFF0C\u6211\u9009\u62E9\u7684\u6D4B\u8BD5\u65B9\u6848\u662F "),n("code",null,"junit-report"),s(" \uFF0C\u5728\u672C\u5730\u4F7F\u7528 "),n("code",null,"tmp"),s(" \u4E34\u65F6\u76EE\u5F55\u4F5C\u4E3A\u7F13\u5B58\uFF0C\u63D0\u9AD8\u8986\u76D6\u7387\u6D4B\u8BD5\u901F\u5EA6\u3002")],-1),an=n("h2",{id:"\u6A21\u5757\u65B9\u6848",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u6A21\u5757\u65B9\u6848","aria-hidden":"true"},"#"),s(" \u6A21\u5757\u65B9\u6848")],-1),ln=s("\u8FC1\u79FB\u76EE\u5F55 "),tn={href:"https://github.com/sealerio/sealer/pull/2161/files#diff-73b8ec8a05213857da6e9598e34c5d7a18a6e5349250908ae6710578236977f2",target:"_blank",rel:"noopener noreferrer"},on=s("version/version.go \u2192 pkg/version/version.go"),rn=n("p",null,[s("\u5C06 "),n("code",null,"hack/"),s(" \u6539\u540D\u4E3A "),n("code",null,"scripts/")],-1),cn=n("p",null,"\u8FD9\u4E9B\u6587\u4EF6\u7684\u4F5C\u7528\u5982\u4E0B\uFF1A",-1),dn=n("li",null,"LICENSE_TEMPLATE\uFF1A\u5305\u542B\u8BB8\u53EF\u8BC1\u7684\u6587\u672C\u6A21\u677F\u3002",-1),pn=n("li",null,"boilerplate.go.txt\uFF1A\u751F\u6210\u65B0 Go \u6587\u4EF6\u65F6\u4F7F\u7528\u7684\u6587\u672C\u6A21\u677F\uFF08\u4E0D\u518D\u4F7F\u7528\uFF09\u3002",-1),un={href:"http://build.sh/",target:"_blank",rel:"noopener noreferrer"},mn=s("build.sh"),vn=s("\uFF1A\u65B0\u7684\u6784\u5EFA\u811A\u672C"),kn=n("li",null,[n("code",null,"coverage.awk"),s("\uFF1A\u7528\u4E8E\u4ECE Go \u6D4B\u8BD5\u6587\u4EF6\u4E2D\u63D0\u53D6\u8986\u76D6\u7387\u6570\u636E\u7684 AWK \u811A\u672C\u3002")],-1),bn=n("code",null,"make-rules/",-1),hn=s("\uFF1A\u5305\u542B Makefile \u89C4\u5219\u7684\u76EE\u5F55\u3002 "),gn={href:"http://common.mk/",target:"_blank",rel:"noopener noreferrer"},fn=s("common.mk"),_n=s("\uFF1A\u5305\u542B\u901A\u7528\u53D8\u91CF\u548C\u89C4\u5219\u7684 Makefile\uFF0C\u6240\u6709 mk \u901A\u7528\u3002"),yn={href:"http://copyright.mk/",target:"_blank",rel:"noopener noreferrer"},xn=s("copyright.mk"),wn=s("\uFF1A\u7528\u4E8E\u751F\u6210\u4EE3\u7801\u4E2D\u7684\u7248\u6743\u4FE1\u606F\u7684 Makefile\u3002"),In={href:"http://dependencies.mk/",target:"_blank",rel:"noopener noreferrer"},qn=s("dependencies.mk"),Bn=s("\uFF1A\u5305\u542B\u4F9D\u8D56\u5173\u7CFB\u56FE\u548C\u751F\u6210\u4F9D\u8D56\u5173\u7CFB\u7684 Makefile \u89C4\u5219\u3002"),Gn={href:"http://gen.mk/",target:"_blank",rel:"noopener noreferrer"},Mn=s("gen.mk"),Rn=s("\uFF1A\u7528\u4E8E\u751F\u6210\u4EE3\u7801\u7684 Makefile\u3002"),Tn={href:"http://golang.mk/",target:"_blank",rel:"noopener noreferrer"},Cn=s("golang.mk"),Dn=s("\uFF1A\u5305\u542B\u4E0E Go \u7F16\u8BD1\u5668\u548C\u5DE5\u5177\u94FE\u76F8\u5173\u7684 Makefile \u89C4\u5219\u3002"),On={href:"http://image.mk/",target:"_blank",rel:"noopener noreferrer"},Sn=s("image.mk"),An=s("\uFF1A\u5305\u542B\u4E0E Docker \u955C\u50CF\u751F\u6210\u76F8\u5173\u7684 Makefile \u89C4\u5219\u3002"),En={href:"http://tools.mk/",target:"_blank",rel:"noopener noreferrer"},Nn=s("tools.mk"),Pn=s("\uFF1A\u5305\u542B\u6784\u5EFA\u4E0E\u6D4B\u8BD5\u5DE5\u5177\u7684 Makefile \u89C4\u5219\u3002"),Vn=d(`<hr><p>\u{1F525} \u5206\u4E3A\u4E09\u4E2A\u6A21\u5757\uFF0C\u5206\u522B\u662F\u65B0\u6269\u5C55\u7684 Makefile \u6F14\u793A\u3001\u811A\u672C\u6539\u8FDB\u7684\u6F14\u793A\uFF0C\u4EE5\u53CA CICD \u6D41\u7684\u6539\u8FDB\uFF1A</p><h2 id="makefile" tabindex="-1"><a class="header-anchor" href="#makefile" aria-hidden="true">#</a> makefile</h2><p>\u6700\u5E38\u7528\u7684\u5E2E\u52A9\u4FE1\u606F\uFF0C\u653E\u5165\u5230 <code>Makefile/</code></p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>\u276F <span class="token builtin">make</span> help

Usage<span class="token punctuation">:</span> <span class="token builtin">make</span> <span class="token operator">&lt;</span>TARGETS<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>OPTIONS<span class="token operator">&gt;</span> <span class="token operator">...</span>

Targets<span class="token punctuation">:</span>

  build                        Build binaries by <span class="token keyword">default</span>
  tidy                         tidy <span class="token keyword">go</span><span class="token punctuation">.</span>mod
  vendor                       vendor <span class="token keyword">go</span><span class="token punctuation">.</span>mod
  fmt                          Run <span class="token keyword">go</span> fmt against code<span class="token punctuation">.</span>
  vet                          Run <span class="token keyword">go</span> vet against code<span class="token punctuation">.</span>
  lint                         Check syntax and styling of <span class="token keyword">go</span> sources<span class="token punctuation">.</span>
  style                        code style <span class="token operator">-</span><span class="token operator">&gt;</span> fmt<span class="token punctuation">,</span>vet<span class="token punctuation">,</span>lint
  linux                        Build the all with a build script
  linux<span class="token punctuation">.</span><span class="token operator">%</span>                      Build binaries <span class="token keyword">for</span> Linux <span class="token punctuation">(</span><span class="token builtin">make</span> linux<span class="token punctuation">.</span>amd64 OR <span class="token builtin">make</span> linux<span class="token punctuation">.</span>arm64<span class="token punctuation">)</span>
  format                       Gofmt <span class="token punctuation">(</span>reformat<span class="token punctuation">)</span> <span class="token keyword">package</span> sources <span class="token punctuation">(</span>exclude vendor dir <span class="token keyword">if</span> existed<span class="token punctuation">)</span><span class="token punctuation">.</span>
  test                         Run unit test<span class="token punctuation">.</span>
  cover                        Run unit test and get test coverage<span class="token punctuation">.</span>
  updates                      Check <span class="token keyword">for</span> updates to <span class="token keyword">go</span><span class="token punctuation">.</span>mod dependencies
  imports                      task to automatically handle <span class="token keyword">import</span> packages in Go files using goimports tool
  clean                        Remove all files that are created by building<span class="token punctuation">.</span>
  tools                        Install dependent tools<span class="token punctuation">.</span>
  build<span class="token operator">-</span>in<span class="token operator">-</span>docker              sealer should be compiled in linux platform<span class="token punctuation">,</span> otherwise there will be GraphDriver problem<span class="token punctuation">.</span>
  gen                          Generate all necessary files<span class="token punctuation">.</span>
  verify<span class="token operator">-</span>copyright             Verify the license headers <span class="token keyword">for</span> all files<span class="token punctuation">.</span>
  add<span class="token operator">-</span>copyright                Add copyright ensure source code files have license headers<span class="token punctuation">.</span>
  help                         Show this help info<span class="token punctuation">.</span>
  all<span class="token operator">-</span>help                     Show all help details info<span class="token punctuation">.</span>

Options<span class="token punctuation">:</span>

  DEBUG            Whether or not to generate debug symbols<span class="token punctuation">.</span> Default is <span class="token number">0.</span>

  BINS             Binaries to build<span class="token punctuation">.</span> Default is all binaries under cmd<span class="token punctuation">.</span>
                   This option is available when using<span class="token punctuation">:</span> <span class="token builtin">make</span> <span class="token punctuation">{</span>build<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">.</span>multiarch<span class="token punctuation">)</span>
                   Example<span class="token punctuation">:</span> <span class="token builtin">make</span> build BINS<span class="token operator">=</span><span class="token string">&quot;sealer sealctl&quot;</span>

  PLATFORMS        Platform to build <span class="token keyword">for</span><span class="token punctuation">.</span> Default is linux_arm64 and linux_amd64<span class="token punctuation">.</span>
                   This option is available when using<span class="token punctuation">:</span> <span class="token builtin">make</span> <span class="token punctuation">{</span>build<span class="token punctuation">}</span><span class="token punctuation">.</span>multiarch
                   Example<span class="token punctuation">:</span> <span class="token builtin">make</span> build<span class="token punctuation">.</span>multiarch PLATFORMS<span class="token operator">=</span><span class="token string">&quot;linux_arm64 linux_amd64&quot;</span>

  V                Set to <span class="token number">1</span> enable verbose build<span class="token punctuation">.</span> Default is <span class="token number">0.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u80FD\u89E3\u51B3\u66F4\u591A\u95EE\u9898\uFF0C\u66F4\u52A0\u7EC6\u81F4\u7684 <code>Makefile</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u276F <span class="token function">make</span> help-all
  go.build.verify                     Verify that a suitable version of Go exists
  go.bin.%                            Verify binary <span class="token keyword">for</span> specific platform
  go.build.%                          Build binary <span class="token keyword">for</span> specific platform
  go.build                            Build binaries
  go.build.multiarch                  Build multi-arch binaries
  go.linux-a                          Build the project with a build script, use
  go.linux-p                        
  go.linux.%                          Build linux_amd64 OR linux_arm64 binaries
  go.lint                             Run golangci to lint <span class="token builtin class-name">source</span> codes
  go.test                             Run unit <span class="token builtin class-name">test</span>
  go.test.junit-report                Run unit <span class="token builtin class-name">test</span>
  go.test.cover                       Run unit <span class="token builtin class-name">test</span> with coverage
  go.format                           Run unit <span class="token builtin class-name">test</span> and <span class="token function">format</span> codes
  imports                             task to automatically handle <span class="token function">import</span> packages <span class="token keyword">in</span> Go files using goimports tool
  go.updates                          Check <span class="token keyword">for</span> updates to go.mod dependencies
  go.clean                            Clean all builds directories and files
  copyright.help                      Show copyright <span class="token builtin class-name">help</span>
---------------------------------------------------------------------------------
  copyright.verify                    Validate boilerplate headers <span class="token keyword">for</span> assign files
  copyright.add                       Add the boilerplate headers <span class="token keyword">for</span> all files
  copyright.help                      Show copyright <span class="token builtin class-name">help</span>
---------------------------------------------------------------------------------
  tools.install                       Install a must tools
  tools.install-all                   Install all tools
  tools.install.%                     Install a single tool <span class="token keyword">in</span> <span class="token variable">$GOBIN</span>/
  tools.install-all.%                 Parallelism <span class="token function">install</span> a single tool <span class="token keyword">in</span> ./tools/*
  tools.verify.%                      Check <span class="token keyword">if</span> a tool is installed and <span class="token function">install</span> it
  install.golangci-lint               Install golangci-lint
  install.goimports                   Install goimports, used to <span class="token function">format</span> go <span class="token builtin class-name">source</span> files
  install.addlicense                  Install addlicense, used to <span class="token function">add</span> license header to <span class="token builtin class-name">source</span> files
  install.deepcopy-gen                Install deepcopy-gen, used to generate deep copy functions
  install.conversion-gen              Install conversion-gen, used to generate conversion functions
  install.ginkgo                      Install ginkgo to run a single <span class="token builtin class-name">test</span> or <span class="token builtin class-name">set</span> of tests
  install.go-junit-report             Install go-junit-report, used to convert go <span class="token builtin class-name">test</span> output to junit xml
  install.kube-score                  Install kube-score, used to check kubernetes yaml files
  install.kubeconform                 Install kubeconform, used to check kubernetes yaml files
  Install go-gitlint                  Install go-gitlint, used to check <span class="token function">git</span> commit message
  install.gsemver                     Install gsemver, used to generate semver
  install.git-chglog                  Install git-chglog, used to generate changelog
  install.github-release              Install github-release, used to create github release
  install.gvm                         Install gvm, gvm is a Go version manager, built on <span class="token function">top</span> of the official go tool.
  install.golines                     Install golines, used to <span class="token function">format</span> long lines
  install.go-mod-outdated             Install go-mod-outdated, used to check outdated dependencies
  install.mockgen                     Install mockgen, used to generate mock functions
  install.gotests                     Install gotests, used to generate <span class="token builtin class-name">test</span> functions
  install.protoc-gen-go               Install protoc-gen-go, used to generate go <span class="token builtin class-name">source</span> files from protobuf files
  install.cfssl                       Install cfssl, used to generate certificates
  install.depth                       Install depth, used to check dependency tree
  install.go-callvis                  Install go-callvis, used to visualize call graph
  install.gothanks                    Install gothanks, used to thank go dependencies
  install.richgo                      Install richgo
  install.rts                         Install rts
  install.codegen                     Install code generator, used to generate code
  tools.help                          Display <span class="token builtin class-name">help</span> information about the tools package
---------------------------------------------------------------------------------
  image.verify                        Verify <span class="token function">docker</span> version
  image.daemon.verify                 Verify <span class="token function">docker</span> daemon experimental features
  image.build                         Build <span class="token function">docker</span> images
  image.build.multiarch               Build <span class="token function">docker</span> images <span class="token keyword">for</span> all platforms
  image.build.%                       Build <span class="token function">docker</span> image <span class="token keyword">for</span> a specific platform
  image.push                          Push <span class="token function">docker</span> images
  image.push.multiarch                Push <span class="token function">docker</span> images <span class="token keyword">for</span> all platforms
  image.push.%                        Push <span class="token function">docker</span> image <span class="token keyword">for</span> a specific platform
  image.manifest.push                 Push manifest list <span class="token keyword">for</span> multi-arch images
  image.manifest.push.%               Push manifest list <span class="token keyword">for</span> multi-arch images <span class="token keyword">for</span> a specific platform
  image.manifest.remove.%             Remove <span class="token builtin class-name">local</span> manifest list
  image.manifest.push.multiarch       Push manifest list <span class="token keyword">for</span> multi-arch images <span class="token keyword">for</span> all platforms
  image.manifest.push.multiarch.%     Push manifest list <span class="token keyword">for</span> multi-arch images <span class="token keyword">for</span> all platforms <span class="token keyword">for</span> a specific image
  image.help                          Print <span class="token builtin class-name">help</span> <span class="token keyword">for</span> image targets
---------------------------------------------------------------------------------

Usage: <span class="token function">make</span> <span class="token operator">&lt;</span>TARGETS<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>OPTIONS<span class="token operator">&gt;</span> <span class="token punctuation">..</span>.

Targets:

  build                        Build binaries by default
  tidy                         tidy go.mod
  vendor                       vendor go.mod
  <span class="token function">fmt</span>                          Run go <span class="token function">fmt</span> against code.
  vet                          Run go vet against code.
  lint                         Check syntax and styling of go sources.
  style                        code style -<span class="token operator">&gt;</span> fmt,vet,lint
  linux                        Build the all with a build script
  linux.%                      Build binaries <span class="token keyword">for</span> Linux <span class="token punctuation">(</span>make linux.amd64 OR <span class="token function">make</span> linux.arm64<span class="token punctuation">)</span>
  <span class="token function">format</span>                       Gofmt <span class="token punctuation">(</span>reformat<span class="token punctuation">)</span> package sources <span class="token punctuation">(</span>exclude vendor <span class="token function">dir</span> <span class="token keyword">if</span> existed<span class="token punctuation">)</span>.
  <span class="token builtin class-name">test</span>                         Run unit test.
  cover                        Run unit <span class="token builtin class-name">test</span> and get <span class="token builtin class-name">test</span> coverage.
  updates                      Check <span class="token keyword">for</span> updates to go.mod dependencies
  imports                      task to automatically handle <span class="token function">import</span> packages <span class="token keyword">in</span> Go files using goimports tool
  clean                        Remove all files that are created by building.
  tools                        Install dependent tools.
  build-in-docker              sealer should be compiled <span class="token keyword">in</span> linux platform, otherwise there will be GraphDriver problem.
  gen                          Generate all necessary files.
  verify-copyright             Verify the license headers <span class="token keyword">for</span> all files.
  add-copyright                Add copyright ensure <span class="token builtin class-name">source</span> code files have license headers.
  <span class="token builtin class-name">help</span>                         Show this <span class="token builtin class-name">help</span> info.
  all-help                     Show all <span class="token builtin class-name">help</span> details info.

Options:

  DEBUG            Whether or not to generate debug symbols. Default is <span class="token number">0</span>.

  BINS             Binaries to build. Default is all binaries under cmd.
                   This option is available when using: <span class="token function">make</span> <span class="token punctuation">{</span>build<span class="token punctuation">}</span><span class="token punctuation">(</span>.multiarch<span class="token punctuation">)</span>
                   Example: <span class="token function">make</span> build <span class="token assign-left variable">BINS</span><span class="token operator">=</span><span class="token string">&quot;sealer sealctl&quot;</span>

  PLATFORMS        Platform to build for. Default is linux_arm64 and linux_amd64.
                   This option is available when using: <span class="token function">make</span> <span class="token punctuation">{</span>build<span class="token punctuation">}</span>.multiarch
                   Example: <span class="token function">make</span> build.multiarch <span class="token assign-left variable">PLATFORMS</span><span class="token operator">=</span><span class="token string">&quot;linux_arm64 linux_amd64&quot;</span>

  V                Set to <span class="token number">1</span> <span class="token builtin class-name">enable</span> verbose build. Default is <span class="token number">0</span>.

Make example:

<span class="token comment"># make build BINS=sealer                                         Only a single sealer binary is built.</span>
<span class="token comment"># make -j  all                                           Run tidy gen add-copyright format lint cover build concurrently.</span>
<span class="token comment"># make gen                                                       Generate all necessary files.</span>
<span class="token comment"># make linux.arm64                                               sealer is compiled on arm64 platform.</span>
<span class="token comment"># make verify-copyright                                          Verify the license headers for all files.</span>
<span class="token comment"># make install-deepcopy-gen                                      Install deepcopy-gen tools if the license is missing.</span>
<span class="token comment"># make build BINS=sealer V=1 DEBUG=1                             Build debug binaries for only sealer.</span>
<span class="token comment"># make build.multiarch PLATFORMS=&quot;linux_arm64 linux_amd64&quot; V=1   Build binaries for both platforms.</span>

Ariables:

  DEBUG: <span class="token number">0</span>
  BINS: sealer seautil
  PLATFORMS: linux_amd64 linux_arm64
  V:
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u53EF\u89C2\u6D4B\u7684\u7F16\u8BD1\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u53EF\u89C2\u6D4B\u7684\u7F16\u8BD1\u4FE1\u606F" aria-hidden="true">#</a> \u53EF\u89C2\u6D4B\u7684\u7F16\u8BD1\u4FE1\u606F</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u276F <span class="token function">make</span> build
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&gt;</span> Verify that a suitable version of Go exists, current version: go version go1.20 linux/amd64
<span class="token assign-left variable">COMMAND</span><span class="token operator">=</span>sealer
<span class="token assign-left variable">PLATFORM</span><span class="token operator">=</span>linux_amd64
<span class="token assign-left variable">BIN_DIR</span><span class="token operator">=</span>/root/workspaces/sealer/_output/bin
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&gt;</span> Building binary sealer v0.9.3.dirty <span class="token keyword">for</span> linux_amd64
<span class="token assign-left variable">COMMAND</span><span class="token operator">=</span>seautil
<span class="token assign-left variable">PLATFORM</span><span class="token operator">=</span>linux_amd64
<span class="token assign-left variable">BIN_DIR</span><span class="token operator">=</span>/root/workspaces/sealer/_output/bin
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&gt;</span> Building binary seautil v0.9.3.dirty <span class="token keyword">for</span> linux_amd64
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&gt;</span> Building binary sealer seautil v0.9.3.dirty <span class="token keyword">for</span> linux_amd64

\u276F sealer version <span class="token comment">#-o yaml</span>
sealerVersion:
  major: <span class="token string">&quot;&quot;</span>
  minor: <span class="token string">&quot;&quot;</span>
  gitversion: untagged
  gitcommit: 7c086967e1ee44d33e095780639b0ee006edf6ad
  gittreestate: dirty
  builddate: <span class="token string">&quot;2023-05-07T11:43:30Z&quot;</span>
  goversion: go1.20
  compiler: gc
  platform: linux/amd64

\u276F sealer version <span class="token parameter variable">-o</span> json
<span class="token punctuation">{</span><span class="token string">&quot;sealerVersion&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;gitVersion&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;untagged&quot;</span>,<span class="token string">&quot;gitCommit&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;7c086967e1ee44d33e095780639b0ee006edf6ad&quot;</span>,<span class="token string">&quot;gitTreeState&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;dirty&quot;</span>,<span class="token string">&quot;buildDate&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2023-05-07T11:43:30Z&quot;</span>,<span class="token string">&quot;goVersion&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;go1.20&quot;</span>,<span class="token string">&quot;compiler&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;gc&quot;</span>,<span class="token string">&quot;platform&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;linux/amd64&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F88\u65B9\u4FBF\u7684\u6253\u5370\u51FA\u5F53\u524D\u7F16\u8BD1\u72B6\u6001\uFF0C\u751A\u81F3\u662F\u7F16\u8BD1\u7684\u73AF\u5883\uFF0C\u4EE5\u53CA\u901A\u8FC7 <code>v0.9.3.dirty</code> \u5224\u65AD git \u662F\u5426\u5E72\u51C0\u3002</p><p>\u5728 sealer \u7684 cmd \u4E2D\uFF0C\u4F18\u5316\u4E86\u53EF\u89C2\u6D4B\u6027\u4EE3\u7801\u90E8\u5206\u3002</p><h3 id="\u5DE5\u5177\u5305" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u5177\u5305" aria-hidden="true">#</a> \u5DE5\u5177\u5305</h3><p>\u672C\u5DE5\u5177\u5305\u4F7F\u7528 Makefile \u5B9E\u73B0\u4E86\u4E00\u4E9B CICD \u52A8\u4F5C\uFF0C\u5305\u62EC\u4EE3\u7801\u5206\u6790\u3001\u4EE3\u7801\u751F\u6210\u3001\u6D4B\u8BD5\u3001\u7248\u672C\u63A7\u5236\u548C\u5B9E\u7528\u5DE5\u5177\u3002\u8FD9\u4E9B\u5DE5\u5177\u7684\u5B89\u88C5\u65B9\u5F0F\u5982\u4E0B\uFF1A</p><ul><li>\u5B89\u88C5 golangci-lint: \u7528\u4E8E\u4EE3\u7801\u5206\u6790</li><li>\u5B89\u88C5 goimports: \u7528\u4E8E\u683C\u5F0F\u5316 Go \u6E90\u6587\u4EF6</li><li>\u5B89\u88C5 addlicense: \u7528\u4E8E\u4E3A\u6E90\u6587\u4EF6\u6DFB\u52A0\u8BB8\u53EF\u8BC1\u5934</li><li>\u5B89\u88C5 deepcopy-gen: \u7528\u4E8E\u751F\u6210\u6DF1\u5EA6\u590D\u5236\u51FD\u6570</li><li>\u5B89\u88C5 conversion-gen: \u7528\u4E8E\u751F\u6210\u8F6C\u6362\u51FD\u6570</li><li>\u5B89\u88C5 ginkgo: \u7528\u4E8E\u8FD0\u884C\u5355\u4E2A\u6D4B\u8BD5\u6216\u6D4B\u8BD5\u96C6</li><li>\u5B89\u88C5 go-junit-report: \u7528\u4E8E\u5C06 Go \u6D4B\u8BD5\u8F93\u51FA\u8F6C\u6362\u4E3A junit xml \u683C\u5F0F</li><li>\u5B89\u88C5 kube-score: \u7528\u4E8E\u68C0\u67E5 Kubernetes yaml \u6587\u4EF6</li><li>\u5B89\u88C5 kubeconform: \u7528\u4E8E\u68C0\u67E5 Kubernetes yaml \u6587\u4EF6</li><li>\u5B89\u88C5 go-gitlint: \u7528\u4E8E\u68C0\u67E5 git \u63D0\u4EA4\u4FE1\u606F</li><li>\u5B89\u88C5 gsemver: \u7528\u4E8E\u751F\u6210 semver</li><li>\u5B89\u88C5 git-chglog: \u7528\u4E8E\u751F\u6210 changelog</li><li>\u5B89\u88C5 github-release: \u7528\u4E8E\u521B\u5EFA Github Release</li><li>\u5B89\u88C5 golines: \u7528\u4E8E\u683C\u5F0F\u5316\u957F\u884C</li><li>\u5B89\u88C5 go-mod-outdated: \u7528\u4E8E\u68C0\u67E5\u8FC7\u65F6\u7684\u4F9D\u8D56\u5173\u7CFB</li><li>\u5B89\u88C5 mockgen: \u7528\u4E8E\u751F\u6210\u6A21\u62DF\u51FD\u6570</li><li>\u5B89\u88C5 gotests: \u7528\u4E8E\u751F\u6210\u6D4B\u8BD5\u51FD\u6570</li><li>\u5B89\u88C5 protoc-gen-go: \u7528\u4E8E\u4ECE protobuf \u6587\u4EF6\u751F\u6210 Go \u6E90\u6587\u4EF6</li><li>\u5B89\u88C5 cfssl: \u7528\u4E8E\u751F\u6210\u8BC1\u4E66</li><li>\u5B89\u88C5 depth: \u7528\u4E8E\u68C0\u67E5\u4F9D\u8D56\u6811</li><li>\u5B89\u88C5 go-callvis: \u7528\u4E8E\u53EF\u89C6\u5316\u8C03\u7528\u56FE</li><li>\u5B89\u88C5 gothanks: \u7528\u4E8E\u611F\u8C22 Go \u4F9D\u8D56\u9879</li><li>\u5B89\u88C5 richgo: \u7528\u4E8E\u4E30\u5BCC\u7684\u6D4B\u8BD5\u8F93\u51FA</li><li>\u5B89\u88C5 rts: \u7528\u4E8E\u67E5\u627E Go \u7C7B\u578B\u5B9A\u4E49</li><li>\u5B89\u88C5 codegen: \u7528\u4E8E\u4EE3\u7801\u751F\u6210</li></ul><p>\u8FD9\u4E9B\u5DE5\u5177\u7684\u5B89\u88C5\u8DEF\u5F84\u4E3A $GOBIN \u6216 $TOOLS_DIR\u3002\u6709\u4E9B\u5DE5\u5177\u9700\u8981\u4ECE Github \u6216\u79C1\u6709\u6E90\u4EE3\u7801\u4ED3\u5E93\u8FDB\u884C\u5B89\u88C5\uFF0C\u6709\u4E9B\u5DE5\u5177\u9700\u8981\u8FDB\u884C\u7F16\u8BD1\uFF0C\u9700\u8981\u4E00\u4E9B\u7279\u5B9A\u7684\u53C2\u6570\u6765\u5B89\u88C5\u3002</p><p>\u8FD9\u4E9B\u5DE5\u5177\u7684\u4F7F\u7528\u9700\u8981\u5728 Makefile \u4E2D\u8C03\u7528\u7279\u5B9A\u7684\u76EE\u6807\uFF0C\u5982\u4E0B\uFF1A</p><ul><li>tools.install: \u7528\u4E8E\u5B89\u88C5\u5FC5\u987B\u7684\u5DE5\u5177</li><li>tools.install-all: \u7528\u4E8E\u5B89\u88C5\u6240\u6709\u5DE5\u5177</li><li>tools.install.%: \u7528\u4E8E\u5B89\u88C5\u5355\u4E2A\u5DE5\u5177</li><li>tools.install-all.%: \u7528\u4E8E\u5E76\u884C\u5B89\u88C5\u5355\u4E2A\u5DE5\u5177</li><li>tools.verify.%: \u7528\u4E8E\u68C0\u67E5\u5DE5\u5177\u662F\u5426\u5DF2\u5B89\u88C5\u5E76\u5B89\u88C5\u5B83</li></ul><h3 id="\u5DE5\u5177\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u5DE5\u5177\u8BF4\u660E" aria-hidden="true">#</a> \u5DE5\u5177\u8BF4\u660E</h3><p>\u4E0B\u9762\u662F\u6BCF\u4E2A\u5DE5\u5177\u7684\u8BE6\u7EC6\u8BF4\u660E\uFF1A</p><ul><li>golangci-lint: \u7528\u4E8E\u5BF9 Go \u4EE3\u7801\u8FDB\u884C\u5FEB\u901F\u68C0\u67E5\u7684\u5DE5\u5177\uFF0C\u5B83\u53EF\u4EE5\u68C0\u67E5\u5E38\u89C1\u7684\u9519\u8BEF\u548C\u6F5C\u5728\u7684\u9519\u8BEF\uFF0C\u6BD4\u5982\uFF1A\u4EE3\u7801\u98CE\u683C\u3001\u4E0D\u5B89\u5168\u7684\u4EE3\u7801\u3001\u7A7A\u6307\u9488\u5F15\u7528\u3001\u6027\u80FD\u95EE\u9898\u7B49\u3002</li><li>goimports: \u7528\u4E8E\u683C\u5F0F\u5316 Go \u4EE3\u7801\u7684\u5DE5\u5177\uFF0C\u5B83\u53EF\u4EE5\u81EA\u52A8\u6DFB\u52A0\u6216\u5220\u9664\u672A\u4F7F\u7528\u7684\u5BFC\u5165\uFF0C\u5C06\u5BFC\u5165\u5206\u7EC4\uFF0C\u5E76\u5C06\u5305\u540D\u6309\u5B57\u5178\u5E8F\u6392\u5E8F\u3002</li><li>addlicense: \u7528\u4E8E\u81EA\u52A8\u4E3A\u6E90\u6587\u4EF6\u6DFB\u52A0\u8BB8\u53EF\u8BC1\u5934\u7684\u5DE5\u5177\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u591A\u79CD\u7C7B\u578B\u7684\u8BB8\u53EF\u8BC1\u3002</li><li>deepcopy-gen: \u7528\u4E8E\u4E3A Go \u7ED3\u6784\u4F53\u751F\u6210\u6DF1\u5EA6\u590D\u5236\u51FD\u6570\u7684\u4EE3\u7801\u751F\u6210\u5668\u3002</li><li>conversion-gen: \u7528\u4E8E\u4E3A Go \u7ED3\u6784\u4F53\u751F\u6210\u8F6C\u6362\u51FD\u6570\u7684\u4EE3\u7801\u751F\u6210\u5668\u3002</li><li>ginkgo: \u7528\u4E8E\u8FD0\u884C\u5355\u4E2A\u6D4B\u8BD5\u6216\u6D4B\u8BD5\u96C6\u7684\u6D4B\u8BD5\u6846\u67B6\uFF0C\u53EF\u4EE5\u4F7F\u7528 Gomega \u65AD\u8A00\u5E93\u3002</li><li>go-junit-report: \u7528\u4E8E\u5C06 Go \u6D4B\u8BD5\u8F93\u51FA\u8F6C\u6362\u4E3A junit xml \u683C\u5F0F\u7684\u5DE5\u5177\uFF0C\u7528\u4E8E\u4E0E\u5176\u4ED6\u6D4B\u8BD5\u5DE5\u5177\u6216 CICD \u6D41\u7A0B\u96C6\u6210\u3002</li><li>kube-score: \u7528\u4E8E\u68C0\u67E5 Kubernetes yaml \u6587\u4EF6\u7684\u5DE5\u5177\uFF0C\u5B83\u53EF\u4EE5\u68C0\u67E5\u6587\u4EF6\u4E2D\u7684\u6700\u4F73\u5B9E\u8DF5\u548C\u5B89\u5168\u95EE\u9898\u3002</li><li>kubeconform: \u7528\u4E8E\u68C0\u67E5 Kubernetes yaml \u6587\u4EF6\u7684\u5DE5\u5177\uFF0C\u5B83\u53EF\u4EE5\u68C0\u67E5\u6587\u4EF6\u4E2D\u7684\u6700\u4F73\u5B9E\u8DF5\u548C\u5B89\u5168\u95EE\u9898\u3002</li><li>\u2026\u2026</li></ul><h3 id="\u8BBE\u8BA1\u6280\u5DE7" tabindex="-1"><a class="header-anchor" href="#\u8BBE\u8BA1\u6280\u5DE7" aria-hidden="true">#</a> \u8BBE\u8BA1\u6280\u5DE7</h3><p>\u8FD9\u91CC\u6709\u4E00\u4E2A\u5DE7\u5999\u7684\u8BBE\u8BA1\uFF0C\u6211\u4EEC\u65B0\u589E\u4E86\u4E00\u4E2A <code>tools</code> \u76EE\u5F55\u3002\u4E0D\u662F\u6240\u6709\u5DE5\u5177\u90FD\u5B89\u88C5\u5728 <code>GOPATH/bin</code> \u76EE\u5F55\u4E0B\uFF0C\u800C\u662F\u5C06 <code>tools.install</code> \u5B89\u88C5\u903B\u8F91\u653E\u5165\u4E86 <code>GOPATH/bin</code>\uFF0C\u5C06 <code>tools.verify.%</code> \u903B\u8F91\u90FD\u653E\u5728\u4E86 <code>tools</code> \u7684\u7BA1\u7406\u4E4B\u4E0B\u3002\u5176\u4ED6\u7684 <code>targer</code> \u5BF9\u8C61\u662F\u901A\u8FC7 <code>tools.verify.%</code> \u8C03\u7528\u7684\u3002\u8FD9\u5BF9\u4E8E\u540E\u671F\u7EF4\u62A4\u975E\u5E38\u65B9\u4FBF\uFF0C\u5C24\u5176\u662F\u5728\u4F7F\u7528\u5DE5\u5177\u4E0B\u7684 <code>gvm</code> \u7BA1\u7406 Go \u8BED\u8A00\u7248\u672C\u65F6\u3002</p><h3 id="\u5B58\u5728\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5B58\u5728\u7684\u95EE\u9898" aria-hidden="true">#</a> \u5B58\u5728\u7684\u95EE\u9898</h3><p>\u56E0\u4E3A cgo \u7684\u539F\u56E0\uFF0C\u5355\u5143\u6D4B\u8BD5\u548C\u6D4B\u8BD5\u8986\u76D6\u7387\u4F9D\u65E7\u5F88\u96BE\u4FDD\u8BC1\u987A\u5229\u8FD0\u884C</p><p>\u4F7F\u7528 <code>go.build.multiarch</code> \u7F16\u8BD1\u7684\u65F6\u5019\uFF0C\u53EF\u4EE5\u4FDD\u8BC1 <code>amd64</code> \u987A\u5229\u901A\u8FC7\uFF0C\u4F46\u662F\u4E0D\u80FD\u4FDD\u8BC1 <code>arm64</code> \u7F16\u8BD1\u3002</p><ul><li><p>\u62A5\u9519\u4FE1\u606F</p><p>cgo: C compiler &quot;aarch64-linux-gnu-gcc&quot; not found: exec: &quot;aarch64-linux-gnu-gcc&quot;: executable file not found in $PATH</p></li></ul><p>\u9700\u8981\u4F18\u5316\u4E00\u4E9B\u5173\u4E8E\u7248\u672C\u7684\u4EE3\u7801</p><h3 id="\u6784\u5EFA\u811A\u672C\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u6784\u5EFA\u811A\u672C\u4F18\u5316" aria-hidden="true">#</a> \u6784\u5EFA\u811A\u672C\u4F18\u5316</h3><p>\u4E00\u6837\u7684\uFF0C\u901A\u8FC7\u5E2E\u52A9\u4FE1\u606F\uFF0C\u53EF\u4EE5\u5F88\u6E05\u6670\u7684\u4E86\u89E3\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u276F ./scripts/build.sh <span class="token parameter variable">-h</span>

Usage: ./scripts/build.sh <span class="token punctuation">[</span>-h<span class="token punctuation">]</span> <span class="token punctuation">[</span>-p PLATFORMS<span class="token punctuation">]</span> <span class="token punctuation">[</span>-a<span class="token punctuation">]</span> <span class="token punctuation">[</span>-b BINARIES<span class="token punctuation">]</span>

Build Sealer binaries <span class="token keyword">for</span> one or <span class="token function">more</span> platforms.
    DOTO: I recommend using a Makefile <span class="token keyword">for</span> a <span class="token function">more</span> immersive experience

    -h, <span class="token parameter variable">--help</span>      display this <span class="token builtin class-name">help</span> and <span class="token builtin class-name">exit</span>

    -p, <span class="token parameter variable">--platform</span>  build binaries <span class="token keyword">for</span> the specified platform<span class="token punctuation">(</span>s<span class="token punctuation">)</span>, e.g. linux/amd64 or linux/arm64.
                    Multiple platforms should be separated by comma, e.g. linux/amd64,linux/arm64.

    -a, <span class="token parameter variable">--all</span>       build binaries <span class="token keyword">for</span> all supported platforms

    -b, <span class="token parameter variable">--binary</span>    build the specified binary/binaries, e.g. sealer or seautil.
                    Multiple binaries should be separated by comma, e.g. sealer,seautil.
                    <span class="token punctuation">(</span>note: currently only supported <span class="token keyword">in</span> Makefile<span class="token punctuation">)</span>

+ <span class="token builtin class-name">exit</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6784\u5EFA\u811A\u672C <code>build.sh</code> \u652F\u6301\u591A\u79CD\u9009\u9879\uFF0C\u5305\u62EC\u6784\u5EFA\u6307\u5B9A binary/binaries\uFF08\u4EC5\u5728 Makefile \u4E2D\u652F\u6301\uFF09\u3001\u6784\u5EFA\u6307\u5B9A platform(s) \u548C\u6784\u5EFA\u6240\u6709\u652F\u6301\u7684 platform(s)\uFF0C\u4E0D\u8FC7\u76EE\u524D\u4E0D\u652F\u6301~</li></ul><h3 id="cicd-actions-\u7684\u6539\u8FDB\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#cicd-actions-\u7684\u6539\u8FDB\u7B56\u7565" aria-hidden="true">#</a> CICD actions \u7684\u6539\u8FDB\u7B56\u7565</h3><p>Makefile \u7684\u6539\u8FDB\uFF0C\u53EF\u80FD\u5BFC\u81F4\u90E8\u5206 actions \u6CA1\u529E\u6CD5\u987A\u5229\u901A\u8FC7\u3002\u540E\u9762\u6211\u5C06\u4F1A\u7EE7\u7EED\u4F18\u5316 CICD \u6D41\u7A0B\u3002</p><p>\u2026\u2026</p><h2 id="end-\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#end-\u94FE\u63A5" aria-hidden="true">#</a> END \u94FE\u63A5</h2><ul><li><div><a href="56.md" style="float:left;">\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} </a><a href="58.md" style="float:right;"> \uFE0F\u4E0B\u4E00\u8282\u{1F517}</a></div></li></ul>`,36),Ln=s("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),jn={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},zn=n("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),Fn=s(")"),Un=s("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),Hn={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},Kn=s("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function Wn($n,Zn){const a=i("ExternalLinkIcon"),l=i("RouterLink");return o(),r("div",null,[n("ul",null,[n("li",null,[n("a",u,[m,e(a)])])]),v,k,b,n("blockquote",null,[n("p",null,[h,n("a",g,[f,e(a)]),_,n("a",y,[x,e(a)]),w,n("a",I,[q,e(a)])])]),B,G,M,R,n("p",null,[T,n("a",C,[D,e(a)]),O,n("a",S,[A,e(a)]),E]),N,P,n("ul",null,[n("li",null,[n("a",V,[L,e(a)])])]),j,z,n("p",null,[F,n("a",U,[H,e(a)]),K,n("a",W,[$,e(a)]),Z]),n("p",null,[n("a",Q,[Y,e(a)])]),J,X,n("p",null,[n("a",nn,[sn,e(a)])]),en,an,n("p",null,[ln,n("a",tn,[on,e(a)])]),rn,cn,n("ul",null,[dn,pn,n("li",null,[n("a",un,[mn,e(a)]),vn]),kn,n("li",null,[bn,hn,n("ul",null,[n("li",null,[n("a",gn,[fn,e(a)]),_n]),n("li",null,[n("a",yn,[xn,e(a)]),wn]),n("li",null,[n("a",In,[qn,e(a)]),Bn]),n("li",null,[n("a",Gn,[Mn,e(a)]),Rn]),n("li",null,[n("a",Tn,[Cn,e(a)]),Dn]),n("li",null,[n("a",On,[Sn,e(a)]),An]),n("li",null,[n("a",En,[Nn,e(a)]),Pn])])])]),Vn,n("ul",null,[n("li",null,[n("p",null,[e(l,{to:"/"},{default:c(()=>[Ln]),_:1})])]),n("li",null,[n("p",null,[n("a",jn,[zn,e(a)]),Fn])]),n("li",null,[n("p",null,[Un,n("a",Hn,[Kn,e(a)])])])])])}const Yn=t(p,[["render",Wn],["__file","57.html.vue"]]);export{Yn as default};
