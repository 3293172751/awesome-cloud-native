import{_ as e,r as t,o as p,c,a as n,b as i,e as s,d as l}from"./app.9f14a191.js";const o={},r=n("h1",{id:"frp-\u5B66\u4E60\u4EE5\u53CA\u5B9E\u8DF5",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#frp-\u5B66\u4E60\u4EE5\u53CA\u5B9E\u8DF5","aria-hidden":"true"},"#"),s(" frp \u5B66\u4E60\u4EE5\u53CA\u5B9E\u8DF5")],-1),d=n("p",null,"\u516C\u53F8\u5185\u90E8\u6709\u4E00\u53F0 GPU \uFF0C\u9700\u8981\u4F9B\u5916\u7F51\u8BBF\u95EE\uFF0C\u60F3\u5230\u4E86\u4E00\u4E2A\u975E\u5E38\u6D41\u884C\u7684\u5F00\u6E90\u9879\u76EE frp \uFF0C\u4ECA\u5929\u6765\u5B66\u4E60\u4E00\u4E0B frp \u3002",-1),u=n("p",null,"\u8981\u5B9E\u73B0\u516C\u53F8\u5185\u90E8GPU\u670D\u52A1\u5668\u4F9B\u5916\u7F51\u8BBF\u95EE\uFF0CFRP\uFF08Fast Reverse Proxy\uFF09\u662F\u4E00\u4E2A\u5F88\u597D\u7684\u89E3\u51B3\u65B9\u6848\u3002FRP \u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u4F60\u8F7B\u677E\u5730\u5C06\u5185\u7F51\u670D\u52A1\u66B4\u9732\u5230\u516C\u7F51\u3002",-1),v=n("p",null,[n("strong",null,"\u8FD9\u4E00\u671F\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u4F7F\u7528\u6559\u7A0B\uFF0C\u4E0B\u4E00\u671F\u5C06\u4F1A\u5B66\u4E60 frp \u9879\u76EE\uFF0C\u5B66\u4E60\u6E90\u7801\u67B6\u6784\u8BBE\u8BA1")],-1),m=n("h2",{id:"\u5B66\u4E60-frp",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5B66\u4E60-frp","aria-hidden":"true"},"#"),s(" \u5B66\u4E60 FRP")],-1),k=n("li",null,[n("strong",null,"\u7406\u89E3FRP\u7684\u57FA\u672C\u6982\u5FF5"),s("\uFF1A\u4E86\u89E3FRP\u7684\u5DE5\u4F5C\u539F\u7406\uFF0C\u5305\u62EC\u5BA2\u6237\u7AEF\uFF08frpc\uFF09\u548C\u670D\u52A1\u7AEF\uFF08frps\uFF09\u4E4B\u95F4\u7684\u4EA4\u4E92\u65B9\u5F0F\u3002")],-1),b=n("strong",null,"\u9605\u8BFB\u5B98\u65B9\u6587\u6863",-1),h=s("\uFF1AFRP\u7684"),f={href:"https://github.com/fatedier/frp",target:"_blank",rel:"noopener noreferrer"},g=s("GitHub\u9875\u9762"),y=s("\u63D0\u4F9B\u4E86\u8BE6\u7EC6\u7684\u5B89\u88C5\u6307\u5357\u548C\u914D\u7F6E\u8BF4\u660E\uFF0C\u8FD9\u662F\u5B66\u4E60FRP\u7684\u6700\u4F73\u8D77\u70B9\u3002"),P=n("li",null,[n("strong",null,"\u638C\u63E1\u57FA\u672C\u914D\u7F6E"),s("\uFF1A\u5B66\u4E60\u5982\u4F55\u914D\u7F6EFRP\u7684\u670D\u52A1\u7AEF\u548C\u5BA2\u6237\u7AEF\uFF0C\u7406\u89E3\u4E0D\u540C\u914D\u7F6E\u9879\u7684\u542B\u4E49\u548C\u7528\u9014\u3002")],-1),x=n("li",null,[n("strong",null,"\u4E86\u89E3\u5B89\u5168\u8BBE\u7F6E"),s("\uFF1A\u719F\u6089\u5982\u4F55\u901A\u8FC7\u52A0\u5BC6\u548C\u8BA4\u8BC1\u63D0\u9AD8FRP\u7684\u5B89\u5168\u6027\u3002")],-1),R=n("li",null,[n("strong",null,"\u63A2\u7D22\u9AD8\u7EA7\u529F\u80FD"),s("\uFF1A\u4E86\u89E3FRP\u7684\u8D1F\u8F7D\u5747\u8861\u3001HTTP/HTTPS\u652F\u6301\u7B49\u9AD8\u7EA7\u529F\u80FD\u3002")],-1),_=l(`<h2 id="\u5B9E\u8DF5-frp" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u8DF5-frp" aria-hidden="true">#</a> \u5B9E\u8DF5 FRP</h2><ol><li><p><strong>\u642D\u5EFAFRP\u670D\u52A1\u7AEF</strong>\uFF1A</p><ul><li>\u5728\u4E00\u53F0\u5177\u6709\u516C\u7F51IP\u7684\u670D\u52A1\u5668\u4E0A\u90E8\u7F72FRP\u670D\u52A1\u7AEF\uFF08frps\uFF09\u3002</li><li>\u914D\u7F6E <code>frps.ini</code>\u6587\u4EF6\uFF0C\u8BBE\u7F6E\u76D1\u542C\u7AEF\u53E3\u3001\u8BA4\u8BC1\u65B9\u5F0F\u7B49\u3002</li></ul><blockquote><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u65B0\u7248\u672C\u7684\u5DF2\u7ECF\u6CA1\u6709\u7528 <code>ini</code> \u6587\u4EF6\u4E86\uFF0C\u800C\u4F7F\u7528\u7684</p></blockquote></li><li><p><strong>\u914D\u7F6EFRP\u5BA2\u6237\u7AEF</strong>\uFF1A</p><ul><li>\u5728\u5185\u7F51\u7684GPU\u670D\u52A1\u5668\u4E0A\u90E8\u7F72FRP\u5BA2\u6237\u7AEF\uFF08frpc\uFF09\u3002</li><li>\u6839\u636E\u9700\u8981\u8BBF\u95EE\u7684\u670D\u52A1\uFF08\u4F8B\u5982SSH\u3001HTTP\uFF09\uFF0C\u5728frpc.ini\u4E2D\u914D\u7F6E\u76F8\u5E94\u7684\u4EE3\u7406\u3002</li></ul></li><li><p><strong>\u542F\u52A8\u548C\u6D4B\u8BD5</strong>\uFF1A</p><ul><li>\u542F\u52A8FRP\u670D\u52A1\u7AEF\u548C\u5BA2\u6237\u7AEF\u3002</li><li>\u4ECE\u5916\u7F51\u6D4B\u8BD5\u662F\u5426\u80FD\u6210\u529F\u8BBF\u95EE\u5185\u7F51\u7684GPU\u670D\u52A1\u5668\u3002</li></ul></li><li><p><strong>\u76D1\u63A7\u548C\u7EF4\u62A4</strong>\uFF1A</p><ul><li>\u76D1\u63A7FRP\u670D\u52A1\u7684\u8FD0\u884C\u72B6\u6001\uFF0C\u786E\u4FDD\u7A33\u5B9A\u6027\u3002</li><li>\u5B9A\u671F\u66F4\u65B0FRP\u4EE5\u83B7\u5F97\u65B0\u529F\u80FD\u548C\u5B89\u5168\u4FEE\u590D\u3002</li></ul></li><li><p><strong>\u5B89\u5168\u52A0\u56FA</strong>\uFF1A</p><ul><li>\u4F7F\u7528\u52A0\u5BC6\u548C\u8BA4\u8BC1\u6765\u4FDD\u62A4FRP\u901A\u9053\u3002</li><li>\u8003\u8651\u8BBE\u7F6E\u9632\u706B\u5899\u89C4\u5219\uFF0C\u9650\u5236\u8BBF\u95EEFRP\u670D\u52A1\u7684IP\u8303\u56F4\u3002</li></ul></li><li><p><strong>\u89E3\u51B3\u53EF\u80FD\u7684\u95EE\u9898</strong>\uFF1A</p><ul><li>\u5982\u679C\u9047\u5230\u8FDE\u63A5\u95EE\u9898\uFF0C\u68C0\u67E5\u9632\u706B\u5899\u8BBE\u7F6E\u548C\u7F51\u7EDC\u914D\u7F6E\u3002</li><li>\u67E5\u770BFRP\u7684\u65E5\u5FD7\u6587\u4EF6\u4EE5\u83B7\u53D6\u9519\u8BEF\u4FE1\u606F\uFF0C\u5E2E\u52A9\u5B9A\u4F4D\u95EE\u9898\u3002</li></ul></li></ol><h2 id="\u5B89\u88C5\u4E0E\u914D\u7F6E-frp-fast-reverse-proxy" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u4E0E\u914D\u7F6E-frp-fast-reverse-proxy" aria-hidden="true">#</a> \u5B89\u88C5\u4E0E\u914D\u7F6E FRP\uFF08Fast Reverse Proxy\uFF09</h2><p>FRP \u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684\u53CD\u5411\u4EE3\u7406\u5E94\u7528\uFF0C\u7528\u4E8E\u5B9E\u73B0\u5185\u7F51\u7A7F\u900F\u3002\u6B64\u6587\u6863\u6307\u5BFC\u60A8\u5982\u4F55\u5B89\u88C5\u3001\u914D\u7F6E\uFF0C\u5E76\u7406\u89E3 FRP \u7684\u57FA\u672C\u5DE5\u4F5C\u539F\u7406\u3002</p><p>\u6211\u7528\u7684\u662F\u6700\u65B0\u7248\u7684\uFF0C\u5E76\u4E14\u5E0C\u671B\u540E\u671F\u80FD\u9605\u8BFB\u6E90\u7801\u5E76\u4E14\u8C03\u8BD5</p><p>\u51C6\u5907\u4E24\u53F0\u673A\u5668\uFF0C\u5728\u516C\u53F8\u914D\u7F6E\u4E00\u53F0\u8089\u673A(\u53C8\u79F0\u5821\u5792\u673A\u6216\u8DF3\u677F\u673A)\uFF0C\u4E3A\u8FD9\u4E00\u53F0\u670D\u52A1\u5668(\u6216PC)\u4E70\u4E00\u4E2A\u516C\u7F51IP(\u6216\u4F7F\u7528\u516C\u53F8\u7EBF\u6709\u516C\u7F51IP)\uFF0C\u82E5\u60F3\u6700\u5927\u7A0B\u5EA6\u63D0\u9AD8\u516C\u7F51IP\u7684\u4F7F\u7528\u7387\uFF0C\u5728\u8089\u9E21\u524D\u4E5F\u53EF\u4EE5\u8BBE\u7F6E\u4E00\u53F0\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u4F7F\u7528\u8BF7\u6C42\u8F6C\u53D1\u7684\u5F62\u5F0F\uFF0C\u5C06\u5F62\u5982ssh\u7B49\u8FDC\u7A0B\u8BBF\u95EE\u7684\u8BF7\u6C42\u8F6C\u53D1\u5230\u8089\u9E21\u4E0A\u3002\u6B64\u65F6\u6211\u4EEC\u53EF\u4EE5\u5148\u8BBF\u95EE\u8089\u9E21(ssh\u6216\u5176\u4ED6)\uFF0C\u767B\u5F55\u5230\u8089\u9E21\u540E\u518D\u8BBF\u95EE\u516C\u53F8\u5185\u90E8\u7684PC\u3002</p><p>\u8865\u5145\uFF1A\u5185\u7F51\u7A7F\u900F\u6307\u7684\u662F\u901A\u8FC7\u4E92\u8054\u7F51\u8BBF\u95EE\u5C40\u57DF\u7F51\u7684\u4E00\u79CD\u6280\u672F\u624B\u6BB5</p><blockquote><p>\u5728\u8FDB\u884C FRP \u90E8\u7F72\u524D\uFF0C\u60A8\u9700\u8981\u51C6\u5907\u4E24\u53F0\u673A\u5668\uFF1A\u4E00\u53F0\u4F4D\u4E8E\u516C\u53F8\u5185\u90E8\u7F51\u7EDC\u7684\u673A\u5668\uFF08\u79F0\u4E3A\u201C\u8DF3\u677F\u673A\u201D\u6216\u201C\u8089\u673A\u201D\uFF09\uFF0C\u53E6\u4E00\u53F0\u5177\u6709\u516C\u7F51 IP \u5730\u5740\u7684\u670D\u52A1\u5668\u3002\u82E5\u9700\u63D0\u9AD8\u516C\u7F51 IP \u4F7F\u7528\u6548\u7387\uFF0C\u53EF\u5728\u8DF3\u677F\u673A\u524D\u8BBE\u7F6E\u4EE3\u7406\u670D\u52A1\u5668\u8FDB\u884C\u8BF7\u6C42\u8F6C\u53D1\u3002\u901A\u8FC7\u8FD9\u79CD\u914D\u7F6E\uFF0C\u60A8\u53EF\u5148\u8BBF\u95EE\u8DF3\u677F\u673A\uFF0C\u7136\u540E\u4ECE\u8DF3\u677F\u673A\u8BBF\u95EE\u516C\u53F8\u5185\u90E8\u7F51\u7EDC\u7684\u5176\u4ED6\u8BA1\u7B97\u673A\u3002</p></blockquote><p><strong>frp\u7684\u4F5C\u7528\u548C\u539F\u7406\uFF1A</strong></p><p>\u9664\u4E86\u5E38\u89C4\u5185\u7F51\u7A7F\u900F\u65B9\u5F0F\u4EE5\u5916\uFF0C\u4F7F\u7528frp\u6280\u672F\u8FDB\u884C\u5185\u7F51\u7A7F\u900F\u4E5F\u662F\u975E\u5E38\u597D\u7528\u7684\uFF0Cfrp\u800C\u4E14\u6700\u5927\u7684\u4F18\u52BF\u5728\u4E8E\u53EF\u4EE5\u8E6D\u516C\u7F51IP\u3002</p><p>frp\u662F\u5982\u4F55\u5B9E\u73B0\u7684\uFF1A\u9996\u5148frp\u5206\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\uFF0C\u901A\u8FC7\u5206\u522B\u5728\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\u5B89\u88C5\u914D\u7F6Efrp\uFF0C\u8FBE\u5230\u5185\u7F51\u7A7F\u900F\u7684\u6548\u679C\u3002\u4E00\u822C\u88AB\u8BBF\u95EE\u7684PC\u4E0A\u5B89\u88C5\u5BA2\u6237\u7AEF\u7A0B\u5E8F\uFF0C\u5728\u62E5\u6709\u516C\u7F51ip\uFF08\u6216\u4E0E\u4E92\u8054\u7F51\u8FDE\u901A\uFF09\u7684PC\u4E0A\u5B89\u88C5\u670D\u52A1\u5668\u7A0B\u5E8F\u3002\u62D3\u6251\u56FE\u5982\u4E0B\uFF1A</p><p><img src="http://sm.nsddd.top/sm202311251045726.png" alt="image-20231125104523412"></p><p>FRP \u901A\u8FC7\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\u7684\u914D\u5408\u5B9E\u73B0\u5185\u7F51\u7A7F\u900F\uFF0C\u5141\u8BB8\u7528\u6237\u501F\u52A9\u516C\u7F51 IP \u8BBF\u95EE\u5185\u90E8\u7F51\u7EDC\u8D44\u6E90\u3002</p><h3 id="frp-\u90E8\u7F72\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#frp-\u90E8\u7F72\u6B65\u9AA4" aria-hidden="true">#</a> FRP \u90E8\u7F72\u6B65\u9AA4</h3><ol><li><p><strong>\u83B7\u53D6 FRP\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> clone https://github.com/fatedier/frp<span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> frp
$ <span class="token function">make</span> build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u6B65\u9AA4\u5728\u670D\u52A1\u5668\u548C\u5BA2\u6237\u7AEF\u90FD\u9700\u8981\u6267\u884C\u3002</p></li><li><p><strong>\u5728\u670D\u52A1\u5668\u4E0A\u8FD0\u884C FRP \u670D\u52A1\u7AEF\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ ./bin/frps <span class="token parameter variable">-c</span> ./conf/frps.toml 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>-c</code> \u53C2\u6570\u7528\u4E8E\u6307\u5B9A\u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84\u3002</li></ul></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ ./bin/frps <span class="token parameter variable">-c</span> ./conf/frps.toml 
<span class="token number">2023</span>/11/25 <span class="token number">10</span>:42:55 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>root.go:104<span class="token punctuation">]</span> frps uses config file: ./conf/frps.toml
<span class="token number">2023</span>/11/25 <span class="token number">10</span>:42:55 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>service.go:206<span class="token punctuation">]</span> frps tcp listen on <span class="token number">0.0</span>.0.0:7000
<span class="token number">2023</span>/11/25 <span class="token number">10</span>:42:55 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>root.go:113<span class="token punctuation">]</span> frps started successfully
<span class="token number">2023</span>/11/25 <span class="token number">10</span>:43:13 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>service.go:558<span class="token punctuation">]</span> <span class="token punctuation">[</span>7ac9081dcfd23eeb<span class="token punctuation">]</span> client login info: <span class="token function">ip</span> <span class="token punctuation">[</span><span class="token number">14.155</span>.89.68:56775<span class="token punctuation">]</span> version <span class="token punctuation">[</span><span class="token number">0.52</span>.3<span class="token punctuation">]</span> <span class="token function">hostname</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> os <span class="token punctuation">[</span>linux<span class="token punctuation">]</span> arch <span class="token punctuation">[</span>amd64<span class="token punctuation">]</span>
<span class="token number">2023</span>/11/25 <span class="token number">10</span>:43:13 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>tcp.go:82<span class="token punctuation">]</span> <span class="token punctuation">[</span>7ac9081dcfd23eeb<span class="token punctuation">]</span> <span class="token punctuation">[</span>test-tcp<span class="token punctuation">]</span> tcp proxy listen port <span class="token punctuation">[</span><span class="token number">6000</span><span class="token punctuation">]</span>
<span class="token number">2023</span>/11/25 <span class="token number">10</span>:43:13 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>control.go:394<span class="token punctuation">]</span> <span class="token punctuation">[</span>7ac9081dcfd23eeb<span class="token punctuation">]</span> new proxy <span class="token punctuation">[</span>test-tcp<span class="token punctuation">]</span> <span class="token builtin class-name">type</span> <span class="token punctuation">[</span>tcp<span class="token punctuation">]</span> success
<span class="token number">2023</span>/11/25 <span class="token number">10</span>:43:17 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>proxy.go:204<span class="token punctuation">]</span> <span class="token punctuation">[</span>7ac9081dcfd23eeb<span class="token punctuation">]</span> <span class="token punctuation">[</span>test-tcp<span class="token punctuation">]</span> get a user connection <span class="token punctuation">[</span><span class="token number">14.155</span>.89.68:56779<span class="token punctuation">]</span>
<span class="token number">2023</span>/11/25 <span class="token number">10</span>:43:19 <span class="token punctuation">[</span>I<span class="token punctuation">]</span> <span class="token punctuation">[</span>proxy.go:204<span class="token punctuation">]</span> <span class="token punctuation">[</span>7ac9081dcfd23eeb<span class="token punctuation">]</span> <span class="token punctuation">[</span>test-tcp<span class="token punctuation">]</span> get a user connection <span class="token punctuation">[</span><span class="token number">221.12</span>.131.95:29892<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><code>$ ./bin/frps -c ./conf/frps.toml</code></p><ul><li>\u8FD9\u662F\u542F\u52A8 <code>frps</code> \u7684\u547D\u4EE4\uFF0C\u5176\u4E2D <code>-c</code> \u53C2\u6570\u6307\u5B9A\u914D\u7F6E\u6587\u4EF6 <code>./conf/frps.toml</code>\u3002</li></ul></li><li><p><code>2023/11/25 10:42:55 [I] [root.go:104] frps uses config file: ./conf/frps.toml</code></p><ul><li>\u65E5\u5FD7\u8BB0\u5F55\u4E86 <code>frps</code> \u6B63\u5728\u4F7F\u7528\u6307\u5B9A\u7684\u914D\u7F6E\u6587\u4EF6\u3002</li></ul></li><li><p><code>2023/11/25 10:42:55 [I] [service.go:206] frps tcp listen on 0.0.0.0:7000</code></p><ul><li>\u670D\u52A1\u5668\u5F00\u59CB\u5728 TCP \u7AEF\u53E3 7000 \u4E0A\u76D1\u542C\uFF0C<code>0.0.0.0</code> \u8868\u793A\u76D1\u542C\u6240\u6709\u7F51\u7EDC\u63A5\u53E3\u3002</li></ul></li><li><p><code>2023/11/25 10:42:55 [I] [root.go:113] frps started successfully</code></p><ul><li>\u8868\u660E <code>frps</code> \u670D\u52A1\u5668\u5DF2\u6210\u529F\u542F\u52A8\u3002</li></ul></li><li><p><code>2023/11/25 10:43:13 [I] [service.go:558] [7ac9081dcfd23eeb] client login info: ip [14.155.89.68:56775] version [0.52.3] hostname [] os [linux] arch [amd64]</code></p><ul><li>\u4E00\u540D\u5BA2\u6237\u7AEF\u5DF2\u8FDE\u63A5\u5230\u670D\u52A1\u5668\u3002\u5BA2\u6237\u7AEF\u7684 IP \u5730\u5740\u662F <code>14.155.89.68</code>\uFF0C\u7AEF\u53E3\u53F7\u662F <code>56775</code>\u3002\u5BA2\u6237\u7AEF\u4F7F\u7528\u7684 <code>frp</code> \u7248\u672C\u662F <code>0.52.3</code>\uFF0C\u64CD\u4F5C\u7CFB\u7EDF\u662F Linux\uFF0C\u5904\u7406\u5668\u67B6\u6784\u662F amd64\u3002</li></ul></li><li><p><code>2023/11/25 10:43:13 [I] [tcp.go:82] [7ac9081dcfd23eeb] [test-tcp] tcp proxy listen port [6000]</code></p><ul><li>\u670D\u52A1\u5668\u4E3A\u540D\u4E3A <code>test-tcp</code> \u7684 TCP \u4EE3\u7406\u521B\u5EFA\u4E86\u76D1\u542C\u7AEF\u53E3 <code>6000</code>\u3002</li></ul></li><li><p><code>2023/11/25 10:43:13 [I] [control.go:394] [7ac9081dcfd23eeb] new proxy [test-tcp] type [tcp] success</code></p><ul><li>\u6210\u529F\u521B\u5EFA\u4E86\u65B0\u7684 TCP \u4EE3\u7406 <code>test-tcp</code>\u3002</li></ul></li><li><p><code>2023/11/25 10:43:17 [I] [proxy.go:204] [7ac9081dcfd23eeb] [test-tcp] get a user connection [14.155.89.68:56779]</code></p><ul><li><code>test-tcp</code> \u4EE3\u7406\u6536\u5230\u4E86\u6765\u81EA IP \u5730\u5740 <code>14.155.89.68</code>\uFF0C\u7AEF\u53E3 <code>56779</code> \u7684\u7528\u6237\u8FDE\u63A5\u3002</li></ul></li><li><p><code>2023/11/25 10:43:19 [I] [proxy.go:204] [7ac9081dcfd23eeb] [test-tcp] get a user connection [221.12.131.95:29892]</code></p><ul><li>\u53E6\u4E00\u4E2A\u7528\u6237\u8FDE\u63A5\u5230 <code>test-tcp</code> \u4EE3\u7406\uFF0CIP \u5730\u5740\u662F <code>221.12.131.95</code>\uFF0C\u7AEF\u53E3\u53F7\u662F <code>29892</code></li></ul></li><li><p><strong>\u670D\u52A1\u7AEF\u65E5\u5FD7\u89E3\u8BFB\uFF1A</strong></p><ul><li><code>frps tcp listen on 0.0.0.0:7000</code> \u8868\u793A\u670D\u52A1\u7AEF\u5F00\u59CB\u5728 TCP \u7AEF\u53E3 7000 \u4E0A\u76D1\u542C\u3002</li><li>\u5BA2\u6237\u7AEF\u8FDE\u63A5\u4FE1\u606F\u3001\u4EE3\u7406\u521B\u5EFA\u6210\u529F\u7B49\u65E5\u5FD7\u9879\u8868\u660E FRP \u670D\u52A1\u7AEF\u6B63\u5E38\u8FD0\u884C\u3002</li></ul></li><li><p><strong>\u5728\u5BA2\u6237\u7AEF\u8FD0\u884C FRP \u5BA2\u6237\u7AEF\uFF1A</strong></p><ul><li>\u5BA2\u6237\u7AEF\u914D\u7F6E\u540C\u6837\u9700\u8981\u6307\u5B9A\u914D\u7F6E\u6587\u4EF6\u3002</li><li>\u5BA2\u6237\u7AEF\u6210\u529F\u8FDE\u63A5\u540E\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u7684\u7AEF\u53E3\u548C\u5730\u5740\u8BBF\u95EE\u5185\u7F51\u8D44\u6E90\u3002</li></ul></li></ol><p>\u4E0B\u9762\u662F\u5728\u5BA2\u6237\u7AEF\uFF08\u5BF9\u5E94\u7684\u662F OpenIM Server \u7684\u5BF9\u5E94\u7684 GPU \u670D\u52A1\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ ./bin/frps <span class="token parameter variable">-c</span> ./conf/frps.toml 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="system-\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#system-\u90E8\u7F72" aria-hidden="true">#</a> System \u90E8\u7F72</h2><p>\u901A\u8FC7 Systemd \u670D\u52A1\u7BA1\u7406\uFF0C\u53EF\u4EE5\u5B9E\u73B0 FRP \u670D\u52A1\u7684\u81EA\u52A8\u542F\u52A8\u548C\u91CD\u542F\uFF0C\u4ECE\u800C\u89E3\u51B3\u4E86\u4F7F\u7528 <code>nohup</code> \u5728\u540E\u53F0\u8FD0\u884C\u65F6\u7535\u8111\u91CD\u542F\u5BFC\u81F4\u670D\u52A1\u4E2D\u65AD\u7684\u95EE\u9898\u3002</p><h3 id="\u670D\u52A1\u7AEF-server-\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u670D\u52A1\u7AEF-server-\u90E8\u7F72" aria-hidden="true">#</a> \u670D\u52A1\u7AEF Server \u90E8\u7F72</h3><ol><li><p><strong>\u91CD\u547D\u540D\u5E76\u79FB\u52A8 FRP \u6587\u4EF6\uFF1A</strong> \u5C06 FRP \u670D\u52A1\u7AEF\u7A0B\u5E8F\u548C\u914D\u7F6E\u6587\u4EF6\u91CD\u547D\u540D\u5E76\u79FB\u52A8\u5230\u7CFB\u7EDF\u76EE\u5F55\uFF0C\u4EE5\u4FBF\u4E8E\u7BA1\u7406\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">cp</span> ./bin/frps /usr/bin/frpservice
$ <span class="token function">sudo</span> <span class="token function">cp</span> ./conf/frps.toml /etc/frpservice.toml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>\u521B\u5EFA Systemd \u670D\u52A1\u6587\u4EF6\uFF1A</strong> \u4F7F\u7528\u6587\u672C\u7F16\u8F91\u5668\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u670D\u52A1\u6587\u4EF6 <code>frpservice.service</code>\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">vim</span> /lib/systemd/system/frpservice.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><strong>\u670D\u52A1\u6587\u4EF6\u5185\u5BB9\uFF1A</strong> \u5728\u670D\u52A1\u6587\u4EF6\u4E2D\u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">Unit</span><span class="token punctuation">]</span>
<span class="token key property">Description</span><span class="token punctuation">=</span>frpservice
<span class="token key property">After</span><span class="token punctuation">=</span>network<span class="token punctuation">.</span>target

<span class="token punctuation">[</span><span class="token table class-name">Service</span><span class="token punctuation">]</span>
<span class="token key property">Type</span><span class="token punctuation">=</span>simple
<span class="token key property">User</span><span class="token punctuation">=</span>nobody
<span class="token key property">Restart</span><span class="token punctuation">=</span>on-failure
<span class="token key property">RestartSec</span><span class="token punctuation">=</span>5s
<span class="token key property">ExecStart</span><span class="token punctuation">=</span>/usr/bin/frpservice -c /etc/frpservice<span class="token punctuation">.</span>toml
<span class="token key property">ExecReload</span><span class="token punctuation">=</span>/usr/bin/frpservice reload -c /etc/frpservice<span class="token punctuation">.</span>toml

<span class="token punctuation">[</span><span class="token table class-name">Install</span><span class="token punctuation">]</span>
<span class="token key property">WantedBy</span><span class="token punctuation">=</span>multi-user<span class="token punctuation">.</span>target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>\u542F\u7528\u5E76\u542F\u52A8\u670D\u52A1\uFF1A</strong> \u4F7F\u670D\u52A1\u6587\u4EF6\u5177\u6709\u6267\u884C\u6743\u9650\uFF0C\u542F\u7528\u5E76\u542F\u52A8 FRP \u670D\u52A1\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">777</span> /lib/systemd/system/frpservice.service
$ systemctl <span class="token builtin class-name">enable</span> frpservice.service
$ systemctl start frpservice.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="frp-\u7684-web-\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#frp-\u7684-web-\u8BBF\u95EE" aria-hidden="true">#</a> FRP \u7684 Web \u8BBF\u95EE</h3><p>FRP \u652F\u6301\u901A\u8FC7 Web \u8BBF\u95EE\u5185\u7F51\u8D44\u6E90\uFF0C\u53EF\u4EE5\u4F7F\u7528\u683C\u5F0F <code>http://\u57DF\u540D\u6216IP:remote_port</code> \u8BBF\u95EE\u3002</p><h3 id="\u5BA2\u6237\u7AEF\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5BA2\u6237\u7AEF\u914D\u7F6E" aria-hidden="true">#</a> \u5BA2\u6237\u7AEF\u914D\u7F6E</h3><ol><li><p>\u5728\u5BA2\u6237\u7AEF\u914D\u7F6E FRP\uFF1A</p><p>\u914D\u7F6E\u6587\u4EF6\u4E2D\u9700\u6307\u5B9A\u672C\u5730 Web \u670D\u52A1\u7684\u7AEF\u53E3\uFF08\u5982 80\uFF09\u548C\u8FDC\u7A0B\u8BBF\u95EE\u7AEF\u53E3\uFF08\u5982 8080\uFF09\u3002</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">web</span><span class="token punctuation">]</span>
<span class="token key property">type</span> <span class="token punctuation">=</span> tcp
<span class="token key property">local_ip</span> <span class="token punctuation">=</span> <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span>
<span class="token key property">local_port</span> <span class="token punctuation">=</span> <span class="token number">80</span>
<span class="token key property">remote_port</span> <span class="token punctuation">=</span> <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="\u5BA2\u6237\u7AEF-systemd-\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u5BA2\u6237\u7AEF-systemd-\u90E8\u7F72" aria-hidden="true">#</a> \u5BA2\u6237\u7AEF Systemd \u90E8\u7F72</h3><p>\u4E3A\u5BA2\u6237\u7AEF\u7684 FRP \u4E5F\u521B\u5EFA\u4E00\u4E2A Systemd \u670D\u52A1\uFF0C\u4EE5\u4FBF\u5B9E\u73B0\u81EA\u52A8\u542F\u52A8\u548C\u91CD\u542F\u3002</p><ol><li><p><strong>\u91CD\u547D\u540D\u5E76\u79FB\u52A8 FRP \u5BA2\u6237\u7AEF\u6587\u4EF6\uFF1A</strong> \u5C06\u5BA2\u6237\u7AEF\u7A0B\u5E8F\u548C\u914D\u7F6E\u6587\u4EF6\u79FB\u52A8\u5230\u7CFB\u7EDF\u76EE\u5F55\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">cp</span> ./bin/frpc /usr/bin/frpcservice
$ <span class="token function">sudo</span> <span class="token function">cp</span> ./conf/frpc.ini /etc/frpcservice.ini
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>\u521B\u5EFA Systemd \u670D\u52A1\u6587\u4EF6\uFF1A</strong> \u7F16\u8F91\u5BA2\u6237\u7AEF\u7684\u670D\u52A1\u6587\u4EF6 <code>frpcservice.service</code>\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">vim</span> /lib/systemd/system/frpcservice.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><strong>\u670D\u52A1\u6587\u4EF6\u5185\u5BB9\uFF1A</strong> \u7C7B\u4F3C\u670D\u52A1\u7AEF\uFF0C\u6DFB\u52A0\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-toml ext-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">Unit</span><span class="token punctuation">]</span>
<span class="token key property">Description</span><span class="token punctuation">=</span>frpcservice
<span class="token key property">After</span><span class="token punctuation">=</span>network<span class="token punctuation">.</span>target

<span class="token punctuation">[</span><span class="token table class-name">Service</span><span class="token punctuation">]</span>
<span class="token key property">Type</span><span class="token punctuation">=</span>simple
<span class="token key property">User</span><span class="token punctuation">=</span>nobody
<span class="token key property">Restart</span><span class="token punctuation">=</span>on-failure
<span class="token key property">RestartSec</span><span class="token punctuation">=</span>5s
<span class="token key property">ExecStart</span><span class="token punctuation">=</span>/usr/bin/frpcservice -c /etc/frpcservice<span class="token punctuation">.</span>ini

<span class="token punctuation">[</span><span class="token table class-name">Install</span><span class="token punctuation">]</span>
<span class="token key property">WantedBy</span><span class="token punctuation">=</span>multi-user<span class="token punctuation">.</span>target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>\u542F\u7528\u5E76\u542F\u52A8\u670D\u52A1\uFF1A</strong> \u540C\u670D\u52A1\u7AEF\u64CD\u4F5C\uFF0C\u8D4B\u4E88\u6267\u884C\u6743\u9650\uFF0C\u542F\u7528\u5E76\u542F\u52A8\u670D\u52A1\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">777</span> /lib/systemd/system/frpcservice.service
$ systemctl <span class="token builtin class-name">enable</span> frpcservice.service
$ systemctl start frpcservice.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="\u67E5\u770B\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u65E5\u5FD7" aria-hidden="true">#</a> \u67E5\u770B\u65E5\u5FD7</h2><h3 id="\u76F4\u63A5\u67E5\u770B\u63A7\u5236\u53F0\u8F93\u51FA" tabindex="-1"><a class="header-anchor" href="#\u76F4\u63A5\u67E5\u770B\u63A7\u5236\u53F0\u8F93\u51FA" aria-hidden="true">#</a> \u76F4\u63A5\u67E5\u770B\u63A7\u5236\u53F0\u8F93\u51FA</h3><p>\u5982\u679C\u60A8\u76F4\u63A5\u5728\u63A7\u5236\u53F0\u8FD0\u884C FRP\uFF0C\u65E5\u5FD7\u5C06\u76F4\u63A5\u8F93\u51FA\u5230\u63A7\u5236\u53F0\u3002\u8FD9\u9002\u7528\u4E8E\u5728\u6D4B\u8BD5\u6216\u8C03\u8BD5\u65F6\u8FD0\u884C FRP\u3002</p><h3 id="\u4F7F\u7528\u65E5\u5FD7\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u65E5\u5FD7\u6587\u4EF6" aria-hidden="true">#</a> \u4F7F\u7528\u65E5\u5FD7\u6587\u4EF6</h3><p>FRP \u652F\u6301\u5C06\u65E5\u5FD7\u8F93\u51FA\u5230\u6587\u4EF6\u3002\u60A8\u53EF\u4EE5\u5728 FRP \u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u8BBE\u7F6E\u65E5\u5FD7\u6587\u4EF6\u7684\u8DEF\u5F84\u3002\u4F8B\u5982\uFF0C\u5BF9\u4E8E\u670D\u52A1\u7AEF\uFF08<code>frps</code>\uFF09\uFF0C\u53EF\u4EE5\u5728 <code>frps.ini</code> \u6587\u4EF6\u4E2D\u8BBE\u7F6E\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>common<span class="token punctuation">]</span>
log_file <span class="token operator">=</span> /var/log/frps.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E8E\u5BA2\u6237\u7AEF\uFF08<code>frpc</code>\uFF09\uFF0C\u5728 <code>frpc.ini</code> \u6587\u4EF6\u4E2D\u8BBE\u7F6E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>log_file = /var/log/frpc.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BBE\u7F6E\u540E\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528\u4EFB\u4F55\u6587\u672C\u7F16\u8F91\u5668\u6216\u547D\u4EE4\u884C\u5DE5\u5177\uFF08\u5982 <code>cat</code>, <code>less</code>, <code>tail</code>\uFF09\u67E5\u770B\u8FD9\u4E9B\u65E5\u5FD7\u6587\u4EF6\u3002\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tail</span> <span class="token parameter variable">-f</span> /var/log/frps.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u4F7F\u7528-systemd-\u670D\u52A1\u7684\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-systemd-\u670D\u52A1\u7684\u65E5\u5FD7" aria-hidden="true">#</a> \u4F7F\u7528 Systemd \u670D\u52A1\u7684\u65E5\u5FD7</h3><p>\u5982\u679C\u60A8\u901A\u8FC7 Systemd \u670D\u52A1\u8FD0\u884C FRP\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>journalctl</code> \u547D\u4EE4\u67E5\u770B\u65E5\u5FD7\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u60A8\u7684\u670D\u52A1\u540D\u4E3A <code>frpservice</code>\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>journalctl -u frpservice
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E3A\u4E86\u5B9E\u65F6\u8DDF\u8E2A\u65E5\u5FD7\uFF0C\u53EF\u4EE5\u6DFB\u52A0 <code>-f</code> \u53C2\u6570\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>journalctl <span class="token parameter variable">-fu</span> frpservice
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u65E5\u5FD7\u7EA7\u522B" tabindex="-1"><a class="header-anchor" href="#\u65E5\u5FD7\u7EA7\u522B" aria-hidden="true">#</a> \u65E5\u5FD7\u7EA7\u522B</h3><p>\u786E\u4FDD\u5728 FRP \u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u8BBE\u7F6E\u4E86\u9002\u5F53\u7684\u65E5\u5FD7\u7EA7\u522B\u3002\u65E5\u5FD7\u7EA7\u522B\u51B3\u5B9A\u4E86\u8BB0\u5F55\u54EA\u4E9B\u7C7B\u578B\u7684\u4FE1\u606F\uFF0C\u4F8B\u5982 <code>info</code>, <code>warn</code>, <code>error</code> \u7B49\u3002</p><h3 id="\u65E5\u5FD7\u5207\u5272\u548C\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#\u65E5\u5FD7\u5207\u5272\u548C\u7BA1\u7406" aria-hidden="true">#</a> \u65E5\u5FD7\u5207\u5272\u548C\u7BA1\u7406</h3><p>\u5BF9\u4E8E\u957F\u671F\u8FD0\u884C\u7684\u670D\u52A1\uFF0C\u8003\u8651\u4F7F\u7528\u65E5\u5FD7\u5207\u5272\u5DE5\u5177\uFF08\u5982 <code>logrotate</code>\uFF09\u6765\u7BA1\u7406\u65E5\u5FD7\u6587\u4EF6\u7684\u5927\u5C0F\u548C\u6570\u91CF\uFF0C\u907F\u514D\u65E5\u5FD7\u6587\u4EF6\u8FC7\u5927\u3002</p>`,49);function F(I,S){const a=t("ExternalLinkIcon");return p(),c("div",null,[r,d,u,v,m,n("ol",null,[k,n("li",null,[b,h,n("a",f,[g,i(a)]),y]),P,x,R]),_])}const T=e(o,[["render",F],["__file","158.html.vue"]]);export{T as default};
