import{_ as s,r as i,o as t,c as d,a,b as o,d as r,e}from"./app.9f14a191.js";const c={},h=r(`<h1 id="_121-docker-compose-\u5E38\u89C1\u95EE\u9898\u53CA\u89E3\u51B3\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_121-docker-compose-\u5E38\u89C1\u95EE\u9898\u53CA\u89E3\u51B3\u65B9\u6CD5" aria-hidden="true">#</a> 121: Docker Compose \u5E38\u89C1\u95EE\u9898\u53CA\u89E3\u51B3\u65B9\u6CD5</h1><p>[toc]</p><h2 id="_1-\u914D\u7F6E\u6587\u4EF6\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#_1-\u914D\u7F6E\u6587\u4EF6\u7BA1\u7406" aria-hidden="true">#</a> 1. \u914D\u7F6E\u6587\u4EF6\u7BA1\u7406</h2><p>\u5728\u4F7F\u7528 OpenIM \u7684\u65B0\u7248\u672C\uFF08version &gt;= 3.2.0\uFF09\u65F6\uFF0C\u5BF9\u914D\u7F6E\u6587\u4EF6\u7684\u7BA1\u7406\u53D8\u5F97\u5C24\u4E3A\u91CD\u8981\u3002\u914D\u7F6E\u6587\u4EF6\u4E0D\u4EC5\u4E3A\u5E94\u7528\u7A0B\u5E8F\u63D0\u4F9B\u4E86\u5FC5\u8981\u7684\u8FD0\u884C\u53C2\u6570\uFF0C\u8FD8\u786E\u4FDD\u4E86\u7CFB\u7EDF\u8FD0\u884C\u7684\u7A33\u5B9A\u6027\u548C\u53EF\u9760\u6027\u3002</p><h3 id="_1-1-\u751F\u6210\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-1-\u751F\u6210\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> 1.1 \u751F\u6210\u914D\u7F6E\u6587\u4EF6</h3><p>\u4E3A\u4E86\u751F\u6210\u914D\u7F6E\u6587\u4EF6\uFF0COpenIM \u63D0\u4F9B\u4E86\u4E24\u79CD\u65B9\u5F0F\u3002\u4E00\u79CD\u662F\u901A\u8FC7 <code>Makefile</code>\uFF0C\u53E6\u4E00\u79CD\u662F\u76F4\u63A5\u6267\u884C\u521D\u59CB\u5316\u811A\u672C\u3002</p><h4 id="\u4F7F\u7528-makefile" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-makefile" aria-hidden="true">#</a> \u4F7F\u7528 Makefile</h4><p>\u5BF9\u4E8E\u719F\u6089 Makefile \u7684\u5F00\u53D1\u8005\uFF0C\u8FD9\u662F\u4E00\u4E2A\u5FEB\u6377\u4E14\u53CB\u597D\u7684\u65B9\u5F0F\u3002\u53EA\u9700\u8981\u5728\u9879\u76EE\u6839\u76EE\u5F55\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">make</span> init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u4F1A\u89E6\u53D1 <code>Makefile</code> \u4E2D\u7684\u76F8\u5173\u547D\u4EE4\uFF0C\u6700\u7EC8\u751F\u6210\u6240\u9700\u7684\u914D\u7F6E\u6587\u4EF6\u3002</p><h4 id="\u4F7F\u7528\u521D\u59CB\u5316\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u521D\u59CB\u5316\u811A\u672C" aria-hidden="true">#</a> \u4F7F\u7528\u521D\u59CB\u5316\u811A\u672C</h4><p>\u5BF9\u4E8E\u4E0D\u60F3\u4F7F\u7528 <code>Makefile</code> \u7684\u7528\u6237\uFF0C\u6216\u8005\u90A3\u4E9B\u5BF9\u5176\u4E0D\u592A\u719F\u6089\u7684\u4EBA\uFF0C\u6211\u4EEC\u63D0\u4F9B\u4E86\u4E00\u4E2A\u66F4\u76F4\u63A5\u7684\u65B9\u5F0F\u6765\u751F\u6210\u914D\u7F6E\u6587\u4EF6\u3002\u53EA\u9700\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./scripts/init-config.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u65E0\u8BBA\u9009\u62E9\u54EA\u79CD\u65B9\u5F0F\uFF0C\u90FD\u4F1A\u751F\u6210\u76F8\u540C\u7684\u914D\u7F6E\u6587\u4EF6\u3002\u56E0\u6B64\uFF0C\u53EF\u4EE5\u6839\u636E\u4E2A\u4EBA\u559C\u597D\u548C\u73AF\u5883\u6765\u9009\u62E9\u6700\u9002\u5408\u81EA\u5DF1\u7684\u65B9\u6CD5\u3002</p><h3 id="_1-2-\u9A8C\u8BC1\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-2-\u9A8C\u8BC1\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> 1.2 \u9A8C\u8BC1\u914D\u7F6E\u6587\u4EF6</h3><p>\u751F\u6210\u914D\u7F6E\u6587\u4EF6\u540E\uFF0C\u6700\u597D\u5BF9\u5176\u8FDB\u884C\u9A8C\u8BC1\uFF0C\u786E\u4FDD\u5B83\u80FD\u591F\u6EE1\u8DB3\u5E94\u7528\u7A0B\u5E8F\u7684\u8981\u6C42\u3002\u9A8C\u8BC1\u7684\u6807\u5FD7\u5982\u4E0B\uFF1A</p><p>[\u65E5\u5FD7\u8F93\u51FA\u5185\u5BB9...]</p><p>\u8FD9\u4E9B\u65E5\u5FD7\u8F93\u51FA\u786E\u4FDD\u4E86\u914D\u7F6E\u6587\u4EF6\u5DF2\u6B63\u786E\u751F\u6210\u5E76\u53EF\u4EE5\u88AB OpenIM \u670D\u52A1\u6B63\u786E\u89E3\u6790\u3002</p><h3 id="_1-3-\u914D\u7F6E\u6587\u4EF6\u7684\u4FEE\u6539\u4E0E\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#_1-3-\u914D\u7F6E\u6587\u4EF6\u7684\u4FEE\u6539\u4E0E\u7BA1\u7406" aria-hidden="true">#</a> 1.3 \u914D\u7F6E\u6587\u4EF6\u7684\u4FEE\u6539\u4E0E\u7BA1\u7406</h3><p>\u914D\u7F6E\u6587\u4EF6\u901A\u5E38\u4E0D\u9700\u8981\u9891\u7E41\u4FEE\u6539\u3002\u4F46\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u4F8B\u5982\u5F53\u66F4\u6539\u6570\u636E\u5E93\u8FDE\u63A5\u53C2\u6570\u6216\u4FEE\u6539\u5176\u4ED6\u5173\u952E\u53C2\u6570\u65F6\uFF0C\u53EF\u80FD\u9700\u8981\u8C03\u6574\u5B83\u3002</p><p>\u5EFA\u8BAE\u901A\u8FC7\u73AF\u5883\u53D8\u91CF\u7684\u65B9\u5F0F\u53BB\u914D\u7F6E\u548C\u7BA1\u7406 ~</p><p>\u5EFA\u8BAE\u5728\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\u4E4B\u524D\uFF0C\u5148\u5907\u4EFD\u539F\u59CB\u6587\u4EF6\u3002\u8FD9\u6837\uFF0C\u5982\u679C\u51FA\u73B0\u95EE\u9898\uFF0C\u53EF\u4EE5\u5F88\u5BB9\u6613\u5730\u56DE\u6EDA\u5230\u539F\u59CB\u72B6\u6001\u3002</p><p>\u6B64\u5916\uFF0C\u5BF9\u4E8E\u5728\u56E2\u961F\u4E2D\u4F7F\u7528 OpenIM \u7684\u60C5\u51B5\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u7248\u672C\u63A7\u5236\u7CFB\u7EDF\uFF08\u5982 Git\uFF09\u6765\u7BA1\u7406\u914D\u7F6E\u6587\u4EF6\u3002\u8FD9\u53EF\u4EE5\u786E\u4FDD\u56E2\u961F\u6210\u5458\u90FD\u4F7F\u7528\u76F8\u540C\u7684\u914D\u7F6E\uFF0C\u5E76\u80FD\u591F\u8DDF\u8E2A\u4EFB\u4F55\u4FEE\u6539\u3002</p><h2 id="_2-docker-compose-\u4E0D\u652F\u6301-gateway" tabindex="-1"><a class="header-anchor" href="#_2-docker-compose-\u4E0D\u652F\u6301-gateway" aria-hidden="true">#</a> 2. Docker Compose \u4E0D\u652F\u6301 gateway</h2><p>Docker Compose \u662F\u4E00\u4E2A\u5DE5\u5177\uFF0C\u7528\u4E8E\u5B9A\u4E49\u548C\u8FD0\u884C\u591A\u5BB9\u5668\u7684 Docker \u5E94\u7528\u7A0B\u5E8F\u3002\u6709\u65F6\uFF0C\u4F60\u53EF\u80FD\u4F1A\u9047\u5230\u4E0D\u652F\u6301\u7279\u5B9A\u529F\u80FD\uFF0C\u5982 <code>gateway</code> \u7684\u95EE\u9898\u3002\u4E0B\u9762\u662F\u8BE6\u7EC6\u7684\u6307\u5357\uFF0C\u5305\u62EC\u95EE\u9898\u3001\u539F\u56E0\u3001\u89E3\u51B3\u65B9\u6CD5\u548C\u8C03\u8BD5\u6280\u5DE7\u3002</p><h3 id="_2-1-\u95EE\u9898\u63CF\u8FF0" tabindex="-1"><a class="header-anchor" href="#_2-1-\u95EE\u9898\u63CF\u8FF0" aria-hidden="true">#</a> 2.1 \u95EE\u9898\u63CF\u8FF0</h3><p>\u5F53\u4F7F\u7528 Docker Compose \u6587\u4EF6\u5B9A\u4E49\u7F51\u7EDC\u65F6\uFF0C\u5C1D\u8BD5\u8BBE\u7F6E gateway \u53C2\u6570\u53EF\u80FD\u4F1A\u51FA\u73B0\u4EE5\u4E0B\u9519\u8BEF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ERROR: The Compose file &#39;./docker-compose.yaml&#39; is invalid because:
networks.openim-server.ipam.config value Additional properties are not allowed (&#39;gateway&#39; was unexpected)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u610F\u5473\u7740 Docker Compose \u4E0D\u652F\u6301\u4F60\u8BD5\u56FE\u5B9A\u4E49\u7684 <code>gateway</code> \u53C2\u6570\u3002</p><h3 id="_2-2-\u539F\u56E0" tabindex="-1"><a class="header-anchor" href="#_2-2-\u539F\u56E0" aria-hidden="true">#</a> 2.2 \u539F\u56E0</h3><p>Docker Compose \u7684\u67D0\u4E9B\u7248\u672C\u53EF\u80FD\u4E0D\u652F\u6301\u7279\u5B9A\u7684\u7F51\u7EDC\u5C5E\u6027\uFF0C\u5982 <code>gateway</code>\u3002\u8FD9\u53EF\u80FD\u662F\u7531\u4E8E Docker Compose \u7684\u7248\u672C\u8FC7\u65E7\u6216\u914D\u7F6E\u6587\u4EF6\u8BED\u6CD5\u6709\u8BEF\u3002</p><h3 id="_2-3-\u89E3\u51B3\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2-3-\u89E3\u51B3\u65B9\u6CD5" aria-hidden="true">#</a> 2.3 \u89E3\u51B3\u65B9\u6CD5</h3><h4 id="\u68C0\u67E5\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#\u68C0\u67E5\u7248\u672C" aria-hidden="true">#</a> \u68C0\u67E5\u7248\u672C</h4><p>\u9996\u5148\uFF0C\u786E\u4FDD\u4F60\u7684 Docker Compose \u7248\u672C\u662F\u6700\u65B0\u7684\u3002\u8981\u67E5\u770B\u7248\u672C\uFF0C\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker-compose version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u4F60\u7684\u7248\u672C\u8FC7\u65E7\uFF0C\u5EFA\u8BAE\u66F4\u65B0\u5230\u6700\u65B0\u7248\u672C\u3002</p><h4 id="\u6821\u9A8C\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u6821\u9A8C\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u6821\u9A8C\u914D\u7F6E\u6587\u4EF6</h4><p>\u9A8C\u8BC1 <code>docker-compose.yaml</code> \u6587\u4EF6\u7684\u8BED\u6CD5\u662F\u5426\u6B63\u786E\u3002\u786E\u4FDD\u7F29\u8FDB\u3001\u7A7A\u683C\u548C\u683C\u5F0F\u90FD\u662F\u6B63\u786E\u7684\u3002\u53EF\u4EE5\u4F7F\u7528\u5728\u7EBF YAML \u6821\u9A8C\u5DE5\u5177\u8FDB\u884C\u68C0\u67E5\u3002</p><h4 id="\u4F7F\u7528\u5176\u4ED6\u7F51\u7EDC\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u5176\u4ED6\u7F51\u7EDC\u914D\u7F6E" aria-hidden="true">#</a> \u4F7F\u7528\u5176\u4ED6\u7F51\u7EDC\u914D\u7F6E</h4><p>\u5982\u679C\u4E0D\u9700\u8981\u7279\u5B9A\u7684 <code>gateway</code> \u8BBE\u7F6E\uFF0C\u53EF\u4EE5\u8003\u8651\u5220\u9664\u6216\u66F4\u6539\u5B83\u3002\u53E6\u5916\uFF0C\u5982\u679C\u4F60\u53EA\u662F\u60F3\u8981\u4E3A\u5BB9\u5668\u5B9A\u4E49\u4E00\u4E2A\u9759\u6001 IP\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>ipv4_address</code> \u5C5E\u6027\u3002</p><h3 id="_2-4-\u8C03\u8BD5\u4E0E\u5E2E\u52A9" tabindex="-1"><a class="header-anchor" href="#_2-4-\u8C03\u8BD5\u4E0E\u5E2E\u52A9" aria-hidden="true">#</a> 2.4 \u8C03\u8BD5\u4E0E\u5E2E\u52A9</h3><p>\u5982\u679C\u4E0A\u8FF0\u65B9\u6CD5\u4ECD\u4E0D\u80FD\u89E3\u51B3\u95EE\u9898\uFF0C\u4EE5\u4E0B\u662F\u4E00\u4E9B\u8C03\u8BD5\u6280\u5DE7\u548C\u5E2E\u52A9\u6307\u5357\uFF1A</p><h4 id="\u67E5\u770B-docker-\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B-docker-\u6587\u6863" aria-hidden="true">#</a> \u67E5\u770B Docker \u6587\u6863</h4>`,43),l=e("Docker \u5B98\u65B9\u6587\u6863\u662F\u4E00\u4E2A\u5B9D\u8D35\u7684\u8D44\u6E90\u3002\u786E\u4FDD\u4F60\u5DF2\u7ECF\u9605\u8BFB\u4E86\u5173\u4E8E "),u={href:"https://docs.docker.com/compose/compose-file/",target:"_blank",rel:"noopener noreferrer"},p=e("Docker Compose \u6587\u4EF6\u7684\u5B98\u65B9\u6587\u6863"),g=e("\u3002"),m=r(`<h4 id="\u4F7F\u7528\u66F4\u8BE6\u7EC6\u7684\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u66F4\u8BE6\u7EC6\u7684\u65E5\u5FD7" aria-hidden="true">#</a> \u4F7F\u7528\u66F4\u8BE6\u7EC6\u7684\u65E5\u5FD7</h4><p>\u8FD0\u884C <code>docker-compose</code> \u65F6\u4F7F\u7528 <code>-v</code> \u53C2\u6570\u53EF\u4EE5\u83B7\u5F97\u66F4\u8BE6\u7EC6\u7684\u65E5\u5FD7\u8F93\u51FA\uFF0C\u8FD9\u53EF\u80FD\u6709\u52A9\u4E8E\u8BC6\u522B\u95EE\u9898\u7684\u6839\u6E90\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker-compose -v up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u8BBF\u95EE\u793E\u533A\u548C\u8BBA\u575B" tabindex="-1"><a class="header-anchor" href="#\u8BBF\u95EE\u793E\u533A\u548C\u8BBA\u575B" aria-hidden="true">#</a> \u8BBF\u95EE\u793E\u533A\u548C\u8BBA\u575B</h4>`,4),f=e("Docker \u6709\u4E00\u4E2A\u975E\u5E38\u6D3B\u8DC3\u7684\u793E\u533A\u3002\u5982\u679C\u4F60\u9047\u5230\u95EE\u9898\uFF0C\u53EF\u4EE5\u8003\u8651\u5728 "),k={href:"https://forums.docker.com/",target:"_blank",rel:"noopener noreferrer"},b=e("Docker \u8BBA\u575B"),v=e(" \u53D1\u5E03\u95EE\u9898\u6216\u641C\u7D22\u5176\u4ED6\u7528\u6237\u662F\u5426\u6709\u76F8\u540C\u7684\u95EE\u9898\u3002"),y=r(`<h2 id="_3-mysql-\u8FDE\u63A5\u5931\u8D25" tabindex="-1"><a class="header-anchor" href="#_3-mysql-\u8FDE\u63A5\u5931\u8D25" aria-hidden="true">#</a> 3. MySQL \u8FDE\u63A5\u5931\u8D25</h2><p>\u5728\u4F7F\u7528 Docker \u8FD0\u884C\u7684\u5E94\u7528\u7A0B\u5E8F\u4E2D\uFF0CMySQL \u8FDE\u63A5\u5931\u8D25\u662F\u4E00\u4E2A\u5E38\u89C1\u7684\u95EE\u9898\u3002\u8BE5\u95EE\u9898\u53EF\u80FD\u7531\u591A\u79CD\u539F\u56E0\u5F15\u8D77\uFF0C\u4EE5\u4E0B\u662F\u4E00\u4EFD\u5168\u9762\u7684\u6307\u5357\uFF0C\u65E8\u5728\u5E2E\u52A9\u4F60\u89E3\u51B3 MySQL \u8FDE\u63A5\u95EE\u9898\u3002</p><h3 id="_3-1-\u95EE\u9898\u63CF\u8FF0" tabindex="-1"><a class="header-anchor" href="#_3-1-\u95EE\u9898\u63CF\u8FF0" aria-hidden="true">#</a> 3.1 \u95EE\u9898\u63CF\u8FF0</h3><p>\u5F53\u4F60\u7684\u5E94\u7528\u7A0B\u5E8F\u6216\u670D\u52A1\u5C1D\u8BD5\u8FDE\u63A5\u5230 MySQL \u5BB9\u5668\u65F6\uFF0C\u53EF\u80FD\u4F1A\u9047\u5230\u4EE5\u4E0B\u9519\u8BEF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[error] failed to initialize database, got error dial tcp 172.28.0.2:13306: connect: connection refused
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u610F\u5473\u7740\u4F60\u7684\u5E94\u7528\u7A0B\u5E8F\u65E0\u6CD5\u5EFA\u7ACB\u5230 MySQL \u7684\u8FDE\u63A5\u3002</p><h3 id="_3-2-\u5E38\u89C1\u539F\u56E0\u4E0E\u89E3\u51B3\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5E38\u89C1\u539F\u56E0\u4E0E\u89E3\u51B3\u65B9\u6848" aria-hidden="true">#</a> 3.2 \u5E38\u89C1\u539F\u56E0\u4E0E\u89E3\u51B3\u65B9\u6848</h3><h4 id="mysql-\u5BB9\u5668\u672A\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#mysql-\u5BB9\u5668\u672A\u542F\u52A8" aria-hidden="true">#</a> MySQL \u5BB9\u5668\u672A\u542F\u52A8</h4><p><strong>\u68C0\u67E5\u65B9\u6CD5:</strong> \u4F7F\u7528 <code>docker ps</code> \u547D\u4EE4\u67E5\u770B\u6240\u6709\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6CD5:</strong> \u5982\u679C\u4F60\u6CA1\u6709\u770B\u5230 MySQL \u5BB9\u5668\uFF0C\u8BF7\u786E\u4FDD\u5B83\u5DF2\u7ECF\u542F\u52A8\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker-compose up -d mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u9519\u8BEF\u7684-mysql-\u5730\u5740\u6216\u7AEF\u53E3" tabindex="-1"><a class="header-anchor" href="#\u9519\u8BEF\u7684-mysql-\u5730\u5740\u6216\u7AEF\u53E3" aria-hidden="true">#</a> \u9519\u8BEF\u7684 MySQL \u5730\u5740\u6216\u7AEF\u53E3</h4><p><strong>\u68C0\u67E5\u65B9\u6CD5:</strong> \u68C0\u67E5\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u786E\u4FDD MySQL \u7684\u5730\u5740\u548C\u7AEF\u53E3\u8BBE\u7F6E\u6B63\u786E\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6CD5:</strong> \u5982\u679C\u4F7F\u7528\u4E86\u9ED8\u8BA4\u7684 Docker Compose \u8BBE\u7F6E\uFF0C\u5730\u5740\u5E94\u4E3A <code>mysql</code> (\u5BB9\u5668\u540D) \u5E76\u4E14\u9ED8\u8BA4\u7AEF\u53E3\u662F <code>3306</code>\u3002</p><h4 id="mysql-\u7528\u6237\u6743\u9650\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#mysql-\u7528\u6237\u6743\u9650\u95EE\u9898" aria-hidden="true">#</a> MySQL \u7528\u6237\u6743\u9650\u95EE\u9898</h4><p><strong>\u68C0\u67E5\u65B9\u6CD5:</strong> \u767B\u5F55 MySQL \u5E76\u68C0\u67E5\u7528\u6237\u6743\u9650\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6CD5:</strong> \u786E\u4FDD\u8FDE\u63A5\u7684 MySQL \u7528\u6237\u5177\u6709\u8DB3\u591F\u7684\u6743\u9650\u3002\u4F60\u53EF\u4EE5\u8003\u8651\u4E3A\u5E94\u7528\u7A0B\u5E8F\u521B\u5EFA\u4E00\u4E2A\u4E13\u7528\u7528\u6237\u5E76\u6388\u4E88\u5FC5\u8981\u7684\u6743\u9650\u3002</p><h4 id="mysql-\u7684-bind-address" tabindex="-1"><a class="header-anchor" href="#mysql-\u7684-bind-address" aria-hidden="true">#</a> MySQL \u7684 <code>bind-address</code></h4><p><strong>\u68C0\u67E5\u65B9\u6CD5:</strong> \u5982\u679C MySQL \u4EC5\u7ED1\u5B9A\u5230 <code>127.0.0.1</code>\uFF0C\u5219\u53EA\u80FD\u4ECE\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE\u5B83\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6CD5:</strong> \u66F4\u6539 MySQL \u7684 <code>bind-address</code> \u5230 <code>0.0.0.0</code> \u4EE5\u5141\u8BB8\u5916\u90E8\u8FDE\u63A5\u3002</p><h4 id="\u7F51\u7EDC\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u7F51\u7EDC\u95EE\u9898" aria-hidden="true">#</a> \u7F51\u7EDC\u95EE\u9898</h4><p><strong>\u68C0\u67E5\u65B9\u6CD5:</strong> \u4F7F\u7528 <code>docker network inspect</code> \u68C0\u67E5\u5BB9\u5668\u7684\u7F51\u7EDC\u8BBE\u7F6E\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6CD5:</strong> \u786E\u4FDD\u5E94\u7528\u7A0B\u5E8F\u548C MySQL \u5BB9\u5668\u5728\u540C\u4E00\u7F51\u7EDC\u4E0A\u3002</p><h3 id="_3-3-\u8C03\u8BD5\u65B9\u6CD5\u4E0E\u5E2E\u52A9" tabindex="-1"><a class="header-anchor" href="#_3-3-\u8C03\u8BD5\u65B9\u6CD5\u4E0E\u5E2E\u52A9" aria-hidden="true">#</a> 3.3 \u8C03\u8BD5\u65B9\u6CD5\u4E0E\u5E2E\u52A9</h3><h4 id="\u67E5\u770B-mysql-\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B-mysql-\u65E5\u5FD7" aria-hidden="true">#</a> \u67E5\u770B MySQL \u65E5\u5FD7</h4><p>\u67E5\u770B MySQL \u5BB9\u5668\u7684\u65E5\u5FD7\u53EF\u80FD\u4F1A\u63D0\u4F9B\u6709\u5173\u8FDE\u63A5\u5931\u8D25\u7684\u66F4\u591A\u4FE1\u606F\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker logs &lt;mysql_container_name&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u4F7F\u7528-mysql-\u5BA2\u6237\u7AEF\u8FDB\u884C\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-mysql-\u5BA2\u6237\u7AEF\u8FDB\u884C\u6D4B\u8BD5" aria-hidden="true">#</a> \u4F7F\u7528 MySQL \u5BA2\u6237\u7AEF\u8FDB\u884C\u6D4B\u8BD5</h4><p>\u4F7F\u7528 MySQL \u5BA2\u6237\u7AEF\u76F4\u63A5\u8FDE\u63A5\u5230\u6570\u636E\u5E93\u53EF\u4EE5\u5E2E\u52A9\u5B9A\u4F4D\u95EE\u9898\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mysql -h &lt;mysql_container_ip&gt; -P 3306 -u &lt;username&gt; -p
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u68C0\u67E5\u9632\u706B\u5899\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u68C0\u67E5\u9632\u706B\u5899\u8BBE\u7F6E" aria-hidden="true">#</a> \u68C0\u67E5\u9632\u706B\u5899\u8BBE\u7F6E</h4><p>\u786E\u4FDD\u6CA1\u6709\u9632\u706B\u5899\u6216\u7F51\u7EDC\u7B56\u7565\u963B\u6B62\u5E94\u7528\u7A0B\u5E8F\u4E0E MySQL \u5BB9\u5668\u4E4B\u95F4\u7684\u901A\u4FE1\u3002</p><h3 id="_3-4-\u5176\u4ED6\u53EF\u80FD\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-4-\u5176\u4ED6\u53EF\u80FD\u7684\u95EE\u9898" aria-hidden="true">#</a> 3.4 \u5176\u4ED6\u53EF\u80FD\u7684\u95EE\u9898</h3><h4 id="\u4F7F\u7528\u65E7\u7248\u672C\u7684-docker-\u6216-docker-compose" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u65E7\u7248\u672C\u7684-docker-\u6216-docker-compose" aria-hidden="true">#</a> \u4F7F\u7528\u65E7\u7248\u672C\u7684 Docker \u6216 Docker Compose</h4><p>\u786E\u4FDD\u4F60\u4F7F\u7528\u7684\u662F Docker \u548C Docker Compose \u7684\u6700\u65B0\u7248\u672C\u3002\u65E7\u7248\u672C\u53EF\u80FD\u5B58\u5728\u5DF2\u77E5\u7684\u8FDE\u63A5\u95EE\u9898\u3002</p><h4 id="\u6570\u636E\u5E93\u6CA1\u6709\u521D\u59CB\u5316" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u5E93\u6CA1\u6709\u521D\u59CB\u5316" aria-hidden="true">#</a> \u6570\u636E\u5E93\u6CA1\u6709\u521D\u59CB\u5316</h4><p>\u5982\u679C\u8FD9\u662F MySQL \u5BB9\u5668\u7684\u9996\u6B21\u542F\u52A8\uFF0C\u53EF\u80FD\u9700\u8981\u4E00\u4E9B\u65F6\u95F4\u6765\u521D\u59CB\u5316\u6570\u636E\u5E93\u3002</p><h4 id="\u5BB9\u5668\u95F4\u7684\u65F6\u95F4\u540C\u6B65\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5BB9\u5668\u95F4\u7684\u65F6\u95F4\u540C\u6B65\u95EE\u9898" aria-hidden="true">#</a> \u5BB9\u5668\u95F4\u7684\u65F6\u95F4\u540C\u6B65\u95EE\u9898</h4><p>\u786E\u4FDD\u6240\u6709\u5BB9\u5668\u7684\u7CFB\u7EDF\u65F6\u95F4\u90FD\u662F\u540C\u6B65\u7684\uFF0C\u56E0\u4E3A\u65F6\u95F4\u4E0D\u540C\u6B65\u53EF\u80FD\u4F1A\u5BFC\u81F4\u8BA4\u8BC1\u95EE\u9898\u3002</p><h2 id="_4-kafka-\u9519\u8BEF" tabindex="-1"><a class="header-anchor" href="#_4-kafka-\u9519\u8BEF" aria-hidden="true">#</a> 4. Kafka \u9519\u8BEF</h2><p>Kafka \u662F\u4E00\u4E2A\u6D41\u884C\u7684\u6D88\u606F\u4F20\u9012\u7CFB\u7EDF\uFF0C\u4F46\u4E0E\u6240\u6709\u6280\u672F\u4E00\u6837\uFF0C\u4F60\u53EF\u80FD\u4F1A\u9047\u5230\u4E00\u4E9B\u5E38\u89C1\u95EE\u9898\u3002\u4EE5\u4E0B\u662F\u8BE6\u7EC6\u7684\u6307\u5357\uFF0C\u63D0\u4F9B\u4E86\u5173\u4E8E Kafka \u9519\u8BEF\u7684\u4FE1\u606F\uFF0C\u4EE5\u53CA\u5982\u4F55\u89E3\u51B3\u8FD9\u4E9B\u95EE\u9898\u3002</p><h3 id="_4-1-\u95EE\u9898\u63CF\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-1-\u95EE\u9898\u63CF\u8FF0" aria-hidden="true">#</a> 4.1 \u95EE\u9898\u63CF\u8FF0</h3><p>\u5F53\u5C1D\u8BD5\u542F\u52A8\u6216\u4E0E Kafka \u4EA4\u4E92\u65F6\uFF0C\u4F60\u53EF\u80FD\u4F1A\u9047\u5230\u4EE5\u4E0B\u9519\u8BEF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Starting Kafka failed: kafka doesn&#39;t contain topic:offlineMsgToMongoMysql: 6000 ComponentStartErr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6B64\u9519\u8BEF\u8868\u660E Kafka \u670D\u52A1\u6CA1\u6709\u9884\u671F\u7684\u4E3B\u9898\u6216\u7EC4\u4EF6\u6CA1\u6709\u6B63\u786E\u542F\u52A8\u3002</p><h3 id="_4-2-\u5E38\u89C1\u539F\u56E0\u4E0E\u89E3\u51B3\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#_4-2-\u5E38\u89C1\u539F\u56E0\u4E0E\u89E3\u51B3\u65B9\u6848" aria-hidden="true">#</a> 4.2 \u5E38\u89C1\u539F\u56E0\u4E0E\u89E3\u51B3\u65B9\u6848</h3><h4 id="kafka-\u672A\u8FD0\u884C\u6216\u542F\u52A8\u5931\u8D25" tabindex="-1"><a class="header-anchor" href="#kafka-\u672A\u8FD0\u884C\u6216\u542F\u52A8\u5931\u8D25" aria-hidden="true">#</a> Kafka \u672A\u8FD0\u884C\u6216\u542F\u52A8\u5931\u8D25</h4><p><strong>\u68C0\u67E5\u65B9\u6CD5:</strong> \u4F7F\u7528 <code>docker ps</code> \u6216 <code>docker-compose ps</code> \u67E5\u770B Kafka \u5BB9\u5668\u7684\u72B6\u6001\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6CD5:</strong> \u5982\u679C Kafka \u672A\u8FD0\u884C\uFF0C\u8BF7\u786E\u4FDD\u4F7F\u7528\u6B63\u786E\u7684\u547D\u4EE4\u542F\u52A8\u5B83\u3002\u4F8B\u5982\uFF0C\u4F7F\u7528 <code>docker-compose up -d kafka</code>\u3002</p><h4 id="\u4E3B\u9898\u4E0D\u5B58\u5728" tabindex="-1"><a class="header-anchor" href="#\u4E3B\u9898\u4E0D\u5B58\u5728" aria-hidden="true">#</a> \u4E3B\u9898\u4E0D\u5B58\u5728</h4><p><strong>\u68C0\u67E5\u65B9\u6CD5:</strong> \u4F7F\u7528 Kafka \u7684\u547D\u4EE4\u884C\u5DE5\u5177\u67E5\u770B\u6240\u6709\u53EF\u7528\u7684\u4E3B\u9898\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6CD5:</strong> \u5982\u679C\u4E3B\u9898\u4E0D\u5B58\u5728\uFF0C\u4F60\u9700\u8981\u521B\u5EFA\u5B83\u3002\u4F60\u53EF\u4EE5\u4F7F\u7528 <code>kafka-topics.sh</code> \u811A\u672C\u6765\u521B\u5EFA\u65B0\u4E3B\u9898\u3002</p><h4 id="kafka-\u914D\u7F6E\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#kafka-\u914D\u7F6E\u95EE\u9898" aria-hidden="true">#</a> Kafka \u914D\u7F6E\u95EE\u9898</h4><p><strong>\u68C0\u67E5\u65B9\u6CD5:</strong> \u68C0\u67E5 Kafka \u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u786E\u4FDD\u6240\u6709\u7684\u914D\u7F6E\u9879\u90FD\u8BBE\u7F6E\u6B63\u786E\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6CD5:</strong> \u6839\u636E\u4F60\u7684\u9700\u6C42\u8C03\u6574 Kafka \u7684\u914D\u7F6E\u5E76\u91CD\u65B0\u542F\u52A8\u670D\u52A1\u3002</p><h3 id="_4-3-\u8C03\u8BD5\u65B9\u6CD5\u4E0E\u5E2E\u52A9" tabindex="-1"><a class="header-anchor" href="#_4-3-\u8C03\u8BD5\u65B9\u6CD5\u4E0E\u5E2E\u52A9" aria-hidden="true">#</a> 4.3 \u8C03\u8BD5\u65B9\u6CD5\u4E0E\u5E2E\u52A9</h3><h4 id="\u67E5\u770B-kafka-\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B-kafka-\u65E5\u5FD7" aria-hidden="true">#</a> \u67E5\u770B Kafka \u65E5\u5FD7</h4><p>Kafka \u5BB9\u5668\u7684\u65E5\u5FD7\u53EF\u80FD\u5305\u542B\u6709\u7528\u7684\u4FE1\u606F\u3002\u4F60\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u67E5\u770B\u5B83\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker logs &lt;kafka_container_name&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u4F7F\u7528-kafka-\u547D\u4EE4\u884C\u5DE5\u5177" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-kafka-\u547D\u4EE4\u884C\u5DE5\u5177" aria-hidden="true">#</a> \u4F7F\u7528 Kafka \u547D\u4EE4\u884C\u5DE5\u5177</h4><p>Kafka \u9644\u5E26\u4E86\u4E00\u7CFB\u5217\u7684\u547D\u4EE4\u884C\u5DE5\u5177\uFF0C\u8FD9\u4E9B\u5DE5\u5177\u53EF\u4EE5\u5E2E\u52A9\u4F60\u7BA1\u7406\u548C\u8C03\u8BD5\u670D\u52A1\u3002\u786E\u4FDD\u4F60\u719F\u6089\u5982\u4F55\u4F7F\u7528\u5B83\u4EEC\uFF0C\u7279\u522B\u662F <code>kafka-topics.sh</code> \u548C <code>kafka-console-producer/consumer.sh</code>\u3002</p><h4 id="\u786E\u4FDD-zookeeper-\u6B63\u5E38\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#\u786E\u4FDD-zookeeper-\u6B63\u5E38\u8FD0\u884C" aria-hidden="true">#</a> \u786E\u4FDD Zookeeper \u6B63\u5E38\u8FD0\u884C</h4><p>Kafka \u4F9D\u8D56\u4E8E Zookeeper\uFF0C\u6240\u4EE5\u786E\u4FDD Zookeeper \u4E5F\u5728\u6B63\u5E38\u8FD0\u884C\u3002</p><h3 id="_4-4-\u5176\u4ED6\u53EF\u80FD\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_4-4-\u5176\u4ED6\u53EF\u80FD\u7684\u95EE\u9898" aria-hidden="true">#</a> 4.4 \u5176\u4ED6\u53EF\u80FD\u7684\u95EE\u9898</h3><h4 id="\u7F51\u7EDC\u95EE\u9898-1" tabindex="-1"><a class="header-anchor" href="#\u7F51\u7EDC\u95EE\u9898-1" aria-hidden="true">#</a> \u7F51\u7EDC\u95EE\u9898</h4><p>\u786E\u4FDD Kafka \u548C\u5176\u4ED6\u670D\u52A1\uFF08\u5982 Zookeeper\uFF09\u90FD\u5728\u540C\u4E00\u4E2A Docker \u7F51\u7EDC\u4E0A\uFF0C\u5E76\u4E14\u5BB9\u5668\u4E4B\u95F4\u53EF\u4EE5\u76F8\u4E92\u901A\u4FE1\u3002</p><h4 id="\u5B58\u50A8\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5B58\u50A8\u95EE\u9898" aria-hidden="true">#</a> \u5B58\u50A8\u95EE\u9898</h4><p>\u786E\u4FDD Kafka \u5BB9\u5668\u6709\u8DB3\u591F\u7684\u78C1\u76D8\u7A7A\u95F4\u3002\u5982\u679C\u78C1\u76D8\u7A7A\u95F4\u4E0D\u8DB3\uFF0CKafka \u53EF\u80FD\u4F1A\u9047\u5230\u95EE\u9898\u3002</p><h4 id="\u7248\u672C\u4E0D\u517C\u5BB9" tabindex="-1"><a class="header-anchor" href="#\u7248\u672C\u4E0D\u517C\u5BB9" aria-hidden="true">#</a> \u7248\u672C\u4E0D\u517C\u5BB9</h4><p>\u786E\u4FDD\u4F60\u4F7F\u7528\u7684 Kafka \u5BA2\u6237\u7AEF\u7248\u672C\u4E0E Kafka \u670D\u52A1\u7248\u672C\u517C\u5BB9\u3002</p><h2 id="_5-\u7F51\u7EDC\u9519\u8BEF" tabindex="-1"><a class="header-anchor" href="#_5-\u7F51\u7EDC\u9519\u8BEF" aria-hidden="true">#</a> 5. \u7F51\u7EDC\u9519\u8BEF</h2><p>\u5728\u4F7F\u7528 Docker \u548C\u5BB9\u5668\u5316\u7684\u5E94\u7528\u7A0B\u5E8F\u65F6\uFF0C\u7F51\u7EDC\u95EE\u9898\u53EF\u80FD\u662F\u6700\u5E38\u89C1\u7684\u95EE\u9898\u4E4B\u4E00\u3002\u4ECE IP \u5730\u5740\u51B2\u7A81\u5230\u5BB9\u5668\u95F4\u8FDE\u63A5\u5931\u8D25\uFF0C\u7F51\u7EDC\u9519\u8BEF\u7684\u539F\u56E0\u548C\u89E3\u51B3\u65B9\u6848\u662F\u591A\u79CD\u591A\u6837\u7684\u3002</p><h3 id="_5-1-\u5E38\u89C1\u7684\u7F51\u7EDC\u9519\u8BEF" tabindex="-1"><a class="header-anchor" href="#_5-1-\u5E38\u89C1\u7684\u7F51\u7EDC\u9519\u8BEF" aria-hidden="true">#</a> 5.1 \u5E38\u89C1\u7684\u7F51\u7EDC\u9519\u8BEF</h3><h4 id="\u9519\u8BEF-1-invalid-address" tabindex="-1"><a class="header-anchor" href="#\u9519\u8BEF-1-invalid-address" aria-hidden="true">#</a> \u9519\u8BEF 1: Invalid address</h4><p><strong>\u95EE\u9898\u63CF\u8FF0:</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Error response from daemon: Invalid address 172.28.0.12: It does not belong to any of this network&#39;s subnets
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u9519\u8BEF\u901A\u5E38\u610F\u5473\u7740\u4F60\u8BD5\u56FE\u7ED9\u4E00\u4E2A\u5BB9\u5668\u5206\u914D\u4E00\u4E2A\u4E0D\u5C5E\u4E8E Docker \u7F51\u7EDC\u5B50\u7F51\u7684 IP \u5730\u5740\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6848:</strong></p><ol><li>\u4F7F\u7528 <code>docker network inspect [network_name]</code> \u68C0\u67E5\u7F51\u7EDC\u7684\u5B50\u7F51\u8303\u56F4\u3002</li><li>\u786E\u4FDD\u4E3A\u5BB9\u5668\u5206\u914D\u7684 IP \u5730\u5740\u5728\u8FD9\u4E2A\u8303\u56F4\u5185\u3002</li></ol><h4 id="\u9519\u8BEF-2-pool-overlaps" tabindex="-1"><a class="header-anchor" href="#\u9519\u8BEF-2-pool-overlaps" aria-hidden="true">#</a> \u9519\u8BEF 2: Pool overlaps</h4><p><strong>\u95EE\u9898\u63CF\u8FF0:</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>failed to create network example_openim-server: Error response from daemon: Pool overlaps with other one on this address space
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u610F\u5473\u7740\u4F60\u8BD5\u56FE\u521B\u5EFA\u4E00\u4E2A\u4E0E\u73B0\u6709\u7F51\u7EDC\u6709\u91CD\u53E0 IP \u5730\u5740\u8303\u56F4\u7684\u65B0\u7F51\u7EDC\u3002</p><p><strong>\u89E3\u51B3\u65B9\u6848:</strong></p><ol><li>\u66F4\u6539\u65B0\u7F51\u7EDC\u7684 IP \u5730\u5740\u8303\u56F4\u3002</li><li>\u6216\u8005\u5220\u9664\u73B0\u6709\u7684\u91CD\u53E0\u7F51\u7EDC\uFF08\u5728\u786E\u4FDD\u5176\u4E0D\u518D\u9700\u8981\u7684\u60C5\u51B5\u4E0B\uFF09\u3002</li></ol><h3 id="_5-2-\u8C03\u8BD5\u7F51\u7EDC\u95EE\u9898\u7684\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_5-2-\u8C03\u8BD5\u7F51\u7EDC\u95EE\u9898\u7684\u65B9\u6CD5" aria-hidden="true">#</a> 5.2 \u8C03\u8BD5\u7F51\u7EDC\u95EE\u9898\u7684\u65B9\u6CD5</h3><h4 id="_1-docker-network-ls" tabindex="-1"><a class="header-anchor" href="#_1-docker-network-ls" aria-hidden="true">#</a> 1. <code>docker network ls</code></h4><p>\u5217\u51FA\u6240\u6709\u7684 Docker \u7F51\u7EDC\uFF0C\u8FD9\u6837\u4F60\u53EF\u4EE5\u770B\u5230\u662F\u5426\u6709\u4EFB\u4F55\u9884\u671F\u4E4B\u5916\u7684\u7F51\u7EDC\u6216\u91CD\u590D\u7684\u7F51\u7EDC\u3002</p><h4 id="_2-docker-network-inspect-network-name" tabindex="-1"><a class="header-anchor" href="#_2-docker-network-inspect-network-name" aria-hidden="true">#</a> 2. <code>docker network inspect [network_name]</code></h4><p>\u68C0\u67E5\u7279\u5B9A\u7684 Docker \u7F51\u7EDC\u914D\u7F6E\uFF0C\u7279\u522B\u662F IP \u5730\u5740\u8303\u56F4\u548C\u8FDE\u63A5\u5230\u8BE5\u7F51\u7EDC\u7684\u5BB9\u5668\u3002</p><h4 id="_3-ping-\u548C-curl" tabindex="-1"><a class="header-anchor" href="#_3-ping-\u548C-curl" aria-hidden="true">#</a> 3. <code>ping</code> \u548C <code>curl</code></h4><p>\u4ECE\u4E00\u4E2A\u5BB9\u5668\u5185\u90E8 ping \u53E6\u4E00\u4E2A\u5BB9\u5668\u7684 IP \u5730\u5740\u6216\u4F7F\u7528 curl \u5C1D\u8BD5\u8FDE\u63A5\u5230\u53E6\u4E00\u4E2A\u5BB9\u5668\u7684\u670D\u52A1\u3002\u8FD9\u53EF\u4EE5\u5E2E\u52A9\u4F60\u786E\u5B9A\u7F51\u7EDC\u8FDE\u63A5\u95EE\u9898\u7684\u4F4D\u7F6E\u3002</p><h4 id="_4-\u67E5\u770B\u5BB9\u5668\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#_4-\u67E5\u770B\u5BB9\u5668\u65E5\u5FD7" aria-hidden="true">#</a> 4. \u67E5\u770B\u5BB9\u5668\u65E5\u5FD7</h4><p>\u4F7F\u7528 <code>docker logs [container_name]</code> \u68C0\u67E5\u5BB9\u5668\u7684\u65E5\u5FD7\uFF0C\u53EF\u80FD\u4F1A\u6709\u4E00\u4E9B\u4E0E\u7F51\u7EDC\u76F8\u5173\u7684\u9519\u8BEF\u6216\u8B66\u544A\u3002</p><h3 id="_5-3-\u5176\u4ED6\u53EF\u80FD\u7684\u7F51\u7EDC\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_5-3-\u5176\u4ED6\u53EF\u80FD\u7684\u7F51\u7EDC\u95EE\u9898" aria-hidden="true">#</a> 5.3 \u5176\u4ED6\u53EF\u80FD\u7684\u7F51\u7EDC\u95EE\u9898</h3><h4 id="dns-\u89E3\u6790\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#dns-\u89E3\u6790\u95EE\u9898" aria-hidden="true">#</a> DNS \u89E3\u6790\u95EE\u9898</h4><p>\u5BB9\u5668\u53EF\u80FD\u65E0\u6CD5\u89E3\u6790\u5176\u4ED6\u5BB9\u5668\u7684\u57DF\u540D\u3002\u786E\u4FDD\u4F60\u7684\u5BB9\u5668\u4F7F\u7528\u4E86\u6B63\u786E\u7684 DNS \u8BBE\u7F6E\uFF0C\u5E76\u4E14\u53EF\u4EE5\u8BBF\u95EE DNS \u670D\u52A1\u5668\u3002</p><h4 id="\u7AEF\u53E3\u672A\u66B4\u9732\u6216\u7ED1\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u7AEF\u53E3\u672A\u66B4\u9732\u6216\u7ED1\u5B9A" aria-hidden="true">#</a> \u7AEF\u53E3\u672A\u66B4\u9732\u6216\u7ED1\u5B9A</h4><p>\u5982\u679C\u4F60\u7684\u670D\u52A1\u5728\u5BB9\u5668\u5185\u90E8\u8FD0\u884C\uFF0C\u4F46\u65E0\u6CD5\u4ECE\u5916\u90E8\u8BBF\u95EE\uFF0C\u786E\u4FDD\u4F60\u5DF2\u7ECF\u5728 Dockerfile \u4E2D\u4F7F\u7528 <code>EXPOSE</code> \u6307\u4EE4\u66B4\u9732\u4E86\u6B63\u786E\u7684\u7AEF\u53E3\uFF0C\u5E76\u5728\u542F\u52A8\u5BB9\u5668\u65F6\u7ED1\u5B9A\u4E86\u8FD9\u4E9B\u7AEF\u53E3\u3002</p><h4 id="\u9632\u706B\u5899\u6216\u5B89\u5168\u7EC4" tabindex="-1"><a class="header-anchor" href="#\u9632\u706B\u5899\u6216\u5B89\u5168\u7EC4" aria-hidden="true">#</a> \u9632\u706B\u5899\u6216\u5B89\u5168\u7EC4</h4><p>\u786E\u4FDD\u4EFB\u4F55\u5916\u90E8\u7684\u9632\u706B\u5899\u6216\u5B89\u5168\u7EC4\u90FD\u5141\u8BB8\u5FC5\u8981\u7684\u6D41\u91CF\u901A\u8FC7\u3002</p><h2 id="_6-\u5176\u4ED6\u95EE\u9898\u7684\u6392\u67E5" tabindex="-1"><a class="header-anchor" href="#_6-\u5176\u4ED6\u95EE\u9898\u7684\u6392\u67E5" aria-hidden="true">#</a> 6. \u5176\u4ED6\u95EE\u9898\u7684\u6392\u67E5</h2><p>\u5F53\u4F60\u4F7F\u7528\u5F00\u6E90\u9879\u76EE\u6216\u4EFB\u4F55\u5176\u4ED6\u8F6F\u4EF6\u65F6\uFF0C\u96BE\u514D\u4F1A\u9047\u5230\u4E00\u4E9B\u4E0D\u53EF\u9884\u6D4B\u7684\u95EE\u9898\u3002\u5982\u4F55\u4F18\u96C5\u5730\u6392\u67E5\u548C\u89E3\u51B3\u95EE\u9898\u662F\u6BCF\u4E2A\u5F00\u53D1\u8005\u548C\u7528\u6237\u90FD\u5E94\u8BE5\u638C\u63E1\u7684\u91CD\u8981\u6280\u80FD\u3002</p><h3 id="_6-1-\u660E\u786E\u95EE\u9898\u63CF\u8FF0" tabindex="-1"><a class="header-anchor" href="#_6-1-\u660E\u786E\u95EE\u9898\u63CF\u8FF0" aria-hidden="true">#</a> 6.1 \u660E\u786E\u95EE\u9898\u63CF\u8FF0</h3><p>\u9996\u5148\uFF0C\u8981\u786E\u4FDD\u4F60\u771F\u6B63\u7406\u89E3\u4E86\u95EE\u9898\u3002\u968F\u610F\u5730\u5C1D\u8BD5\u5404\u79CD\u89E3\u51B3\u65B9\u6848\uFF0C\u800C\u4E0D\u9996\u5148\u5B9A\u4E49\u95EE\u9898\u662F\u4E00\u79CD\u65F6\u95F4\u6D6A\u8D39\u7684\u7B56\u7565\u3002</p><ul><li><strong>\u6536\u96C6\u9519\u8BEF\u65E5\u5FD7</strong>\uFF1A\u51E0\u4E4E\u6240\u6709\u7684\u5E94\u7528\u7A0B\u5E8F\u6216\u8F6F\u4EF6\u90FD\u6709\u65E5\u5FD7\u8BB0\u5F55\u529F\u80FD\u3002\u59CB\u7EC8\u67E5\u770B\u65E5\u5FD7\u4EE5\u83B7\u53D6\u6709\u5173\u95EE\u9898\u7684\u66F4\u591A\u8BE6\u7EC6\u4FE1\u606F\u3002</li><li><strong>\u91CD\u73B0\u95EE\u9898</strong>\uFF1A\u5728\u5C1D\u8BD5\u89E3\u51B3\u95EE\u9898\u4E4B\u524D\uFF0C\u4E86\u89E3\u5982\u4F55\u91CD\u73B0\u5B83\u662F\u5F88\u91CD\u8981\u7684\u3002\u5982\u679C\u4E00\u4E2A\u95EE\u9898\u4E0D\u80FD\u88AB\u53EF\u9760\u5730\u91CD\u73B0\uFF0C\u5B83\u5F88\u96BE\u88AB\u89E3\u51B3\u3002</li></ul><h3 id="_6-2-\u5206\u9694\u6392\u9664\u6CD5" tabindex="-1"><a class="header-anchor" href="#_6-2-\u5206\u9694\u6392\u9664\u6CD5" aria-hidden="true">#</a> 6.2 \u5206\u9694\u6392\u9664\u6CD5</h3><p>\u4E00\u79CD\u6709\u6548\u7684\u6545\u969C\u6392\u9664\u7B56\u7565\u662F\u5206\u9694\u548C\u6392\u9664\u3002\u8FD9\u610F\u5473\u7740\u4F60\u5C06\u7CFB\u7EDF\u62C6\u5206\u4E3A\u4E0D\u540C\u7684\u90E8\u5206\uFF0C\u5E76\u5355\u72EC\u6D4B\u8BD5\u6BCF\u4E00\u90E8\u5206\uFF0C\u4EE5\u786E\u5B9A\u95EE\u9898\u51FA\u5728\u54EA\u91CC\u3002</p><ul><li><strong>\u5355\u72EC\u8FD0\u884C\u7EC4\u4EF6</strong>\uFF1A\u4F8B\u5982\uFF0C\u5982\u679C\u4F60\u5728\u4F7F\u7528\u591A\u4E2A\u670D\u52A1\u7684\u7CFB\u7EDF\u4E2D\u9047\u5230\u95EE\u9898\uFF0C\u5C1D\u8BD5\u5355\u72EC\u8FD0\u884C\u6BCF\u4E2A\u670D\u52A1\u6765\u770B\u54EA\u4E2A\u670D\u52A1\u51FA\u4E86\u95EE\u9898\u3002</li><li><strong>\u4F7F\u7528\u6700\u5C0F\u5316\u7684\u914D\u7F6E</strong>\uFF1A\u5982\u679C\u53EF\u80FD\uFF0C\u4F7F\u7528\u6700\u57FA\u672C\u7684\u914D\u7F6E\u542F\u52A8\u5E94\u7528\u7A0B\u5E8F\u6216\u670D\u52A1\uFF0C\u7136\u540E\u9010\u6E10\u6DFB\u52A0\u66F4\u591A\u7684\u914D\u7F6E\u9009\u9879\uFF0C\u76F4\u5230\u4F60\u53EF\u4EE5\u91CD\u73B0\u95EE\u9898\u3002</li></ul><h3 id="_6-3-\u4F7F\u7528\u5F00\u6E90\u793E\u533A\u8D44\u6E90" tabindex="-1"><a class="header-anchor" href="#_6-3-\u4F7F\u7528\u5F00\u6E90\u793E\u533A\u8D44\u6E90" aria-hidden="true">#</a> 6.3 \u4F7F\u7528\u5F00\u6E90\u793E\u533A\u8D44\u6E90</h3><ul><li><strong>\u67E5\u627E\u5DF2\u77E5\u7684\u95EE\u9898</strong>\uFF1A\u5927\u591A\u6570\u5F00\u6E90\u9879\u76EE\u90FD\u6709\u4E00\u4E2Aissue\u8DDF\u8E2A\u5668\uFF0C\u5982GitHub\u7684Issues\u3002\u9996\u5148\u67E5\u770B\u90A3\u91CC\uFF0C\u770B\u770B\u4F60\u7684\u95EE\u9898\u662F\u5426\u5DF2\u7ECF\u88AB\u5176\u4ED6\u4EBA\u62A5\u544A\u8FC7\u3002</li><li><strong>\u63D0\u95EE\u7684\u6280\u5DE7</strong>\uFF1A\u5982\u679C\u4F60\u51B3\u5B9A\u8BE2\u95EE\u793E\u533A\uFF0C\u786E\u4FDD\u4F60\u7684\u95EE\u9898\u662F\u660E\u786E\u7684\u3001\u5177\u4F53\u7684\uFF0C\u5E76\u9644\u5E26\u8DB3\u591F\u7684\u8BE6\u7EC6\u4FE1\u606F\u3002\u5305\u62EC\u9519\u8BEF\u6D88\u606F\u3001\u4F60\u7684\u73AF\u5883\u4FE1\u606F\u548C\u4F60\u5DF2\u7ECF\u5C1D\u8BD5\u8FC7\u7684\u89E3\u51B3\u65B9\u6848\u3002</li></ul><h3 id="_6-4-\u4F7F\u7528\u8C03\u8BD5\u5DE5\u5177" tabindex="-1"><a class="header-anchor" href="#_6-4-\u4F7F\u7528\u8C03\u8BD5\u5DE5\u5177" aria-hidden="true">#</a> 6.4 \u4F7F\u7528\u8C03\u8BD5\u5DE5\u5177</h3><ul><li><strong>\u4EE3\u7801\u8C03\u8BD5</strong>\uFF1A\u5982\u679C\u4F60\u5BF9\u4EE3\u7801\u611F\u5230\u8212\u9002\uFF0C\u4F7F\u7528\u8C03\u8BD5\u5668\u6765\u9010\u6B65\u6267\u884C\u4EE3\u7801\u53EF\u4EE5\u5E2E\u52A9\u4F60\u66F4\u5FEB\u5730\u627E\u5230\u95EE\u9898\u3002</li><li><strong>\u7F51\u7EDC\u8C03\u8BD5</strong>\uFF1A\u5BF9\u4E8E\u7F51\u7EDC\u95EE\u9898\uFF0C\u5DE5\u5177\u5982 <code>ping</code>, <code>traceroute</code>, <code>netstat</code> \u548C <code>wireshark</code> \u53EF\u4EE5\u975E\u5E38\u6709\u7528\u3002</li></ul><h3 id="_6-5-\u53D1\u73B0\u95EE\u9898\u540E\u7684\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#_6-5-\u53D1\u73B0\u95EE\u9898\u540E\u7684\u6B65\u9AA4" aria-hidden="true">#</a> 6.5 \u53D1\u73B0\u95EE\u9898\u540E\u7684\u6B65\u9AA4</h3><p>\u4E00\u65E6\u4F60\u627E\u5230\u4E86\u95EE\u9898\uFF0C\u4EE5\u4E0B\u662F\u4E00\u4E9B\u5EFA\u8BAE\u7684\u4E0B\u4E00\u6B65\uFF1A</p><ul><li><strong>\u67E5\u627E\u73B0\u6709\u7684\u4FEE\u590D\u7A0B\u5E8F</strong>\uFF1A\u53EF\u80FD\u6709\u4EBA\u5DF2\u7ECF\u4E3A\u4F60\u7684\u95EE\u9898\u627E\u5230\u4E86\u4E00\u4E2A\u4FEE\u590D\u7A0B\u5E8F\u6216\u89E3\u51B3\u65B9\u6848\u3002</li><li><strong>\u4FEE\u590D\u95EE\u9898</strong>\uFF1A\u5982\u679C\u4F60\u6709\u6280\u80FD\u548C\u8D44\u6E90\uFF0C\u4F60\u53EF\u4EE5\u5C1D\u8BD5\u81EA\u5DF1\u4FEE\u590D\u95EE\u9898\u3002</li><li><strong>\u62A5\u544A\u95EE\u9898</strong>\uFF1A\u5373\u4F7F\u4F60\u81EA\u5DF1\u89E3\u51B3\u4E86\u95EE\u9898\uFF0C\u4E5F\u8981\u5411\u5F00\u6E90\u793E\u533A\u62A5\u544A\u5B83\uFF0C\u8FD9\u6837\u5176\u4ED6\u4EBA\u53EF\u4EE5\u4ECE\u4F60\u7684\u53D1\u73B0\u4E2D\u53D7\u76CA\u3002</li></ul><h3 id="_6-6-\u4FDD\u6301\u8010\u5FC3" tabindex="-1"><a class="header-anchor" href="#_6-6-\u4FDD\u6301\u8010\u5FC3" aria-hidden="true">#</a> 6.6 \u4FDD\u6301\u8010\u5FC3</h3><p>\u6700\u540E\u4F46\u540C\u6837\u91CD\u8981\u7684\u662F\uFF0C\u4FDD\u6301\u8010\u5FC3\u548C\u5F00\u653E\u7684\u5FC3\u6001\u3002\u9047\u5230\u95EE\u9898\u662F\u8F6F\u4EF6\u5F00\u53D1\u7684\u4E00\u4E2A\u666E\u904D\u73B0\u8C61\uFF0C\u5B66\u4E60\u5982\u4F55\u6709\u6548\u5730\u89E3\u51B3\u5B83\u4EEC\u53EF\u4EE5\u4F7F\u4F60\u6210\u4E3A\u4E00\u4E2A\u66F4\u597D\u7684\u5F00\u53D1\u8005\u3002</p><p>\u603B\u7684\u6765\u8BF4\uFF0C\u4F18\u96C5\u5730\u6392\u67E5\u548C\u89E3\u51B3\u95EE\u9898\u9700\u8981\u65F6\u95F4\u3001\u5B9E\u8DF5\u548C\u8010\u5FC3\uFF0C\u4F46\u968F\u7740\u65F6\u95F4\u7684\u63A8\u79FB\uFF0C\u4F60\u5C06\u53D1\u5C55\u51FA\u81EA\u5DF1\u7684\u7B56\u7565\u548C\u6280\u672F\uFF0C\u4F7F\u8FD9\u4E2A\u8FC7\u7A0B\u53D8\u5F97\u66F4\u52A0\u5BB9\u6613\u548C\u76F4\u89C2\u3002</p><h1 id="\u82F1\u6587-common-docker-compose-questions-and-solutions" tabindex="-1"><a class="header-anchor" href="#\u82F1\u6587-common-docker-compose-questions-and-solutions" aria-hidden="true">#</a> \u82F1\u6587\uFF1ACommon Docker Compose Questions and Solutions</h1><h2 id="_1-configuration-file-management" tabindex="-1"><a class="header-anchor" href="#_1-configuration-file-management" aria-hidden="true">#</a> 1. Configuration File Management</h2><p>When using the new version of OpenIM (version &gt;= 3.2.0), managing configuration files becomes crucial. Configuration files not only provide the necessary runtime parameters for applications but also ensure the stability and reliability of system operation.</p><h3 id="_1-1-generating-configuration-files" tabindex="-1"><a class="header-anchor" href="#_1-1-generating-configuration-files" aria-hidden="true">#</a> 1.1 Generating Configuration Files</h3><p>OpenIM offers two methods to generate configuration files. One is via <code>Makefile</code> and the other is by directly executing the initialization script.</p><h4 id="using-makefile" tabindex="-1"><a class="header-anchor" href="#using-makefile" aria-hidden="true">#</a> Using Makefile</h4><p>For developers familiar with Makefile, this is a quick and user-friendly method. Just execute the following command in the project root directory:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>make init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This triggers the relevant commands in <code>Makefile</code>, ultimately generating the required configuration files.</p><h4 id="using-initialization-script" tabindex="-1"><a class="header-anchor" href="#using-initialization-script" aria-hidden="true">#</a> Using Initialization Script</h4><p>For those who don&#39;t want to use <code>Makefile</code> or aren&#39;t familiar with it, we offer a more direct way to generate the configuration files. Just execute:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>./scripts/init-config.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Whichever method you choose, the same configuration files will be generated. Thus, pick the method that suits your preference and environment.</p><h3 id="_1-2-verify-configuration-file" tabindex="-1"><a class="header-anchor" href="#_1-2-verify-configuration-file" aria-hidden="true">#</a> 1.2 Verify Configuration File</h3><p>After generating the configuration file, it&#39;s best to validate it to ensure it meets the application&#39;s requirements. Signs of validation include:</p><p>[Log output...]</p><p>These logs ensure that the configuration file has been correctly generated and can be properly parsed by the OpenIM service.</p><h3 id="_1-3-modifying-and-managing-the-configuration-file" tabindex="-1"><a class="header-anchor" href="#_1-3-modifying-and-managing-the-configuration-file" aria-hidden="true">#</a> 1.3 Modifying and Managing the Configuration File</h3><p>Configuration files typically don&#39;t need frequent modifications. However, in some cases, such as changing database connection parameters or adjusting other critical parameters, adjustments might be necessary.</p><p>It&#39;s recommended to configure and manage using environment variables ~</p><p>Before modifying the configuration file, it&#39;s advised to back up the original file. This way, if issues arise, it&#39;s easy to roll back to the original state.</p><p>Additionally, for teams using OpenIM, it&#39;s recommended to use version control systems (like Git) to manage configuration files. This ensures team members use the same configurations and can track any changes.</p><h2 id="_2-docker-compose-doesn-t-support-gateway" tabindex="-1"><a class="header-anchor" href="#_2-docker-compose-doesn-t-support-gateway" aria-hidden="true">#</a> 2. Docker Compose Doesn&#39;t Support <code>gateway</code></h2><p>Docker Compose is a tool for defining and running multi-container Docker applications. Sometimes, you might encounter issues with unsupported features, such as <code>gateway</code>. Here&#39;s a detailed guide, including the problem, reasons, solutions, and debugging tips.</p><h3 id="_2-1-problem-description" tabindex="-1"><a class="header-anchor" href="#_2-1-problem-description" aria-hidden="true">#</a> 2.1 Problem Description</h3><p>When using a Docker Compose file to define a network, attempting to set the gateway parameter might result in the following error:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ERROR: The Compose <span class="token function">file</span> <span class="token string">&#39;./docker-compose.yaml&#39;</span> is invalid because:
networks.openim-server.ipam.config value Additional properties are not allowed <span class="token punctuation">(</span><span class="token string">&#39;gateway&#39;</span> was unexpected<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>This indicates that Docker Compose doesn&#39;t support the <code>gateway</code> parameter you&#39;re trying to define.</p><h3 id="_2-2-reason" tabindex="-1"><a class="header-anchor" href="#_2-2-reason" aria-hidden="true">#</a> 2.2 Reason</h3><p>Some versions of Docker Compose might not support specific network attributes, like <code>gateway</code>. This might be due to an outdated version of Docker Compose or syntax errors in the configuration file.</p><h3 id="_2-3-solution" tabindex="-1"><a class="header-anchor" href="#_2-3-solution" aria-hidden="true">#</a> 2.3 Solution</h3><h4 id="check-the-version" tabindex="-1"><a class="header-anchor" href="#check-the-version" aria-hidden="true">#</a> Check the Version</h4><p>First, ensure your Docker Compose version is the latest. To check the version, run:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker-compose version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>If you&#39;re using an older version, consider updating to the latest version.</p><h4 id="validate-configuration-file" tabindex="-1"><a class="header-anchor" href="#validate-configuration-file" aria-hidden="true">#</a> Validate Configuration File</h4><p>Verify the syntax of the <code>docker-compose.yaml</code> file. Ensure correct indentation, spacing, and formatting. You can use online YAML validation tools for checking.</p><h4 id="use-different-network-configurations" tabindex="-1"><a class="header-anchor" href="#use-different-network-configurations" aria-hidden="true">#</a> Use Different Network Configurations</h4><p>If the specific <code>gateway</code> setting isn&#39;t necessary, consider deleting or changing it. Also, if you want to define a static IP for a container, you can use the <code>ipv4_address</code> attribute.</p><h3 id="_2-4-debugging-and-help" tabindex="-1"><a class="header-anchor" href="#_2-4-debugging-and-help" aria-hidden="true">#</a> 2.4 Debugging and Help</h3><p>If the above solutions don&#39;t resolve the issue, here are some debugging tips and guides:</p><h4 id="check-docker-documentation" tabindex="-1"><a class="header-anchor" href="#check-docker-documentation" aria-hidden="true">#</a> Check Docker Documentation</h4>`,161),x=e("The official Docker documentation is a valuable resource. Ensure you've read the "),_={href:"https://docs.docker.com/compose/compose-file/",target:"_blank",rel:"noopener noreferrer"},w=e("official documentation on Docker Compose files"),S=e("."),M=r(`<h4 id="use-more-detailed-logs" tabindex="-1"><a class="header-anchor" href="#use-more-detailed-logs" aria-hidden="true">#</a> Use More Detailed Logs</h4><p>Using the <code>-v</code> parameter when running <code>docker-compose</code> can give more detailed log outputs, which might help identify the root cause.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> <span class="token parameter variable">-v</span> up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="access-the-community-and-forums" tabindex="-1"><a class="header-anchor" href="#access-the-community-and-forums" aria-hidden="true">#</a> Access the Community and Forums</h4>`,4),D=e("Docker has a very active community. If you face issues, consider posting your problems on the "),I={href:"https://forums.docker.com/",target:"_blank",rel:"noopener noreferrer"},C=e("Docker forum"),L=e(" or search if other users have the same issue."),q=r(`<h2 id="_3-mysql-connection-failure" tabindex="-1"><a class="header-anchor" href="#_3-mysql-connection-failure" aria-hidden="true">#</a> 3. MySQL Connection Failure</h2><p>In applications running on Docker, failing to connect to MySQL is a common issue. This problem can arise for various reasons; here&#39;s a comprehensive guide to help you resolve MySQL connection issues.</p><h3 id="_3-1-problem-description" tabindex="-1"><a class="header-anchor" href="#_3-1-problem-description" aria-hidden="true">#</a> 3.1 Problem Description</h3><p>When your application or service tries to connect to the MySQL container, you might encounter the following error:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>error<span class="token punctuation">]</span> failed to initialize database, got error dial tcp <span class="token number">172.28</span>.0.2:13306: connect: connection refused
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This indicates that your application can&#39;t establish a connection to MySQL.</p><h3 id="_3-2-common-causes-and-solutions" tabindex="-1"><a class="header-anchor" href="#_3-2-common-causes-and-solutions" aria-hidden="true">#</a> 3.2 Common Causes and Solutions</h3><h4 id="mysql-container-not-running" tabindex="-1"><a class="header-anchor" href="#mysql-container-not-running" aria-hidden="true">#</a> MySQL Container Not Running</h4><p><strong>Check:</strong> Use the <code>docker ps</code> command to view all running containers.</p><p><strong>Solution:</strong> If you don&#39;t see the MySQL container, ensure it&#39;s started.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="wrong-mysql-address-or-port" tabindex="-1"><a class="header-anchor" href="#wrong-mysql-address-or-port" aria-hidden="true">#</a> Wrong MySQL Address or Port</h4><p><strong>Check:</strong> Review the application&#39;s configuration file and ensure the MySQL address and port settings are correct.</p><p><strong>Solution:</strong> If using the default Docker Compose settings, the address should be <code>mysql</code> (container name), and the default port is <code>3306</code>.</p><h4 id="mysql-user-permissions-issue" tabindex="-1"><a class="header-anchor" href="#mysql-user-permissions-issue" aria-hidden="true">#</a> MySQL User Permissions Issue</h4><p><strong>Check:</strong> Log into MySQL and inspect user permissions.</p><p><strong>Solution:</strong> Ensure the connecting MySQL user has sufficient permissions. Consider creating a dedicated user for the application and granting necessary permissions.</p><h4 id="mysql-s-bind-address" tabindex="-1"><a class="header-anchor" href="#mysql-s-bind-address" aria-hidden="true">#</a> MySQL&#39;s <code>bind-address</code></h4><p><strong>Check:</strong> If MySQL is bound only to <code>127.0.0.1</code>, it can only be accessed from inside the container.</p><p><strong>Solution:</strong> Change MySQL&#39;s <code>bind-address</code> to <code>0.0.0.0</code> to allow external connections.</p><h4 id="network-issues" tabindex="-1"><a class="header-anchor" href="#network-issues" aria-hidden="true">#</a> Network Issues</h4><p><strong>Check:</strong> Use <code>docker network inspect</code> to check the network settings of the container.</p><p><strong>Solution:</strong> Ensure the application and MySQL containers are on the same network.</p><h3 id="_3-3-debugging-methods-and-help" tabindex="-1"><a class="header-anchor" href="#_3-3-debugging-methods-and-help" aria-hidden="true">#</a> 3.3 Debugging Methods and Help</h3><h4 id="view-mysql-logs" tabindex="-1"><a class="header-anchor" href="#view-mysql-logs" aria-hidden="true">#</a> View MySQL Logs</h4><p>Viewing the logs of the MySQL container might provide more information about connection failures.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> logs <span class="token operator">&lt;</span>mysql_container_name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="test-with-mysql-client" tabindex="-1"><a class="header-anchor" href="#test-with-mysql-client" aria-hidden="true">#</a> Test with MySQL Client</h4><p>Directly connecting to the database using the MySQL client can help pinpoint the issue.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysql <span class="token parameter variable">-h</span> <span class="token operator">&lt;</span>mysql_container_ip<span class="token operator">&gt;</span> <span class="token parameter variable">-P</span> <span class="token number">3306</span> <span class="token parameter variable">-u</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="check-firewall-settings" tabindex="-1"><a class="header-anchor" href="#check-firewall-settings" aria-hidden="true">#</a> Check Firewall Settings</h4><p>Ensure no firewall or network policies are blocking communication between the application and the MySQL container.</p><h3 id="_3-4-other-possible-issues" tabindex="-1"><a class="header-anchor" href="#_3-4-other-possible-issues" aria-hidden="true">#</a> 3.4 Other Possible Issues</h3><h4 id="using-older-versions-of-docker-or-docker-compose" tabindex="-1"><a class="header-anchor" href="#using-older-versions-of-docker-or-docker-compose" aria-hidden="true">#</a> Using Older Versions of Docker or Docker Compose</h4><p>Ensure you&#39;re using the latest versions of Docker and Docker Compose. Older versions might have known connection issues.</p><h4 id="database-not-initialized" tabindex="-1"><a class="header-anchor" href="#database-not-initialized" aria-hidden="true">#</a> Database Not Initialized</h4><p>If it&#39;s the MySQL container&#39;s first start, it might need some time to initialize the database.</p><h4 id="time-synchronization-issues-between-containers" tabindex="-1"><a class="header-anchor" href="#time-synchronization-issues-between-containers" aria-hidden="true">#</a> Time Synchronization Issues Between Containers</h4><p>Ensure all containers&#39; system times are synchronized, as unsynchronized times might lead to authentication issues.</p><h2 id="_4-kafka-errors" tabindex="-1"><a class="header-anchor" href="#_4-kafka-errors" aria-hidden="true">#</a> 4. Kafka Errors</h2><p>Kafka is a popular messaging system, but like all technologies, you might encounter some common issues. Here&#39;s a detailed guide that provides information on Kafka errors and how to resolve them.</p><h3 id="_4-1-problem-description" tabindex="-1"><a class="header-anchor" href="#_4-1-problem-description" aria-hidden="true">#</a> 4.1 Problem Description</h3><p>When trying to start or interact with Kafka, you might come across the following error:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Starting Kafka failed: kafka doesn&#39;t contain topic:offlineMsgToMongoMysql: <span class="token number">6000</span> ComponentStartErr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This error suggests that the Kafka service lacks the expected topic, or the component hasn&#39;t started correctly.</p><h3 id="_4-2-common-causes-and-solutions" tabindex="-1"><a class="header-anchor" href="#_4-2-common-causes-and-solutions" aria-hidden="true">#</a> 4.2 Common Causes and Solutions</h3><h4 id="kafka-not-running-or-failed-to-start" tabindex="-1"><a class="header-anchor" href="#kafka-not-running-or-failed-to-start" aria-hidden="true">#</a> Kafka Not Running or Failed to Start</h4><p><strong>Check:</strong> Use <code>docker ps</code> or <code>docker-compose ps</code> to see the status of the Kafka container.</p><p><strong>Solution:</strong> If Kafka isn&#39;t running, ensure you start it using the correct command, such as <code>docker-compose up -d kafka</code>.</p><h4 id="topic-doesn-t-exist" tabindex="-1"><a class="header-anchor" href="#topic-doesn-t-exist" aria-hidden="true">#</a> Topic Doesn&#39;t Exist</h4><p><strong>Check:</strong> Use Kafka&#39;s command-line tools to view all available topics.</p><p><strong>Solution:</strong> If the topic doesn&#39;t exist, you&#39;ll need to create it. The <code>kafka-topics.sh</code> script can be used to create a new topic.</p><h4 id="kafka-configuration-issues" tabindex="-1"><a class="header-anchor" href="#kafka-configuration-issues" aria-hidden="true">#</a> Kafka Configuration Issues</h4><p><strong>Check:</strong> Review Kafka&#39;s configuration file to ensure all configurations are correctly set.</p><p><strong>Solution:</strong> Adjust the Kafka configuration based on your needs and restart the service.</p><h3 id="_4-3-debugging-methods-and-help" tabindex="-1"><a class="header-anchor" href="#_4-3-debugging-methods-and-help" aria-hidden="true">#</a> 4.3 Debugging Methods and Help</h3><h4 id="view-kafka-logs" tabindex="-1"><a class="header-anchor" href="#view-kafka-logs" aria-hidden="true">#</a> View Kafka Logs</h4><p>Logs from the Kafka container might contain useful information. They can be viewed using:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker logs &lt;kafka_container_name&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="use-kafka-command-line-tools" tabindex="-1"><a class="header-anchor" href="#use-kafka-command-line-tools" aria-hidden="true">#</a> Use Kafka Command-line Tools</h4><p>Kafka comes with a series of command-line tools that can help manage and debug the service. Ensure you&#39;re familiar with how to use them, especially <code>kafka-topics.sh</code> and <code>kafka-console-producer/consumer.sh</code>.</p><h4 id="ensure-zookeeper-is-running-properly" tabindex="-1"><a class="header-anchor" href="#ensure-zookeeper-is-running-properly" aria-hidden="true">#</a> Ensure Zookeeper Is Running Properly</h4><p>Kafka relies on Zookeeper, so make sure Zookeeper is running correctly.</p><h3 id="_4-4-other-possible-issues" tabindex="-1"><a class="header-anchor" href="#_4-4-other-possible-issues" aria-hidden="true">#</a> 4.4 Other Possible Issues</h3><h4 id="network-issues-1" tabindex="-1"><a class="header-anchor" href="#network-issues-1" aria-hidden="true">#</a> Network Issues</h4><p>Ensure that Kafka and other services (like Zookeeper) are on the same Docker network and can communicate with each other.</p><h4 id="storage-issues" tabindex="-1"><a class="header-anchor" href="#storage-issues" aria-hidden="true">#</a> Storage Issues</h4><p>Ensure the Kafka container has enough disk space. If there&#39;s insufficient disk space, Kafka might encounter issues.</p><h4 id="version-incompatibility" tabindex="-1"><a class="header-anchor" href="#version-incompatibility" aria-hidden="true">#</a> Version Incompatibility</h4><p>Ensure that the Kafka client version you&#39;re using is compatible with the Kafka server version.</p><h2 id="_5-network-errors" tabindex="-1"><a class="header-anchor" href="#_5-network-errors" aria-hidden="true">#</a> 5. Network Errors</h2><p>When using Docker and containerized applications, network issues might be one of the most common challenges. From IP address conflicts to connection failures between containers, reasons for and solutions to network errors can be diverse.</p><h3 id="_5-1-common-network-errors" tabindex="-1"><a class="header-anchor" href="#_5-1-common-network-errors" aria-hidden="true">#</a> 5.1 Common Network Errors</h3><h4 id="error-1-invalid-address" tabindex="-1"><a class="header-anchor" href="#error-1-invalid-address" aria-hidden="true">#</a> Error 1: Invalid address</h4><p><strong>Problem Description:</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Error response from daemon: Invalid address 172.28.0.12: It does not belong to any of this network&#39;s subnets
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This error typically suggests you&#39;re attempting to assign an IP address to a container that doesn&#39;t belong to any of Docker&#39;s network subnets.</p><p><strong>Solution:</strong></p><ol><li>Use <code>docker network inspect [network_name]</code> to check the subnet range of the network.</li><li>Ensure the IP address you&#39;re assigning to the container lies within this range.</li></ol><h4 id="error-2-pool-overlaps" tabindex="-1"><a class="header-anchor" href="#error-2-pool-overlaps" aria-hidden="true">#</a> Error 2: Pool overlaps</h4><p><strong>Problem Description:</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>failed to create network example_openim-server: Error response from daemon: Pool overlaps with another one on this address space
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This implies you&#39;re trying to create a new network with an IP address range that overlaps with an existing network.</p><p><strong>Solution:</strong></p><ol><li>Change the IP address range of the new network.</li><li>Or, delete the existing overlapping network (after ensuring it&#39;s no longer needed).</li></ol><h3 id="_5-2-methods-to-debug-network-issues" tabindex="-1"><a class="header-anchor" href="#_5-2-methods-to-debug-network-issues" aria-hidden="true">#</a> 5.2 Methods to Debug Network Issues</h3><h4 id="_1-docker-network-ls-1" tabindex="-1"><a class="header-anchor" href="#_1-docker-network-ls-1" aria-hidden="true">#</a> 1. <code>docker network ls</code></h4><p>List all Docker networks, allowing you to see if there are unexpected or duplicate networks.</p><h4 id="_2-docker-network-inspect-network-name-1" tabindex="-1"><a class="header-anchor" href="#_2-docker-network-inspect-network-name-1" aria-hidden="true">#</a> 2. <code>docker network inspect [network_name]</code></h4><p>Inspect a specific Docker network&#39;s configuration, especially the IP address range and the containers connected to that network.</p><h4 id="_3-ping-and-curl" tabindex="-1"><a class="header-anchor" href="#_3-ping-and-curl" aria-hidden="true">#</a> 3. <code>ping</code> and <code>curl</code></h4><p>Ping another container&#39;s IP address from inside one container or use curl to attempt a connection to another container&#39;s service. This can help pinpoint the location of the network connection issue.</p><h4 id="_4-view-container-logs" tabindex="-1"><a class="header-anchor" href="#_4-view-container-logs" aria-hidden="true">#</a> 4. View container logs</h4><p>Use <code>docker logs [container_name]</code> to check the container&#39;s logs, which might have some network-related errors or warnings.</p><h3 id="_5-3-other-potential-network-issues" tabindex="-1"><a class="header-anchor" href="#_5-3-other-potential-network-issues" aria-hidden="true">#</a> 5.3 Other Potential Network Issues</h3><h4 id="dns-resolution-issues" tabindex="-1"><a class="header-anchor" href="#dns-resolution-issues" aria-hidden="true">#</a> DNS Resolution Issues</h4><p>Containers might not be able to resolve the domain names of other containers. Ensure your containers are using the correct DNS settings and can access the DNS server.</p><h4 id="ports-not-exposed-or-bound" tabindex="-1"><a class="header-anchor" href="#ports-not-exposed-or-bound" aria-hidden="true">#</a> Ports Not Exposed or Bound</h4><p>If your service runs inside a container but can&#39;t be accessed externally, ensure you&#39;ve exposed the right ports in the Dockerfile using the <code>EXPOSE</code> directive and bound these ports when starting the container.</p><h4 id="firewalls-or-security-groups" tabindex="-1"><a class="header-anchor" href="#firewalls-or-security-groups" aria-hidden="true">#</a> Firewalls or Security Groups</h4><p>Ensure that any external firewalls or security groups allow the necessary traffic through.</p><h2 id="_6-troubleshooting-other-issues" tabindex="-1"><a class="header-anchor" href="#_6-troubleshooting-other-issues" aria-hidden="true">#</a> 6. Troubleshooting Other Issues</h2><p>When using open-source projects or any other software, you&#39;ll inevitably encounter unpredictable issues. How to elegantly troubleshoot and solve problems is an essential skill every developer and user should possess.</p><h3 id="_6-1-clearly-define-the-issue" tabindex="-1"><a class="header-anchor" href="#_6-1-clearly-define-the-issue" aria-hidden="true">#</a> 6.1 Clearly Define the Issue</h3><p>First, ensure you truly understand the problem. Randomly trying various solutions without first defining the problem is a waste of time.</p><ul><li><strong>Collect error logs</strong>: Almost all applications or software have logging features. Always check the logs for more details about the issue.</li><li><strong>Reproduce the issue</strong>: Knowing how to reproduce it before trying to solve it is crucial. If a problem can&#39;t be reliably reproduced, it&#39;s hard to solve.</li></ul><h3 id="_6-2-divide-and-conquer" tabindex="-1"><a class="header-anchor" href="#_6-2-divide-and-conquer" aria-hidden="true">#</a> 6.2 Divide and Conquer</h3><p>A productive troubleshooting strategy is to divide and conquer. This means breaking the system into different parts and testing each separately to determine where the problem lies.</p><ul><li><strong>Run components separately</strong>: For instance, if you face issues in a system using multiple services, try running each service separately to see which one has the problem.</li><li><strong>Use minimal configurations</strong>: If possible, start the application or service with the most basic configuration. Then, gradually add more configuration options until you can reproduce the issue.</li></ul><h3 id="_6-3-use-open-source-community-resources" tabindex="-1"><a class="header-anchor" href="#_6-3-use-open-source-community-resources" aria-hidden="true">#</a> 6.3 Use Open Source Community Resources</h3><ul><li><strong>Look for known issues</strong>: Most open-source projects have an issue tracker, like GitHub&#39;s Issues. First, check there to see if someone else has already reported your issue.</li><li><strong>Art of asking</strong>: If you decide to ask the community, ensure your question is clear, specific, and comes with enough detail. Include error messages, your environment details, and solutions you&#39;ve already tried.</li></ul><h3 id="_6-4-use-debugging-tools" tabindex="-1"><a class="header-anchor" href="#_6-4-use-debugging-tools" aria-hidden="true">#</a> 6.4 Use Debugging Tools</h3><ul><li><strong>Code debugging</strong>: If you&#39;re comfortable with code, using a debugger to step through the code can help you find the problem faster.</li><li><strong>Network debugging</strong>: For network issues, tools like <code>ping</code>, <code>traceroute</code>, <code>netstat</code>, and <code>wireshark</code> can be very useful.</li></ul><h3 id="_6-5-steps-after-identifying-the-issue" tabindex="-1"><a class="header-anchor" href="#_6-5-steps-after-identifying-the-issue" aria-hidden="true">#</a> 6.5 Steps After Identifying the Issue</h3><p>Once you&#39;ve identified the issue, here are some recommended next steps:</p><ul><li><strong>Look for existing fixes</strong>: Someone might have already found a fix or solution for your issue.</li><li><strong>Fix the problem</strong>: If you have the skills and resources, try fixing the problem yourself.</li><li><strong>Report the issue</strong>: Even if you&#39;ve solved the problem yourself, report it to the open-source community,</li></ul>`,116);function K(Q,E){const n=i("ExternalLinkIcon");return t(),d("div",null,[h,a("p",null,[l,a("a",u,[p,o(n)]),g]),m,a("p",null,[f,a("a",k,[b,o(n)]),v]),y,a("p",null,[x,a("a",_,[w,o(n)]),S]),M,a("p",null,[D,a("a",I,[C,o(n)]),L]),q])}const T=s(c,[["render",K],["__file","121.html.vue"]]);export{T as default};
