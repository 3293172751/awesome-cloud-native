import{_ as r,r as t,o as l,c,a as n,b as a,w as p,e as s,d as i}from"./app.2d12850e.js";const d={},u={href:"http://nsddd.top",target:"_blank",rel:"noopener noreferrer"},k=s("author"),m=n("h1",{id:"\u7B2C10\u8282-scratch\u6784\u5EFAruntime-linux",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B2C10\u8282-scratch\u6784\u5EFAruntime-linux","aria-hidden":"true"},"#"),s(" \u7B2C10\u8282 scratch\u6784\u5EFAruntime(linux)")],-1),h=n("div",null,[n("a",{href:"9.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),n("a",{href:"11.md",style:{float:"right"}}," \u2B07\uFE0F\u4E0B\u4E00\u8282\u{1F517}")],-1),b=n("br",null,null,-1),v=s("\u2764\uFE0F\u{1F495}\u{1F495}\u8BB0\u5F55"),g={href:"https://github.com/cubxxw/sealos",target:"_blank",rel:"noopener noreferrer"},f=s("sealos"),_=s("\u5F00\u6E90\u9879\u76EE\u7684\u5B66\u4E60\u8FC7\u7A0B\u3002"),y={href:"https://github.com/cubxxw/sealos",target:"_blank",rel:"noopener noreferrer"},w=s("k8s,docker\u548C\u4E91\u539F\u751F\u7684\u5B66\u4E60"),x=s("\u3002Myblog:"),q={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},D=s("http://nsddd.top"),E=i(`<hr><p>[TOC]</p><h2 id="\u5F00\u59CB" tabindex="-1"><a class="header-anchor" href="#\u5F00\u59CB" aria-hidden="true">#</a> \u5F00\u59CB</h2><h3 id="rootfs" tabindex="-1"><a class="header-anchor" href="#rootfs" aria-hidden="true">#</a> rootfs</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> <span class="token parameter variable">-O</span> rootfs.tar.xz https://ghproxy.com/https://github.com/debuerreotype/docker-debian-artifacts/raw/b024a792c752a5c6ccc422152ab0fd7197ae8860/jessie/rootfs.tar.xz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> nginx</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> <span class="token parameter variable">-O</span> nginx.conf https://ghproxy.com/https://github.diablo.corp/raw/slvi/docker-k8s-training/master/docker/res/nginx.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile" aria-hidden="true">#</a> dockerfile</h2><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> scratch</span>

<span class="token comment"># set the environment to honour SAP&#39;s proxy servers</span>
<span class="token instruction"><span class="token keyword">ENV</span> http_proxy http://sap:8080</span>
<span class="token instruction"><span class="token keyword">ENV</span> https_proxy http://sap:8080</span>
<span class="token instruction"><span class="token keyword">ENV</span> no_proxy .sap</span>

<span class="token comment"># add and unpack an archive that contains a Debian root filesystem</span>
<span class="token instruction"><span class="token keyword">ADD</span> rootfs.tar.xz /</span>

<span class="token comment"># use the apt-get package manager to install nginx and wget</span>
<span class="token instruction"><span class="token keyword">RUN</span> apt-get update &amp;&amp; <span class="token operator">\\</span>
apt-get -y install nginx wget</span>

<span class="token comment"># use wget to download a custom website into the image</span>
<span class="token instruction"><span class="token keyword">RUN</span> wget --no-check-certificate -O /usr/share/nginx/html/cheers.jpg https://ghproxy.com/https://github.diablo.corp/raw/slvi/docker-k8s-training/master/docker/res/cheers.jpg &amp;&amp; <span class="token operator">\\</span>
wget --no-check-certificate -O /usr/share/nginx/html/index.html https://ghproxy.com/https://github.diablo.corp/raw/slvi/docker-k8s-training/master/docker/res/cheers.html</span>

<span class="token comment"># copy the custom nginx configuration into the image</span>
<span class="token instruction"><span class="token keyword">COPY</span> nginx.conf /etc/nginx/nginx.conf</span>

<span class="token comment"># link nginx log files to Docker log collection facility</span>
<span class="token instruction"><span class="token keyword">RUN</span> ln -sf /dev/stdout /var/log/nginx/access.log &amp;&amp; <span class="token operator">\\</span>
ln -sf /dev/stderr /var/log/nginx/error.log</span>

<span class="token comment"># expose port 80 - the standard port for webservers</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span>

<span class="token comment"># and make sure that nginx runs when a container is created</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;nginx&quot;</span>, <span class="token string">&quot;-g&quot;</span>, <span class="token string">&quot;daemon off;&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u6784\u5EFA" tabindex="-1"><a class="header-anchor" href="#\u6784\u5EFA" aria-hidden="true">#</a> \u6784\u5EFA</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-t</span> mylinux:1.0 <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u6548\u679C" tabindex="-1"><a class="header-anchor" href="#\u6548\u679C" aria-hidden="true">#</a> \u6548\u679C</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>root@ubuntu:/c/rootfs-linux<span class="token comment"># docker run -it a53ceeb37a0b /bin/bash</span>
root@74533e6a5638:/<span class="token comment"># ls</span>
bin   dev  home  lib64	mnt  proc  run	 srv  tmp  var
boot  etc  lib	 media	opt  root  sbin  sys  usr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>profile:</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>root@74533e6a5638:/bin<span class="token comment"># cat /etc/profile</span>
<span class="token comment"># /etc/profile: system-wide .profile file for the Bourne shell (sh(1))</span>
<span class="token comment"># and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">\`</span><span class="token function">id</span> <span class="token parameter variable">-u</span><span class="token variable">\`</span></span>&quot;</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>
<span class="token keyword">else</span>
  <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">&quot;/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">export</span> <span class="token environment constant">PATH</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token environment constant">$PS1</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token environment constant">$BASH</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token environment constant">$BASH</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;/bin/sh&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token comment"># The file bash.bashrc already sets the default PS1.</span>
    <span class="token comment"># PS1=&#39;\\h:\\w\\$ &#39;</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/bash.bashrc <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">.</span> /etc/bash.bashrc
    <span class="token keyword">fi</span>
  <span class="token keyword">else</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">\`</span><span class="token function">id</span> <span class="token parameter variable">-u</span><span class="token variable">\`</span></span>&quot;</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">&#39;# &#39;</span>
    <span class="token keyword">else</span>
      <span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">&#39;$ &#39;</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">fi</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> /etc/profile.d <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> /etc/profile.d/*.sh<span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-r</span> <span class="token variable">$i</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">.</span> <span class="token variable">$i</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">done</span>
  <span class="token builtin class-name">unset</span> i
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dockerfile-ubuntu-\u6784\u5EFA\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#dockerfile-ubuntu-\u6784\u5EFA\u65B9\u5F0F" aria-hidden="true">#</a> dockerfile-ubuntu \u6784\u5EFA\u65B9\u5F0F</h2>`,16),A={href:"https://github.com/dockerfile/ubuntu",target:"_blank",rel:"noopener noreferrer"},N=s("GitHub\u4ED3\u5E93\u5730\u5740"),R=n("h3",{id:"readme",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#readme","aria-hidden":"true"},"#"),s(" README")],-1),C=s("This repository contains "),P=n("strong",null,"Dockerfile",-1),S=s(" of "),O={href:"http://www.ubuntu.com/",target:"_blank",rel:"noopener noreferrer"},B=s("Ubuntu"),H=s(" for "),V={href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"},$=s("Docker"),I=s("'s "),M={href:"https://registry.hub.docker.com/u/dockerfile/ubuntu/",target:"_blank",rel:"noopener noreferrer"},T=s("automated build"),U=s(" published to the public "),z={href:"https://registry.hub.docker.com/",target:"_blank",rel:"noopener noreferrer"},L=s("Docker Hub Registry"),j=s("."),F=n("h3",{id:"base-docker-image",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#base-docker-image","aria-hidden":"true"},"#"),s(" Base Docker Image")],-1),W={href:"https://registry.hub.docker.com/u/library/ubuntu/",target:"_blank",rel:"noopener noreferrer"},Y=s("ubuntu:14.04"),G=n("h3",{id:"installation",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#installation","aria-hidden":"true"},"#"),s(" Installation")],-1),K=s("Install "),X={href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"},J=s("Docker"),Q=s("."),Z=s("Download "),nn={href:"https://registry.hub.docker.com/u/dockerfile/ubuntu/",target:"_blank",rel:"noopener noreferrer"},sn=s("automated build"),an=s(" from public "),en={href:"https://registry.hub.docker.com/",target:"_blank",rel:"noopener noreferrer"},tn=s("Docker Hub Registry"),on=s(": "),rn=n("code",null,"docker pull dockerfile/ubuntu",-1),ln=n("p",null,[s("(alternatively, you can build an image from Dockerfile: "),n("code",null,'docker build -t="dockerfile/ubuntu" github.com/dockerfile/ubuntu'),s(")")],-1),cn=i(`<h3 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> dockerfile/ubuntu 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="dockerfile-1" tabindex="-1"><a class="header-anchor" href="#dockerfile-1" aria-hidden="true">#</a> dockerfile</h3><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment">#</span>
<span class="token comment"># Ubuntu Dockerfile</span>
<span class="token comment">#</span>
<span class="token comment"># https://github.com/dockerfile/ubuntu</span>
<span class="token comment">#</span>

<span class="token comment"># Pull base image.</span>
<span class="token instruction"><span class="token keyword">FROM</span> ubuntu:14.04</span>

<span class="token comment"># Install.</span>
<span class="token instruction"><span class="token keyword">RUN</span> <span class="token operator">\\</span>
  sed -i <span class="token string">&#39;s/# \\(.*multiverse$\\)/\\1/g&#39;</span> /etc/apt/sources.list &amp;&amp; <span class="token operator">\\</span>
  apt-get update &amp;&amp; <span class="token operator">\\</span>
  apt-get -y upgrade &amp;&amp; <span class="token operator">\\</span>
  apt-get install -y build-essential &amp;&amp; <span class="token operator">\\</span>
  apt-get install -y software-properties-common &amp;&amp; <span class="token operator">\\</span>
  apt-get install -y byobu curl git htop man unzip vim wget &amp;&amp; <span class="token operator">\\</span>
  rm -rf /var/lib/apt/lists/*</span>

<span class="token comment"># Add files.</span>
<span class="token instruction"><span class="token keyword">ADD</span> root/.bashrc /root/.bashrc</span>
<span class="token instruction"><span class="token keyword">ADD</span> root/.gitconfig /root/.gitconfig</span>
<span class="token instruction"><span class="token keyword">ADD</span> root/.scripts /root/.scripts</span>

<span class="token comment"># Set environment variables.</span>
<span class="token instruction"><span class="token keyword">ENV</span> HOME /root</span>

<span class="token comment"># Define working directory.</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /root</span>

<span class="token comment"># Define default command.</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;bash&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="user" tabindex="-1"><a class="header-anchor" href="#user" aria-hidden="true">#</a> user</h2><div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p><p>\u5B98\u7F51\u7684\u6784\u5EFA\u65B9\u5F0F\u5F80\u5F80\u6700\u503C\u5F97\u53C2\u8003\u548C\u5B66\u4E60\uFF0C\u6784\u5EFA\u7684\u8BED\u6CD5\u4E5F\u662F\u975E\u5E38good</p></div><h3 id="pull" tabindex="-1"><a class="header-anchor" href="#pull" aria-hidden="true">#</a> pull</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://ghproxy.com/https://github.com/dockerfile/ubuntu.git<span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> ubuntu
<span class="token function">docker</span> build <span class="token parameter variable">-t</span> dockerfile/ubuntu:1.0 <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#end-\u94FE\u63A5" aria-hidden="true">#</a> END \u94FE\u63A5</h2>`,9),pn=s("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),dn={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},un=n("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),kn=s(")"),mn=s("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),hn={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},bn=s("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function vn(gn,fn){const e=t("ExternalLinkIcon"),o=t("RouterLink");return l(),c("div",null,[n("ul",null,[n("li",null,[n("a",u,[k,a(e)])])]),m,h,b,n("blockquote",null,[n("p",null,[v,n("a",g,[f,a(e)]),_,n("a",y,[w,a(e)]),x,n("a",q,[D,a(e)])])]),E,n("ul",null,[n("li",null,[n("a",A,[N,a(e)])])]),R,n("p",null,[C,P,S,n("a",O,[B,a(e)]),H,n("a",V,[$,a(e)]),I,n("a",M,[T,a(e)]),U,n("a",z,[L,a(e)]),j]),F,n("ul",null,[n("li",null,[n("a",W,[Y,a(e)])])]),G,n("ol",null,[n("li",null,[n("p",null,[K,n("a",X,[J,a(e)]),Q])]),n("li",null,[n("p",null,[Z,n("a",nn,[sn,a(e)]),an,n("a",en,[tn,a(e)]),on,rn]),ln])]),cn,n("ul",null,[n("li",null,[n("p",null,[a(o,{to:"/"},{default:p(()=>[pn]),_:1})])]),n("li",null,[n("p",null,[n("a",dn,[un,a(e)]),kn])]),n("li",null,[n("p",null,[mn,n("a",hn,[bn,a(e)])])])])])}const yn=r(d,[["render",vn],["__file","10.html.vue"]]);export{yn as default};
