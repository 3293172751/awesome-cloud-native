import{_ as o,r,o as l,c as d,a as e,b as n,w as c,e as a,d as s}from"./app.9f3e6cab.js";const h={},m={href:"http://nsddd.top",target:"_blank",rel:"noopener noreferrer"},p=a("author"),u=e("h1",{id:"\u7B2C80\u8282-openim-helm-charts-\u8BBE\u8BA1",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u7B2C80\u8282-openim-helm-charts-\u8BBE\u8BA1","aria-hidden":"true"},"#"),a(" \u7B2C80\u8282 OpenIM Helm Charts \u8BBE\u8BA1")],-1),f=e("div",null,[e("a",{href:"79.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),e("a",{href:"81.md",style:{float:"right"}}," \u2B07\uFE0F\u4E0B\u4E00\u8282\u{1F517}")],-1),g=e("br",null,null,-1),v=a("\u2764\uFE0F\u{1F495}\u{1F495}\u65B0\u65F6\u4EE3\u62E5\u62B1\u4E91\u539F\u751F\uFF0C\u4E91\u539F\u751F\u5177\u6709\u73AF\u5883\u7EDF\u4E00\u3001\u6309\u9700\u4ED8\u8D39\u3001\u5373\u5F00\u5373\u7528\u3001\u7A33\u5B9A\u6027\u5F3A\u7279\u70B9\u3002Myblog:"),b={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},_=a("http://nsddd.top"),x=s('<hr><p>[TOC]</p><h1 id="openim-helm-charts" tabindex="-1"><a class="header-anchor" href="#openim-helm-charts" aria-hidden="true">#</a> OpenIM Helm Charts</h1><p>OpenIM Helm Charts \u7528\u4E8E\u5728 Kubernetes \u96C6\u7FA4\u4E0A\u8F7B\u677E\u90E8\u7F72\u548C\u7BA1\u7406 OpenIM \u5373\u65F6\u6D88\u606F\u901A\u4FE1\u5E73\u53F0\u53CA\u5176\u76F8\u5173\u4E2D\u95F4\u4EF6\u3002</p><h2 id="\u524D\u63D0\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u524D\u63D0\u6761\u4EF6" aria-hidden="true">#</a> \u524D\u63D0\u6761\u4EF6</h2><ul><li>\u5DF2\u5B89\u88C5\u5E76\u914D\u7F6E\u597D\u7684 Kubernetes\uFF08K8s\uFF09\u73AF\u5883\u3002</li><li>\u81F3\u5C11\u6709\u4E24\u4E2A\u53EF\u7528\u7684\u57DF\u540D\uFF1A\u4E00\u4E2A\u7528\u4E8E MinIO API \u8BBF\u95EE\uFF0C\u53E6\u4E00\u4E2A\u7528\u4E8E OpenIM Server API \u8BBF\u95EE\u3002</li><li>\u5DF2\u914D\u7F6E\u7684 StorageClass\uFF08\u6B64\u793A\u4F8B\u4F7F\u7528 NFS-Client\uFF09\u3002</li><li>\uFF08\u53EF\u9009\uFF09\u5982\u679C\u60A8\u7684 K8s \u7CFB\u7EDF\u7684 Ingress Controller \u8282\u70B9\u914D\u7F6E\u4E86 LoadBalancer\uFF0C\u6240\u6709 <code>-config.yaml</code> \u6587\u4EF6\u4E2D\u7684\u57DF\u540D\u4FE1\u606F\u65E0\u9700\u914D\u7F6E TLS \u9879\u3002</li></ul><blockquote><p><strong>\u6CE8\u610F</strong>\uFF1A\u4E0B\u4E2A\u7248\u672C\u5C06\u63A8\u51FA\u57FA\u4E8E\u5355\u4E00\u57DF\u540D\u8BBF\u95EE\u548C\u57FA\u4E8E IP \u7684 URL \u8BBF\u95EE\u529F\u80FD\u3002</p></blockquote><h2 id="\u7528\u6237\u6307\u5357" tabindex="-1"><a class="header-anchor" href="#\u7528\u6237\u6307\u5357" aria-hidden="true">#</a> \u7528\u6237\u6307\u5357</h2>',8),y=a("\u8981\u4F7F\u7528\u8FD9\u4E9B Helm Charts\uFF0C\u60A8\u9700\u8981\u5148\u5B89\u88C5 "),k={href:"https://helm.sh/",target:"_blank",rel:"noopener noreferrer"},C=a("Helm"),I=a("\u3002\u8BF7\u53C2\u8003 Helm \u7684 "),E={href:"https://helm.sh/docs/",target:"_blank",rel:"noopener noreferrer"},w=a("\u6587\u6863"),M=a(" \u6765\u5F00\u59CB\u4F7F\u7528 Helm\u3002"),q=s(`<p>\u4E00\u65E6 Helm \u5B89\u88C5\u5B8C\u6BD5\uFF0C\u8BF7\u6309\u5982\u4E0B\u65B9\u5F0F\u6DFB\u52A0 Helm \u4ED3\u5E93\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm repo add openim https://openim.github.io/helm-charts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u63A5\u4E0B\u6765\uFF0C\u60A8\u53EF\u4EE5\u8FD0\u884C <code>helm search repo openim</code> \u6765\u67E5\u770B\u53EF\u7528\u7684 Charts\u3002</p><h3 id="\u5B89\u88C5-chart" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-chart" aria-hidden="true">#</a> \u5B89\u88C5 Chart</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm install [RELEASE_NAME] openim/openim-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,5),A=a("\u67E5\u770B\u4E0B\u9762\u7684"),S={href:"https://github.com/openim/helm-charts/tree/main/charts/",target:"_blank",rel:"noopener noreferrer"},O=a("\u914D\u7F6E"),H=a("\u4FE1\u606F\u3002"),L=a("\u6709\u5173\u547D\u4EE4\u6587\u6863\uFF0C\u8BF7\u53C2\u8003 "),R={href:"https://helm.sh/docs/helm/helm_install/",target:"_blank",rel:"noopener noreferrer"},N=a("helm install"),K=a("\u3002"),T=s(`<h3 id="\u5378\u8F7D-chart" tabindex="-1"><a class="header-anchor" href="#\u5378\u8F7D-chart" aria-hidden="true">#</a> \u5378\u8F7D Chart</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm uninstall [RELEASE_NAME]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u5C06\u5220\u9664\u4E0E Chart \u76F8\u5173\u7684\u6240\u6709 Kubernetes \u7EC4\u4EF6\u5E76\u5378\u8F7D\u53D1\u5E03\u3002</p>`,3),P=a("\u6709\u5173\u547D\u4EE4\u6587\u6863\uFF0C\u8BF7\u53C2\u8003 "),B={href:"https://helm.sh/docs/helm/helm_uninstall/",target:"_blank",rel:"noopener noreferrer"},F=a("helm uninstall"),D=a("\u3002"),U=s(`<h3 id="\u5347\u7EA7-chart" tabindex="-1"><a class="header-anchor" href="#\u5347\u7EA7-chart" aria-hidden="true">#</a> \u5347\u7EA7 Chart</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm upgrade [RELEASE_NAME] [CHART] --install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),V=a("\u6709\u5173\u547D\u4EE4\u6587\u6863\uFF0C\u8BF7\u53C2\u8003 "),z={href:"https://helm.sh/docs/helm/helm_upgrade/",target:"_blank",rel:"noopener noreferrer"},Q=a("helm upgrade"),W=a("\u3002"),G=s(`<h3 id="\u5217\u51FA\u53D1\u5E03" tabindex="-1"><a class="header-anchor" href="#\u5217\u51FA\u53D1\u5E03" aria-hidden="true">#</a> \u5217\u51FA\u53D1\u5E03</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u76EE\u5F55\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u76EE\u5F55\u7ED3\u6784" aria-hidden="true">#</a> \u76EE\u5F55\u7ED3\u6784</h2><h3 id="adminfront" tabindex="-1"><a class="header-anchor" href="#adminfront" aria-hidden="true">#</a> adminfront</h3><p>\u8FD9\u4E2A\u76EE\u5F55\u5305\u542B\u4E86 &quot;adminfront&quot; \u670D\u52A1\u7684 Helm Chart\u3002</p><ul><li><code>Chart.yaml</code>: \u5305\u542B\u4E86 Chart \u7684\u57FA\u672C\u4FE1\u606F\u548C\u7248\u672C\u3002</li><li><code>templates/</code>: \u5305\u542B\u4E86 Kubernetes \u6A21\u677F\u6587\u4EF6\u3002</li><li><code>values.yaml</code>: \u9ED8\u8BA4\u914D\u7F6E\u6587\u4EF6\u3002</li></ul><h3 id="adminfront-config-yaml" tabindex="-1"><a class="header-anchor" href="#adminfront-config-yaml" aria-hidden="true">#</a> adminfront-config.yaml</h3><p>\u5305\u542B\u4E86 &quot;adminfront&quot; \u670D\u52A1\u7684\u81EA\u5B9A\u4E49\u914D\u7F6E\u4FE1\u606F\u3002</p><h3 id="chat-server" tabindex="-1"><a class="header-anchor" href="#chat-server" aria-hidden="true">#</a> chat-server</h3><p>\u8FD9\u4E2A\u76EE\u5F55\u5305\u542B\u4E86 &quot;chat-server&quot; \u670D\u52A1\u7684 Helm Chart\u3002</p><ul><li><code>Chart.yaml</code>: \u5305\u542B\u4E86 Chart \u7684\u57FA\u672C\u4FE1\u606F\u548C\u7248\u672C\u3002</li><li><code>charts/</code>: (\u53EF\u9009) \u5982\u679C Chart \u4F9D\u8D56\u5176\u4ED6 Chart\uFF0C\u53EF\u4EE5\u5C06\u5B83\u4EEC\u653E\u5728\u8FD9\u4E2A\u76EE\u5F55\u4E0B\u3002</li><li><code>templates/</code>: \u5305\u542B\u4E86 Kubernetes \u6A21\u677F\u6587\u4EF6\u3002</li><li><code>values.yaml</code>: \u9ED8\u8BA4\u914D\u7F6E\u6587\u4EF6\u3002</li></ul><h3 id="infra" tabindex="-1"><a class="header-anchor" href="#infra" aria-hidden="true">#</a> infra</h3><p>\u8FD9\u4E2A\u76EE\u5F55\u5305\u542B\u4E86 OpenIM \u6240\u4F9D\u8D56\u7684\u6240\u6709\u4E2D\u95F4\u4EF6\u7684 Helm Charts \u6216\u76F8\u5173\u914D\u7F6E\u3002</p><ul><li><code>ingress-nginx</code>, <code>kafka</code>, <code>minio</code>, <code>mongodb</code>, <code>mysql</code>, <code>nfs-subdir-external-provisioner</code>, <code>redis</code>: \u8FD9\u4E9B\u76EE\u5F55\u53EF\u80FD\u5305\u542B\u4E86\u5BF9\u5E94\u4E2D\u95F4\u4EF6\u7684 Helm Charts\u3002</li><li><code>kafka-config.yaml</code>, <code>minio-config.yaml</code>, <code>mongodb-config.yaml</code>, <code>mysql-config.yaml</code>, <code>redis-config.yaml</code>: \u8FD9\u4E9B\u6587\u4EF6\u5305\u542B\u4E86\u5BF9\u5E94\u4E2D\u95F4\u4EF6\u7684\u81EA\u5B9A\u4E49\u914D\u7F6E\u3002</li></ul><h2 id="\u524D\u63D0\u6761\u4EF6-1" tabindex="-1"><a class="header-anchor" href="#\u524D\u63D0\u6761\u4EF6-1" aria-hidden="true">#</a> \u524D\u63D0\u6761\u4EF6</h2><ul><li>\u5DF2\u5B89\u88C5\u5E76\u914D\u7F6E\u597D\u7684 Kubernetes\uFF08K8s\uFF09\u73AF\u5883\u3002</li><li>\u81F3\u5C11\u6709\u4E24\u4E2A\u53EF\u7528\u7684\u57DF\u540D\uFF1A\u4E00\u4E2A\u7528\u4E8E MinIO API \u8BBF\u95EE\uFF0C\u53E6\u4E00\u4E2A\u7528\u4E8E OpenIM Server API \u8BBF\u95EE\u3002</li><li>\u5DF2\u914D\u7F6E\u7684 StorageClass\uFF08\u6B64\u793A\u4F8B\u4F7F\u7528 NFS-Client\uFF09\u3002</li><li>\uFF08\u53EF\u9009\uFF09\u5982\u679C\u60A8\u7684 K8s \u7CFB\u7EDF\u7684 Ingress Controller \u8282\u70B9\u914D\u7F6E\u4E86 LoadBalancer\uFF0C\u6240\u6709 <code>-config.yaml</code> \u6587\u4EF6\u4E2D\u7684\u57DF\u540D\u4FE1\u606F\u65E0\u9700\u914D\u7F6E TLS \u9879\u3002</li></ul><blockquote><p>\u6CE8\u610F\uFF1A\u4E0B\u4E2A\u7248\u672C\u5C06\u63A8\u51FA\u57FA\u4E8E\u5355\u4E00\u57DF\u540D\u8BBF\u95EE\u548C\u57FA\u4E8E IP \u7684 URL \u8BBF\u95EE\u529F\u80FD\u3002</p></blockquote><h2 id="\u5B89\u88C5\u4E2D\u95F4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u4E2D\u95F4\u4EF6" aria-hidden="true">#</a> \u5B89\u88C5\u4E2D\u95F4\u4EF6</h2><p>\u5728\u90E8\u7F72 OpenIM \u670D\u52A1\u4E4B\u524D\uFF0C\u6211\u4EEC\u9700\u8981\u90E8\u7F72\u4E00\u4E9B\u4F9D\u8D56\u7684\u4E2D\u95F4\u4EF6\u670D\u52A1\u3002</p><p>\u4E3A\u4E86\u65B9\u4FBF\u90E8\u7F72\u548C\u7BA1\u7406\uFF0C\u6211\u4EEC\u4E3A\u8FD9\u4E9B\u4E2D\u95F4\u4EF6\u63D0\u4F9B\u4E86\u4E00\u5957 Helm Charts\uFF0C\u5B83\u4EEC\u4F4D\u4E8E infra \u76EE\u5F55\u4E0B\u3002</p><p>\u4EE5\u4E0B\u547D\u4EE4\u5C06\u5206\u522B\u5B89\u88C5 MySQL\u3001Kafka\u3001MinIO\u3001MongoDB \u548C Redis \u4E2D\u95F4\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm repo <span class="token function">add</span> openim-infra https://xxxxx.xxx
helm <span class="token function">install</span> im-mysql im-infra/mysql <span class="token parameter variable">-f</span> mysql-config.yaml
helm <span class="token function">install</span> im-kafka im-infra/kafka <span class="token parameter variable">-f</span> kafka-config.yaml
helm <span class="token function">install</span> im-minio im-infra/minio <span class="token parameter variable">-f</span> minio-config.yaml
helm <span class="token function">install</span> im-mongodb im-infra/mongodb <span class="token parameter variable">-f</span> mongodb-config.yaml
helm <span class="token function">install</span> im-redis im-infra/redis <span class="token parameter variable">-f</span> redis-config.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>\u6CE8\u610F</strong></p><p>\u5982\u679C OpenIM \u96C6\u7FA4\u90E8\u7F72\u5728 <code>openim</code> \u547D\u540D\u7A7A\u95F4\u4E2D\uFF0C\u5219\u9700\u8981\u4F7F\u7528 <code>-n</code> \u53C2\u6570\u6307\u5B9A\u547D\u540D\u7A7A\u95F4\u3002\u5982\u679C\u547D\u540D\u7A7A\u95F4\u4E0D\u5B58\u5728\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>--create-namespace</code> \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u547D\u540D\u7A7A\u95F4\u3002</p></blockquote><p>\u8FD9\u4E9B\u914D\u7F6E\u6587\u4EF6\u5305\u62EC\u8D26\u6237\u4FE1\u606F\uFF0C\u4F8B\u5982 <code>minio-config.yaml</code> \u8FD8\u5305\u62EC\u57DF\u540D\u4FE1\u606F\u3002</p><h2 id="\u5B89\u88C5-openim-server-\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-openim-server-\u670D\u52A1" aria-hidden="true">#</a> \u5B89\u88C5 OpenIM Server \u670D\u52A1</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm <span class="token function">install</span> openim-server <span class="token parameter variable">-f</span> open-im-server-config.yaml <span class="token parameter variable">-f</span> notification.yaml ./openim/open-im-server/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BF7\u786E\u4FDD\u5728 <code>open-im-server-config.yaml</code> \u4E2D\u914D\u7F6E\u57DF\u540D\u4FE1\u606F\u3002\u8D26\u6237\u4FE1\u606F\u9ED8\u8BA4\u4E0E\u4E2D\u95F4\u4EF6\uFF08infra/\uFF09\u7684 <code>-config.yaml</code> \u6587\u4EF6\u540C\u6B65\u3002\u5982\u679C\u5728\u5B89\u88C5\u4E2D\u95F4\u4EF6\u65F6\u4FEE\u6539\u4E86 <code>config.yaml</code>\uFF0C\u8BF7\u540C\u6B65\u4FEE\u6539 <code>open-im-server-config.yaml</code>\u3002</p><h2 id="\u5B89\u88C5-openim-chat-\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-openim-chat-\u670D\u52A1" aria-hidden="true">#</a> \u5B89\u88C5 OpenIM Chat \u670D\u52A1</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>bashCopy code
helm install openim-chat -f chat-server-config.yaml ./openim/openim-chat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BF7\u786E\u4FDD\u5728 <code>chat-server-config.yaml</code> \u4E2D\u914D\u7F6E\u57DF\u540D\u4FE1\u606F\u3002\u8D26\u6237\u4FE1\u606F\u9ED8\u8BA4\u4E0E\u4E2D\u95F4\u4EF6\u7684 <code>-config.yaml</code> \u6587\u4EF6\u540C\u6B65\u3002\u5982\u679C\u5728\u5B89\u88C5\u4E2D\u95F4\u4EF6\u65F6\u4FEE\u6539\u4E86 <code>config.yaml</code>\uFF0C\u8BF7\u540C\u6B65\u4FEE\u6539 <code>chat-server-config.yaml</code>\u3002</p><h2 id="\u5B89\u88C5-webfront" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-webfront" aria-hidden="true">#</a> \u5B89\u88C5 Webfront</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm <span class="token function">install</span> imwebfront <span class="token parameter variable">-f</span> webfront-config.yaml ./webfront/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BF7\u786E\u4FDD\u5728 <code>webfront-config.yaml</code> \u4E2D\u914D\u7F6E\u4E86\u57DF\u540D\u4FE1\u606F\u3002</p><h2 id="\u5B89\u88C5-adminfront" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-adminfront" aria-hidden="true">#</a> \u5B89\u88C5 Adminfront</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm install imadminfront -f adminfront-config.yaml ./adminfront/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BF7\u786E\u4FDD\u5728 <code>adminfront-config.yaml</code> \u4E2D\u914D\u7F6E\u4E86\u57DF\u540D\u4FE1\u606F\u3002</p><h2 id="\u5378\u8F7D\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u5378\u8F7D\u65B9\u6CD5" aria-hidden="true">#</a> \u5378\u8F7D\u65B9\u6CD5</h2><p>\u5982\u679C\u60A8\u9700\u8981\u5378\u8F7D OpenIM \u53CA\u5176\u76F8\u5173\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B Helm \u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm uninstall [RELEASE_NAME]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5176\u4E2D <code>[RELEASE_NAME]</code> \u662F\u60A8\u5728\u5B89\u88C5\u65F6\u6307\u5B9A\u7684\u540D\u79F0\uFF0C\u4F8B\u5982 <code>openimserver</code>\u3002</p><h2 id="\u8C03\u8BD5-helm-charts" tabindex="-1"><a class="header-anchor" href="#\u8C03\u8BD5-helm-charts" aria-hidden="true">#</a> \u8C03\u8BD5 Helm Charts</h2><p>\u5982\u679C\u60A8\u9700\u8981\u8C03\u8BD5 Helm Charts\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm install [RELEASE_NAME] [CHART] --dry-run --debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6216\u8005\u4F7F\u7528 <code>helm template</code> \u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm template [CHART] --name [RELEASE_NAME] --debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u66F4\u591A\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u66F4\u591A\u4FE1\u606F" aria-hidden="true">#</a> \u66F4\u591A\u4FE1\u606F</h2>`,46),Y=a("\u8981\u4E86\u89E3\u6709\u5173 OpenIM \u548C\u5404\u4E2A\u7EC4\u4EF6\u7684\u914D\u7F6E\u548C\u4F7F\u7528\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u8BBF\u95EE"),j={href:"https://docs.openim.io/",target:"_blank",rel:"noopener noreferrer"},J=a("OpenIM\u5B98\u65B9\u6587\u6863"),X=a("\u3002"),Z=s('<h1 id="response-and-translation-into-english" tabindex="-1"><a class="header-anchor" href="#response-and-translation-into-english" aria-hidden="true">#</a> Response and Translation into English:</h1><h2 id="openim-helm-charts-1" tabindex="-1"><a class="header-anchor" href="#openim-helm-charts-1" aria-hidden="true">#</a> OpenIM Helm Charts</h2><p>OpenIM Helm Charts are utilized for easy deployment and management of the OpenIM instant messaging platform and its related middleware on Kubernetes clusters.</p><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites" aria-hidden="true">#</a> Prerequisites</h2><ul><li>Installed and configured Kubernetes (K8s) environment.</li><li>At least two available domain names: one for MinIO API access, and another for OpenIM Server API access.</li><li>Configured StorageClass (this example uses NFS-Client).</li><li>(Optional) If your K8s system\u2019s Ingress Controller nodes are configured with LoadBalancer, all domain information in <code>-config.yaml</code> files do not need to configure TLS items.</li></ul><blockquote><p><strong>Note</strong>: The next version will introduce single domain access and IP-based URL access features.</p></blockquote><h2 id="user-guide" tabindex="-1"><a class="header-anchor" href="#user-guide" aria-hidden="true">#</a> User Guide</h2>',7),$=a("To use these Helm Charts, you first need to install "),ee={href:"https://helm.sh/",target:"_blank",rel:"noopener noreferrer"},ae=a("Helm"),ne=a(". Please refer to Helm's "),ie={href:"https://helm.sh/docs/",target:"_blank",rel:"noopener noreferrer"},se=a("documentation"),re=a(" to get started with Helm."),te=s(`<p>Once Helm is installed, add the Helm repository as follows:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm repo add openim https://openim.github.io/helm-charts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Next, you can run <code>helm search repo openim</code> to view the available Charts.</p><h3 id="install-chart" tabindex="-1"><a class="header-anchor" href="#install-chart" aria-hidden="true">#</a> Install Chart</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm install [RELEASE_NAME] openim/openim-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,5),oe=a("See the "),le={href:"https://github.com/openim/helm-charts/tree/main/charts/",target:"_blank",rel:"noopener noreferrer"},de=a("configuration"),ce=a(" information below."),he=a("For command documentation, refer to "),me={href:"https://helm.sh/docs/helm/helm_install/",target:"_blank",rel:"noopener noreferrer"},pe=a("helm install"),ue=a("."),fe=s(`<h3 id="uninstall-chart" tabindex="-1"><a class="header-anchor" href="#uninstall-chart" aria-hidden="true">#</a> Uninstall Chart</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm uninstall [RELEASE_NAME]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This will delete all Kubernetes components related to the Chart and uninstall the release.</p>`,3),ge=a("For command documentation, refer to "),ve={href:"https://helm.sh/docs/helm/helm_uninstall/",target:"_blank",rel:"noopener noreferrer"},be=a("helm uninstall"),_e=a("."),xe=s(`<h3 id="upgrade-chart" tabindex="-1"><a class="header-anchor" href="#upgrade-chart" aria-hidden="true">#</a> Upgrade Chart</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>helm upgrade [RELEASE_NAME] [CHART] --install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),ye=a("For command documentation, refer to "),ke={href:"https://helm.sh/docs/helm/helm_upgrade/",target:"_blank",rel:"noopener noreferrer"},Ce=a("helm upgrade"),Ie=a("."),Ee=s(`<h3 id="list-releases" tabindex="-1"><a class="header-anchor" href="#list-releases" aria-hidden="true">#</a> List Releases</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="directory-structure" tabindex="-1"><a class="header-anchor" href="#directory-structure" aria-hidden="true">#</a> Directory Structure</h2><h3 id="adminfront-1" tabindex="-1"><a class="header-anchor" href="#adminfront-1" aria-hidden="true">#</a> adminfront</h3><p>This directory contains the Helm Chart for the &quot;adminfront&quot; service.</p><ul><li><code>Chart.yaml</code>: Contains basic information and version of the Chart.</li><li><code>templates/</code>: Contains Kubernetes template files.</li><li><code>values.yaml</code>: Default configuration file.</li></ul><h3 id="adminfront-config-yaml-1" tabindex="-1"><a class="header-anchor" href="#adminfront-config-yaml-1" aria-hidden="true">#</a> adminfront-config.yaml</h3><p>Contains custom configuration information for the &quot;adminfront&quot; service.</p><h3 id="chat-server-1" tabindex="-1"><a class="header-anchor" href="#chat-server-1" aria-hidden="true">#</a> chat-server</h3><p>This directory contains the Helm Chart for the &quot;chat-server&quot; service.</p><ul><li><code>Chart.yaml</code>: Contains basic information and version of the Chart.</li><li><code>charts/</code>: (Optional) If the Chart depends on other Charts, they can be placed in this directory.</li><li><code>templates/</code>: Contains Kubernetes template files.</li><li><code>values.yaml</code>: Default configuration file.</li></ul><h3 id="infra-1" tabindex="-1"><a class="header-anchor" href="#infra-1" aria-hidden="true">#</a> infra</h3><p>This directory contains all Helm Charts or related configurations for the middleware that OpenIM depends on.</p><ul><li><code>ingress-nginx</code>, <code>kafka</code>, <code>minio</code>, <code>mongodb</code>, <code>mysql</code>, <code>nfs-subdir-external-provisioner</code>, <code>redis</code>: These directories may contain Helm Charts for the corresponding middleware.</li><li><code>kafka-config.yaml</code>, <code>minio-config.yaml</code>, <code>mongodb-config.yaml</code>, <code>mysql-config.yaml</code>, <code>redis-config.yaml</code>: These files contain custom configurations for the corresponding middleware.</li></ul><h2 id="prerequisites-1" tabindex="-1"><a class="header-anchor" href="#prerequisites-1" aria-hidden="true">#</a> Prerequisites</h2><ul><li>Installed and configured Kubernetes (K8s) environment.</li><li>At least two available domain names: one for MinIO API access, and another for OpenIM Server API access.</li><li>Configured StorageClass (this example uses NFS-Client).</li><li>(Optional) If your K8s system\u2019s Ingress Controller nodes are configured with LoadBalancer, all domain information in <code>-config.yaml</code> files do not need to configure TLS items.</li></ul><blockquote><p>Note: The next version will introduce single domain access and IP-based URL access features.</p></blockquote><h2 id="install-middleware" tabindex="-1"><a class="header-anchor" href="#install-middleware" aria-hidden="true">#</a> Install Middleware</h2><p>Before deploying the OpenIM services, we need to deploy some dependent middleware services.</p><p>For easy deployment and management, we provide a set of Helm Charts for these middleware, located in the infra directory.</p><p>The following commands will respectively install MySQL, Kafka, MinIO, MongoDB, and Redis middleware:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm repo <span class="token function">add</span> openim-infra https://xxxxx.xxx
helm <span class="token function">install</span> im-mysql im-infra/mysql <span class="token parameter variable">-f</span> mysql-config.yaml
helm <span class="token function">install</span> im-kafka im-infra/kafka <span class="token parameter variable">-f</span> kafka-config.yaml
helm <span class="token function">install</span> im-minio im-infra/minio <span class="token parameter variable">-f</span> minio-config.yaml
helm <span class="token function">install</span> im-mongodb im-infra/mongodb <span class="token parameter variable">-f</span> mongodb-config.yaml
helm <span class="token function">install</span> im-redis im-infra/redis <span class="token parameter variable">-f</span> redis-config.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Note</strong></p><p>If the OpenIM cluster is deployed in the <code>openim</code> namespace, use the <code>-n</code> argument to specify the namespace. If the namespace does not exist, you can use <code>--create-namespace</code> to create a new namespace.</p></blockquote><p>These configuration files include account information, for example, <code>minio-config.yaml</code> also includes domain information.</p><h2 id="install-openim-server-service" tabindex="-1"><a class="header-anchor" href="#install-openim-server-service" aria-hidden="true">#</a> Install OpenIM Server Service</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm <span class="token function">install</span> openim-server <span class="token parameter variable">-f</span> open-im-server-config.yaml <span class="token parameter variable">-f</span> notification.yaml ./openim/open-im-server/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Ensure that the domain information is configured in <code>open-im-server-config.yaml</code>. Account information defaults to sync with the middleware (<code>infra/</code>) <code>-config.yaml</code> files. If <code>config.yaml</code> was modified when installing the middleware, please sync modify <code>open-im-server-config.yaml</code>.</p><h2 id="install-openim-chat-service" tabindex="-1"><a class="header-anchor" href="#install-openim-chat-service" aria-hidden="true">#</a> Install OpenIM Chat Service</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm <span class="token function">install</span> openim-chat <span class="token parameter variable">-f</span> chat-server-config.yaml ./openim/openim-chat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Ensure that the domain information is configured in <code>chat-server-config.yaml</code>. Account information defaults to sync with the middleware <code>-config.yaml</code> files. If <code>config.yaml</code> was modified when installing the middleware, please sync modify <code>chat-server-config.yaml</code>.</p><h2 id="end-\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#end-\u94FE\u63A5" aria-hidden="true">#</a> END \u94FE\u63A5</h2><ul><li><div><a href="79.md" style="float:left;">\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} </a><a href="81.md" style="float:right;"> \uFE0F\u4E0B\u4E00\u8282\u{1F517}</a></div></li></ul>`,32),we=a("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),Me={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},qe=e("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),Ae=a(")"),Se=a("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),Oe={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},He=a("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function Le(Re,Ne){const i=r("ExternalLinkIcon"),t=r("RouterLink");return l(),d("div",null,[e("ul",null,[e("li",null,[e("a",m,[p,n(i)])])]),u,f,g,e("blockquote",null,[e("p",null,[v,e("a",b,[_,n(i)])])]),x,e("p",null,[y,e("a",k,[C,n(i)]),I,e("a",E,[w,n(i)]),M]),q,e("p",null,[e("em",null,[A,e("a",S,[O,n(i)]),H])]),e("p",null,[e("em",null,[L,e("a",R,[N,n(i)]),K])]),T,e("p",null,[e("em",null,[P,e("a",B,[F,n(i)]),D])]),U,e("p",null,[e("em",null,[V,e("a",z,[Q,n(i)]),W])]),G,e("p",null,[Y,e("a",j,[J,n(i)]),X]),Z,e("p",null,[$,e("a",ee,[ae,n(i)]),ne,e("a",ie,[se,n(i)]),re]),te,e("p",null,[e("em",null,[oe,e("a",le,[de,n(i)]),ce])]),e("p",null,[e("em",null,[he,e("a",me,[pe,n(i)]),ue])]),fe,e("p",null,[e("em",null,[ge,e("a",ve,[be,n(i)]),_e])]),xe,e("p",null,[e("em",null,[ye,e("a",ke,[Ce,n(i)]),Ie])]),Ee,e("ul",null,[e("li",null,[e("p",null,[n(t,{to:"/"},{default:c(()=>[we]),_:1})])]),e("li",null,[e("p",null,[e("a",Me,[qe,n(i)]),Ae])]),e("li",null,[e("p",null,[Se,e("a",Oe,[He,n(i)])])])])])}const Te=o(h,[["render",Le],["__file","80.html.vue"]]);export{Te as default};
