import{_ as r,r as a,o,c as d,a as e,b as n,w as c,e as s,d as l}from"./app.d693e75c.js";const u={},h={href:"http://nsddd.top",target:"_blank",rel:"noopener noreferrer"},p=s("author"),m=e("h1",{id:"\u7B2C5\u8282-sealer-runtime",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u7B2C5\u8282-sealer-runtime","aria-hidden":"true"},"#"),s(" \u7B2C5\u8282 sealer runtime")],-1),b=e("br",null,null,-1),v=e("div",null,[e("a",{href:"4.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),e("a",{href:"6.md",style:{float:"right"}}," \u2B07\uFE0F\u4E0B\u4E00\u8282\u{1F517}")],-1),g=e("br",null,null,-1),k=s("\u2764\uFE0F\u{1F495}\u{1F495}\u8BB0\u5F55"),_={href:"https://github.com/3293172751/sealos",target:"_blank",rel:"noopener noreferrer"},f=s("sealos"),x=s("\u5F00\u6E90\u9879\u76EE\u7684\u5B66\u4E60\u8FC7\u7A0B\u3002"),y={href:"https://github.com/3293172751/sealos",target:"_blank",rel:"noopener noreferrer"},w=s("k8s,docker\u548C\u4E91\u539F\u751F\u7684\u5B66\u4E60"),C=s("\u3002Myblog:"),L={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},E=s("http://nsddd.top"),q=l(`<hr><p>[TOC]</p><h2 id="\u6CE8\u610F" tabindex="-1"><a class="header-anchor" href="#\u6CE8\u610F" aria-hidden="true">#</a> \u6CE8\u610F</h2><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>k8s \u4ECE v1.24 \u5F00\u59CB\uFF0Ckubernetes \u9ED8\u8BA4\u5BB9\u5668\u8FD0\u884C\u65F6\u4F7F\u7528 <code>containerd</code> \uFF0C\u4E0D\u518D\u4F7F\u7528 <code>docker</code>\u3002</p><p>k3s \u5C06\u6240\u6709 kubernetes \u63A7\u5236\u5C42\u9762\u7EC4\u4EF6\u90FD\u5C01\u88C5\u5230 \u5355\u4E2A\u4E8C\u8FDB\u5236\u4E2D \uFF0C\u5360\u7528\u8D44\u6E90\u5C0F\uFF0C\u4E14\u5305\u542B\u4E86 kubernetes \u8FD0\u884C\u65F6\u6240\u9700\u8981\u7684\u5916\u90E8\u4F9D\u8D56\u548C\u672C\u5730\u5B58\u50A8\u63D0\u4F9B\u7A0B\u5E8F\u3002</p><p>k3s \u63D0\u4F9B\u79BB\u7EBF\u5B89\u88C5\u5305\uFF0C\u53EF\u4EE5\u907F\u514D\u7F51\u7EDC\u8D44\u6E90\u8BBF\u95EE\u95EE\u9898\u3002</p></div><h2 id="\u8FD0\u884C\u65F6" tabindex="-1"><a class="header-anchor" href="#\u8FD0\u884C\u65F6" aria-hidden="true">#</a> \u8FD0\u884C\u65F6</h2><div class="custom-container warning"><p class="custom-container-title">\u4EC0\u4E48\u662F \u8FD0\u884C\u65F6</p><p>\u6211\u4EEC\u5206\u4E3A\u5E7F\u4E49\u548C\u4FA0\u4E49</p><ul><li>\u5E7F\u4E49\uFF1A\u7A0B\u5E8F\u8DD1\u8D77\u6765\u7684\u65F6\u5019</li><li>\u4FA0\u4E49\uFF1A\u8F85\u52A9\u7A0B\u5E8F\u8DD1\u8D77\u6765\u7684\u4EE3\u7801\u548C\u73AF\u5883</li></ul><p>\u6211\u4EEC\u6216\u8BB8\u53EF\u4EE5\u628A runtime \u548C compile-time \u5BF9\u6BD4\uFF1A</p><p>\u6211\u4EEC\u90FD\u5E0C\u671B\u7F16\u8BD1\u5668\u53D1\u73B0\u9519\u8BEF\uFF0C\u800C\u4E0D\u662F\u6D4B\u8BD5\u8DD1\u7684\u65F6\u5019\u53D1\u73B0\u9519\u8BEF\uFF0C\u800C\u4E14\u6392\u67E5\u5F88\u96BE\u3002</p><ul><li>runtime\uFF1A\u5185\u5B58\u9519\u8BEF\u3001\u6570\u5B57\u9519\u8BEF</li><li>compile-time\uFF1A\u8BED\u6CD5\u9519\u8BEF\uFF0C\u8BED\u4E49\u9519\u8BEF</li></ul><p><strong>\u4FA0\u4E49\u4E0A\u7684\u8FD0\u884C\u65F6\uFF1A</strong></p><ul><li>\u8FD0\u884C\u65F6\u5E93\uFF08runtime library\uFF09<code>stdio.h</code></li><li>\u8FD0\u884C\u65F6\u73AF\u5883\uFF08runtime environment\uFF09</li></ul><p><strong>\u8FD0\u884C\u65F6\u73AF\u5883\uFF1A</strong></p><ul><li>&quot;\u65E0&quot; \u8FD0\u884C\u65F6 \u2013 \u4F9D\u8D56 os <ul><li>c/c++</li><li>rust</li></ul></li><li>\u8F7B\u8FD0\u884C\u65F6 <ul><li>Golang</li></ul></li><li>\u91CD\u8FD0\u884C\u65F6 <ul><li>java\uFF08JVM\uFF09</li><li>python\uFF08CPython\uFF09</li><li>C#\uFF08.NET runtime\uFF09</li></ul></li></ul></div><h2 id="\u76EE\u5F55\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u76EE\u5F55\u7ED3\u6784" aria-hidden="true">#</a> \u76EE\u5F55\u7ED3\u6784</h2><details class="custom-container details"><summary>\u76EE\u5F55\u7ED3\u6784</summary><ul><li><p><strong>/bin</strong>\uFF1A</p><ul><li><code>bin</code> \u662F <code>Binaries</code> (\u4E8C\u8FDB\u5236\u6587\u4EF6) \u7684\u7F29\u5199, \u8FD9\u4E2A\u76EE\u5F55\u5B58\u653E\u7740\u6700\u7ECF\u5E38\u4F7F\u7528\u7684\u547D\u4EE4\u3002</li></ul></li><li><p><strong>/boot</strong>\uFF1A</p><ul><li>\u8FD9\u91CC\u5B58\u653E\u7684\u662F\u542F\u52A8 Linux \u65F6\u4F7F\u7528\u7684\u4E00\u4E9B\u6838\u5FC3\u6587\u4EF6\uFF0C\u5305\u62EC\u4E00\u4E9B\u8FDE\u63A5\u6587\u4EF6\u4EE5\u53CA\u955C\u50CF\u6587\u4EF6\u3002</li></ul></li><li><p><strong>/dev</strong> \uFF1A</p><ul><li><code>dev</code> \u662F <code>Device</code>(\u8BBE\u5907) \u7684\u7F29\u5199, \u8BE5\u76EE\u5F55\u4E0B\u5B58\u653E\u7684\u662F Linux \u7684\u5916\u90E8\u8BBE\u5907\uFF0C\u5728 Linux \u4E2D\u8BBF\u95EE\u8BBE\u5907\u7684\u65B9\u5F0F\u548C\u8BBF\u95EE\u6587\u4EF6\u7684\u65B9\u5F0F\u662F\u76F8\u540C\u7684\u3002</li></ul></li><li><p><strong>/etc</strong>\uFF1A</p><ul><li><code>etc</code> <strong>\u662F</strong> <code>Etcetera</code>(\u7B49\u7B49**) **\u7684\u7F29\u5199\uFF0C\u8FD9\u4E2A\u76EE\u5F55\u7528\u6765\u5B58\u653E\u6240\u6709\u7684\u7CFB\u7EDF\u7BA1\u7406\u6240\u9700\u8981\u7684\u914D\u7F6E\u6587\u4EF6\u548C\u5B50\u76EE\u5F55\u3002</li></ul></li><li><p><strong>/home</strong>\uFF1A</p><ul><li>\u7528\u6237\u7684\u4E3B\u76EE\u5F55\uFF0C\u5728 Linux \u4E2D\uFF0C\u6BCF\u4E2A\u7528\u6237\u90FD\u6709\u4E00\u4E2A\u81EA\u5DF1\u7684\u76EE\u5F55\uFF0C\u4E00\u822C\u8BE5\u76EE\u5F55\u540D\u662F\u4EE5\u7528\u6237\u7684\u8D26\u53F7\u547D\u540D\u7684\uFF0C\u5982\u4E0A\u56FE\u4E2D\u7684 alice\u3001bob \u548C eve\u3002</li></ul></li><li><p><strong>/lib</strong>\uFF1A</p><ul><li><code>lib</code> \u662FLibrary(\u5E93) \u7684\u7F29\u5199\u8FD9\u4E2A\u76EE\u5F55\u91CC\u5B58\u653E\u7740\u7CFB\u7EDF\u6700\u57FA\u672C\u7684\u52A8\u6001\u8FDE\u63A5\u5171\u4EAB\u5E93\uFF0C\u5176\u4F5C\u7528\u7C7B\u4F3C\u4E8E Windows \u91CC\u7684 DLL \u6587\u4EF6\u3002\u51E0\u4E4E\u6240\u6709\u7684\u5E94\u7528\u7A0B\u5E8F\u90FD\u9700\u8981\u7528\u5230\u8FD9\u4E9B\u5171\u4EAB\u5E93\u3002</li></ul></li><li><p><strong>/lost+found</strong>\uFF1A</p><ul><li>\u8FD9\u4E2A\u76EE\u5F55\u4E00\u822C\u60C5\u51B5\u4E0B\u662F\u7A7A\u7684\uFF0C\u5F53\u7CFB\u7EDF\u975E\u6CD5\u5173\u673A\u540E\uFF0C\u8FD9\u91CC\u5C31\u5B58\u653E\u4E86\u4E00\u4E9B\u6587\u4EF6\u3002</li></ul></li><li><p><strong>/media</strong>\uFF1A</p><ul><li>linux \u7CFB\u7EDF\u4F1A\u81EA\u52A8\u8BC6\u522B\u4E00\u4E9B\u8BBE\u5907\uFF0C\u4F8B\u5982U\u76D8\u3001\u5149\u9A71\u7B49\u7B49\uFF0C\u5F53\u8BC6\u522B\u540E\uFF0CLinux \u4F1A\u628A\u8BC6\u522B\u7684\u8BBE\u5907\u6302\u8F7D\u5230\u8FD9\u4E2A\u76EE\u5F55\u4E0B\u3002</li></ul></li><li><p><strong>/mnt</strong></p><ul><li>\u7CFB\u7EDF\u63D0\u4F9B\u8BE5\u76EE\u5F55\u662F\u4E3A\u4E86\u8BA9\u7528\u6237\u4E34\u65F6\u6302\u8F7D\u522B\u7684\u6587\u4EF6\u7CFB\u7EDF\u7684\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u5149\u9A71\u6302\u8F7D\u5728 /mnt/ \u4E0A\uFF0C\u7136\u540E\u8FDB\u5165\u8BE5\u76EE\u5F55\u5C31\u53EF\u4EE5\u67E5\u770B\u5149\u9A71\u91CC\u7684\u5185\u5BB9\u4E86\u3002</li></ul></li><li><p><strong>/opt</strong>\uFF1A</p><ul><li>opt \u662Foptional(\u53EF\u9009) \u7684\u7F29\u5199\uFF0C\u8FD9\u662F\u7ED9\u4E3B\u673A\u989D\u5916\u5B89\u88C5\u8F6F\u4EF6\u6240\u6446\u653E\u7684\u76EE\u5F55\u3002\u6BD4\u5982\u4F60\u5B89\u88C5\u4E00\u4E2AORACLE\u6570\u636E\u5E93\u5219\u5C31\u53EF\u4EE5\u653E\u5230\u8FD9\u4E2A\u76EE\u5F55\u4E0B\u3002\u9ED8\u8BA4\u662F\u7A7A\u7684\u3002</li></ul></li><li><p><strong>/proc</strong>\uFF1A</p><ul><li>proc \u662FProcesses(\u8FDB\u7A0B) \u7684\u7F29\u5199\uFF0C/proc\u662F\u4E00\u79CD\u4F2A\u6587\u4EF6\u7CFB\u7EDF\uFF08\u4E5F\u5373\u865A\u62DF\u6587\u4EF6\u7CFB\u7EDF\uFF09\uFF0C\u5B58\u50A8\u7684\u662F\u5F53\u524D\u5185\u6838\u8FD0\u884C\u72B6\u6001\u7684\u4E00\u7CFB\u5217\u7279\u6B8A\u6587\u4EF6\uFF0C\u8FD9\u4E2A\u76EE\u5F55\u662F\u4E00\u4E2A\u865A\u62DF\u7684\u76EE\u5F55\uFF0C\u5B83\u662F\u7CFB\u7EDF\u5185\u5B58\u7684\u6620\u5C04\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E2A\u76EE\u5F55\u6765\u83B7\u53D6\u7CFB\u7EDF\u4FE1\u606F\u3002</li></ul><p>\u8FD9\u4E2A\u76EE\u5F55\u7684\u5185\u5BB9\u4E0D\u5728\u786C\u76D8\u4E0A\u800C\u662F\u5728\u5185\u5B58\u91CC\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539\u91CC\u9762\u7684\u67D0\u4E9B\u6587\u4EF6\uFF0C\u6BD4\u5982\u53EF\u4EE5\u901A\u8FC7\u4E0B\u9762\u7684\u547D\u4EE4\u6765\u5C4F\u853D\u4E3B\u673A\u7684 <code>ping</code> \u547D\u4EE4\uFF0C\u4F7F\u522B\u4EBA\u65E0\u6CD5 <code>ping</code> \u4F60\u7684\u673A\u5668\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">&gt;</span> /proc/sys/net/ipv4/icmp_echo_ignore_all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><strong>/root</strong>\uFF1A</p><ul><li>\u8BE5\u76EE\u5F55\u4E3A\u7CFB\u7EDF\u7BA1\u7406\u5458\uFF0C\u4E5F\u79F0\u4F5C\u8D85\u7EA7\u6743\u9650\u8005\u7684\u7528\u6237\u4E3B\u76EE\u5F55\u3002</li></ul></li><li><p><strong>/sbin</strong>\uFF1A</p><ul><li><code>s</code> \u5C31\u662F <code>Super User</code> \u7684\u610F\u601D\uFF0C\u662F Superuser Binaries (\u8D85\u7EA7\u7528\u6237\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6) \u7684\u7F29\u5199\uFF0C\u8FD9\u91CC\u5B58\u653E\u7684\u662F\u7CFB\u7EDF\u7BA1\u7406\u5458\u4F7F\u7528\u7684\u7CFB\u7EDF\u7BA1\u7406\u7A0B\u5E8F\u3002</li></ul></li><li><p><strong>/selinux</strong>\uFF1A</p><ul><li>\u8FD9\u4E2A\u76EE\u5F55\u662F <code>Redhat/CentOS</code> \u6240\u7279\u6709\u7684\u76EE\u5F55\uFF0C<code>Selinux</code>\u662F\u4E00\u4E2A\u5B89\u5168\u673A\u5236\uFF0C\u7C7B\u4F3C\u4E8E windows \u7684\u9632\u706B\u5899\uFF0C\u4F46\u662F\u8FD9\u5957\u673A\u5236\u6BD4\u8F83\u590D\u6742\uFF0C\u8FD9\u4E2A\u76EE\u5F55\u5C31\u662F\u5B58\u653E<code>selinux</code>\u76F8\u5173\u7684\u6587\u4EF6\u7684\u3002</li></ul></li><li><p><strong>/srv</strong>\uFF1A</p><ul><li>\u8BE5\u76EE\u5F55\u5B58\u653E\u4E00\u4E9B\u670D\u52A1\u542F\u52A8\u4E4B\u540E\u9700\u8981\u63D0\u53D6\u7684\u6570\u636E\u3002</li></ul></li><li><p><strong>/sys</strong>\uFF1A</p><ul><li>\u8FD9\u662F Linux2.6 \u5185\u6838\u7684\u4E00\u4E2A\u5F88\u5927\u7684\u53D8\u5316\u3002\u8BE5\u76EE\u5F55\u4E0B\u5B89\u88C5\u4E86 2.6 \u5185\u6838\u4E2D\u65B0\u51FA\u73B0\u7684\u4E00\u4E2A\u6587\u4EF6\u7CFB\u7EDF sysfs sysfs \u6587\u4EF6\u7CFB\u7EDF\u96C6\u6210\u4E86\u4E0B\u97623\u79CD\u6587\u4EF6\u7CFB\u7EDF\u7684\u4FE1\u606F\uFF1A\u9488\u5BF9\u8FDB\u7A0B\u4FE1\u606F\u7684 proc \u6587\u4EF6\u7CFB\u7EDF\u3001\u9488\u5BF9\u8BBE\u5907\u7684 devfs \u6587\u4EF6\u7CFB\u7EDF\u4EE5\u53CA\u9488\u5BF9\u4F2A\u7EC8\u7AEF\u7684 devpts \u6587\u4EF6\u7CFB\u7EDF\u3002 \u8BE5\u6587\u4EF6\u7CFB\u7EDF\u662F\u5185\u6838\u8BBE\u5907\u6811\u7684\u4E00\u4E2A\u76F4\u89C2\u53CD\u6620\u3002 \u5F53\u4E00\u4E2A\u5185\u6838\u5BF9\u8C61\u88AB\u521B\u5EFA\u7684\u65F6\u5019\uFF0C\u5BF9\u5E94\u7684\u6587\u4EF6\u548C\u76EE\u5F55\u4E5F\u5728\u5185\u6838\u5BF9\u8C61\u5B50\u7CFB\u7EDF\u4E2D\u88AB\u521B\u5EFA\u3002</li></ul></li><li><p><strong>/tmp</strong>\uFF1A</p><ul><li><code>tmp</code> \u662F<code>temporary</code>(\u4E34\u65F6) \u7684\u7F29\u5199\u8FD9\u4E2A\u76EE\u5F55\u662F\u7528\u6765\u5B58\u653E\u4E00\u4E9B\u4E34\u65F6\u6587\u4EF6\u7684\u3002</li></ul></li><li><p><strong>/usr</strong>\uFF1A</p><ul><li>usr \u662F unix shared resources(\u5171\u4EAB\u8D44\u6E90) \u7684\u7F29\u5199\uFF0C\u8FD9\u662F\u4E00\u4E2A\u975E\u5E38\u91CD\u8981\u7684\u76EE\u5F55\uFF0C\u7528\u6237\u7684\u5F88\u591A\u5E94\u7528\u7A0B\u5E8F\u548C\u6587\u4EF6\u90FD\u653E\u5728\u8FD9\u4E2A\u76EE\u5F55\u4E0B\uFF0C\u7C7B\u4F3C\u4E8E windows \u4E0B\u7684 program files \u76EE\u5F55\u3002</li></ul></li><li><p><strong>/usr/bin</strong>\uFF1A</p><ul><li>\u7CFB\u7EDF\u7528\u6237\u4F7F\u7528\u7684\u5E94\u7528\u7A0B\u5E8F\u3002</li></ul></li><li><p><strong>/usr/sbin</strong>\uFF1A</p><ul><li><strong>\u8D85\u7EA7\u7528\u6237\u4F7F\u7528\u7684\u6BD4\u8F83\u9AD8\u7EA7\u7684\u7BA1\u7406\u7A0B\u5E8F\u548C\u7CFB\u7EDF\u5B88\u62A4\u7A0B\u5E8F\u3002</strong></li></ul></li><li><p><strong>/usr/src</strong>\uFF1A</p><ul><li><strong>\u5185\u6838\u6E90\u4EE3\u7801\u9ED8\u8BA4\u7684\u653E\u7F6E\u76EE\u5F55\u3002</strong></li></ul></li><li><p><strong>/var</strong>\uFF1A</p><ul><li>var \u662F variable(\u53D8\u91CF) \u7684\u7F29\u5199\uFF0C\u8FD9\u4E2A\u76EE\u5F55\u4E2D\u5B58\u653E\u7740\u5728\u4E0D\u65AD\u6269\u5145\u7740\u7684\u4E1C\u897F\uFF0C\u6211\u4EEC\u4E60\u60EF\u5C06\u90A3\u4E9B\u7ECF\u5E38\u88AB\u4FEE\u6539\u7684\u76EE\u5F55\u653E\u5728\u8FD9\u4E2A\u76EE\u5F55\u4E0B\u3002\u5305\u62EC\u5404\u79CD\u65E5\u5FD7\u6587\u4EF6\u3002</li></ul></li><li><p><strong>/run</strong>\uFF1A</p><ul><li>\u662F\u4E00\u4E2A\u4E34\u65F6\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u5B58\u50A8\u7CFB\u7EDF\u542F\u52A8\u4EE5\u6765\u7684\u4FE1\u606F\u3002\u5F53\u7CFB\u7EDF\u91CD\u542F\u65F6\uFF0C\u8FD9\u4E2A\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u5E94\u8BE5\u88AB\u5220\u6389\u6216\u6E05\u9664\u3002\u5982\u679C\u4F60\u7684\u7CFB\u7EDF\u4E0A\u6709 <code>/var/run</code> \u76EE\u5F55\uFF0C\u5E94\u8BE5\u8BA9\u5B83\u6307\u5411 <code>run</code>\u3002</li></ul></li></ul><p><strong>\u{1F4A1} \u91CD\u8981\u7684\u76EE\u5F55\u7ED3\u6784\uFF1A</strong></p><p><strong>\u5728 Linux \u7CFB\u7EDF\u4E2D\uFF0C\u6709\u51E0\u4E2A\u76EE\u5F55\u662F\u6BD4\u8F83\u91CD\u8981\u7684\uFF0C\u5E73\u65F6\u9700\u8981\u6CE8\u610F\u4E0D\u8981\u8BEF\u5220\u9664\u6216\u8005\u968F\u610F\u66F4\u6539\u5185\u90E8\u6587\u4EF6\u3002</strong></p><p><code>-/etc</code>\uFF1A \u4E0A\u8FB9\u4E5F\u63D0\u5230\u4E86\uFF0C\u8FD9\u4E2A\u662F\u7CFB\u7EDF\u4E2D\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u5982\u679C\u4F60\u66F4\u6539\u4E86\u8BE5\u76EE\u5F55\u4E0B\u7684\u67D0\u4E2A\u6587\u4EF6\u53EF\u80FD\u4F1A\u5BFC\u81F4\u7CFB\u7EDF\u4E0D\u80FD\u542F\u52A8\u3002</p><p><code>-/bin, /sbin, /usr/bin, /usr/sbin:</code> \u8FD9\u662F\u7CFB\u7EDF\u9884\u8BBE\u7684\u6267\u884C\u6587\u4EF6\u7684\u653E\u7F6E\u76EE\u5F55\uFF0C\u6BD4\u5982 ls \u5C31\u662F\u5728 <code>/bin/ls</code> \u76EE\u5F55\u4E0B\u7684\u3002</p><p><strong>\u503C\u5F97\u63D0\u51FA\u7684\u662F\uFF0C/bin, /usr/bin \u662F\u7ED9\u7CFB\u7EDF\u7528\u6237\u4F7F\u7528\u7684\u6307\u4EE4\uFF08\u9664root\u5916\u7684\u901A\u7528\u6237\uFF09\uFF0C\u800C/sbin, /usr/sbin \u5219\u662F\u7ED9 root \u4F7F\u7528\u7684\u6307\u4EE4\u3002</strong></p><p>-<strong>/var</strong>\uFF1A \u8FD9\u662F\u4E00\u4E2A\u975E\u5E38\u91CD\u8981\u7684\u76EE\u5F55\uFF0C\u7CFB\u7EDF\u4E0A\u8DD1\u4E86\u5F88\u591A\u7A0B\u5E8F\uFF0C\u90A3\u4E48\u6BCF\u4E2A\u7A0B\u5E8F\u90FD\u4F1A\u6709\u76F8\u5E94\u7684\u65E5\u5FD7\u4EA7\u751F\uFF0C\u800C\u8FD9\u4E9B\u65E5\u5FD7\u5C31\u88AB\u8BB0\u5F55\u5230\u8FD9\u4E2A\u76EE\u5F55\u4E0B\uFF0C\u5177\u4F53\u5728 <code>/var/log</code> \u76EE\u5F55\u4E0B\uFF0C\u53E6\u5916 <code>mail</code> \u7684\u9884\u8BBE\u653E\u7F6E\u4E5F\u662F\u5728\u8FD9\u91CC\u3002</p></details><h2 id="\u79BB\u7EBF\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u79BB\u7EBF\u5B89\u88C5" aria-hidden="true">#</a> \u79BB\u7EBF\u5B89\u88C5</h2><p>\u4E0B\u8F7D\u79BB\u7EBF\u5B89\u88C5\u811A\u672C\uFF1Ahttps://get.k3s.io</p><p>\u4E0B\u8F7D<strong>k3s</strong>\u4E8C\u8FDB\u5236\u6587\u4EF6\uFF1Ak3s</p><p>\u4E0B\u8F7D\u5FC5\u8981\u7684<code>images</code>\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://ghproxy.com/https://github.com/k3s-io/k3s/releases/download/v1.25.3%2Bk3s1/k3s-airgap-images-amd64.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,13),A=s("These files are available in the "),R={href:"https://github.com/k3s-io/k3s/",target:"_blank",rel:"noopener noreferrer"},B=s("GitHub"),I=s(" repository"),S=e("p",null,[e("img",{src:"http://sm.nsddd.top/smimage-20221109164523589.png",alt:"image-20221109164523589"})],-1),N=e("h2",{id:"\u524D\u8A00",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u524D\u8A00","aria-hidden":"true"},"#"),s(" \u524D\u8A00")],-1),j=e("p",null,[e("strong",null,"\u8BAE\u9898\uFF1A")],-1),M={href:"https://github.com/sealerio/sealer/issues/1839",target:"_blank",rel:"noopener noreferrer"},T=s("https://github.com/sealerio/sealer/issues/1839"),O={href:"https://github.com/sealerio/sealer/issues/1770",target:"_blank",rel:"noopener noreferrer"},Y=s("https://github.com/sealerio/sealer/issues/1770"),D=e("h3",{id:"what-is-the-problem-this-feature-will-solve",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#what-is-the-problem-this-feature-will-solve","aria-hidden":"true"},"#"),s(" What is the problem this feature will solve?")],-1),P=e("ul",null,[e("li",null,"Brings all the benefits of k3s. @https://www.rancher.cn/k3s/"),e("li",null,"No k3s no sealos.")],-1),z=e("blockquote",null,[e("p",null,"Sealos wants to hit the mass market, which is consistent with the direction of k3s. The lightweight k3s is more popular with mass developers.")],-1),K=e("p",null,"\u6211\u4EEC\u5728\u8DEF\u7EBF\u56FE\u4E2D\u5BF9 k8s\u3001k0s\u3001k3s \u8FD0\u884C\u65F6\u652F\u6301\u7684\u5DE5\u4F5C\u5E94\u8BE5\u6709\u4E00\u4E2A\u8FDB\u5EA6\u8BB0\u5F55\uFF0C\u5E94\u8BE5\u662F\u8BA9\u5DE5\u4F5C\u8FDB\u5EA6\u66F4\u52A0\u6E05\u6670\uFF0C\u5E76\u5438\u5F15\u66F4\u591A\u7684\u53C2\u4E0E\u8005\u52A0\u5165\u8FD9\u4E2A\u6838\u5FC3\u5DE5\u4F5C\u3002\u8FD9\u91CC\u7B80\u5355\u4ECB\u7ECD\u4E00\u4E0B\u90E8\u5206\u5DE5\u4F5C\uFF1A \u9605\u8BFB Sealer \u4E3B\u5206\u652F\u4EE3\u7801\uFF0C\u7406\u89E3 runtime \u6A21\u5757\u4E2D\u7684\u4EE3\u7801\uFF0C\u638C\u63E1\u4ECE cmd \u6A21\u5757\u5230 runtime \u6A21\u5757\u7684\u4EE3\u7801\u8C03\u7528\u903B\u8F91\u3002 \u901A\u8FC7k8s\u3001k0s\u3001k3s\u5B98\u7F51\u9605\u8BFB\u5E76\u8BBE\u8BA1\u8FD0\u884C\u65F6\u63A5\u53E3\u5B9E\u73B0\u65B9\u6CD5\u3002",-1),V=s("\u4E3A\u6307\u5B9A\u7684\u8FD0\u884C\u65F6\u8BFB\u53D6\u548C\u8BBE\u8BA1 clusterImage\u3002\u4E3B\u8981\u53C2\u8003\uFF1A "),G={href:"http://sealer.cool/docs/advanced/define-cloudimage.html#customize-the-cloudrootfs",target:"_blank",rel:"noopener noreferrer"},U=s("ClusterImage"),F=s("\u3001"),W={href:"https://github.com/sealerio/basefs",target:"_blank",rel:"noopener noreferrer"},H=s("basefs"),J=s("\u3002"),$=l(`<p>\u7C7B\u578B\uFF1A\u529F\u80FD\u8BF7\u6C42</p><ul><li>\u5355\u7ED3\u70B9\u6210\u4E3A\u9AD8\u53EF\u7528~</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>docker~ run cmd 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>init\uFF1A</strong></p><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u8FDB\u5C55</p></div><h2 id="clusterlmage" tabindex="-1"><a class="header-anchor" href="#clusterlmage" aria-hidden="true">#</a> Clusterlmage</h2><ul><li>Bin \u6587\u4EF6\uFF0C\u5982 docker\u3001containerd\u3001crictl\u3001kubeadm\u3001kubectl...</li><li>\u914D\u7F6E\u6587\u4EF6\uFF0C\u5982 kubelet systemd config\u3001docker systemd config\u3001docker daemon.json...</li><li>registry images\u3002</li><li>\u4E00\u4E9B\u5143\u6570\u636E\uFF0C\u4F8B\u5982 Kubernetes \u7248\u672C\u3002</li><li>registry file\uFF0C\u5305\u542B\u6240\u6709\u7684docker\u955C\u50CF\uFF0C\u6BD4\u5982kubernetes\u6838\u5FC3\u7EC4\u4EF6docker\u955C\u50CF...</li><li>Script\uFF0C\u4E00\u4E9B\u7528\u4E8E\u5B89\u88C5 docker \u548C kubelet \u7684 shell \u811A\u672C... sealer \u5C06\u8C03\u7528 init.sh \u548C clean.sh\u3002</li><li>\u5176\u4ED6\u9759\u6001\u6587\u4EF6</li></ul><p>\u4F7F\u7528 Kubernetes \u4EEA\u8868\u677F\u6784\u5EFA ClusterImage\uFF1A</p><p>FileName\uFF1A<code>Kubefile</code></p><div class="language-docker ext-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># base ClusterImage contains all the files that run a kubernetes cluster needed.</span>
<span class="token comment">#    1. kubernetes components like kubectl kubeadm kubelet and apiserver images ...</span>
<span class="token comment">#    2. docker engine, and a private registry</span>
<span class="token comment">#    3. config files, yaml, static files, scripts ...</span>
<span class="token instruction"><span class="token keyword">FROM</span> registry.cn-qingdao.aliyuncs.com/sealer-io/kubernetes:v1.19.8</span>
<span class="token comment"># download kubernetes dashboard yaml file</span>
<span class="token instruction"><span class="token keyword">RUN</span> wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.2.0/aio/deploy/recommended.yaml</span>
<span class="token comment"># when run this ClusterImage, will apply a dashboard manifests</span>
<span class="token instruction"><span class="token keyword">CMD</span> kubectl apply -f recommended.yaml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Build it\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>sealer build <span class="token parameter variable">-t</span> registry.cn-qingdao.aliyuncs.com/sealer-io/dashboard:latest <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Make it run\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># sealer will install a kubernetes on host 192.168.0.2 then apply the dashboard manifests</span>
sealer run registry.cn-qingdao.aliyuncs.com/sealer-io/dashboard:latest <span class="token parameter variable">--masters</span> <span class="token number">192.168</span>.0.2 <span class="token parameter variable">--passwd</span> xxx
<span class="token comment"># check the pod</span>

kubectl get pod -A<span class="token operator">|</span><span class="token function">grep</span> dashboard

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u95EE\u9898\u63CF\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u63CF\u8FF0" aria-hidden="true">#</a> \u95EE\u9898\u63CF\u8FF0</h2><p>\u6211\u4EEC\u9700\u8981\u66F4\u65B0 k0s \u8FD0\u884C\u65F6\u4EE3\u7801\u4EE5\u9002\u5E94\u65B0\u7ED3\u6784\u3002 \u7C7B\u578B\uFF1A\u529F\u80FD\u8BF7\u6C42</p><h3 id="\u63CF\u8FF0\u4F60\u60F3\u8981\u4EC0\u4E48\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u63CF\u8FF0\u4F60\u60F3\u8981\u4EC0\u4E48\u529F\u80FD" aria-hidden="true">#</a> \u63CF\u8FF0\u4F60\u60F3\u8981\u4EC0\u4E48\u529F\u80FD</h3><h2 id="\u8C03\u7814" tabindex="-1"><a class="header-anchor" href="#\u8C03\u7814" aria-hidden="true">#</a> \u8C03\u7814</h2><p>\u9996\u5148\u9700\u8981\u8C03\u7814\uFF0C\u7136\u540E\u51FA\u4E00\u4E2A\u8BBE\u8BA1\u7A3F\uFF0C\u6BD4\u5982install\u6A21\u5757\u600E\u4E48\u548Ck3s\u7ED3\u5408</p><p>apply\u4F1A\u5BF9\u6BD4\u4E00\u4E0B\u65B0\u65E7\u96C6\u7FA4\u7684\u5DEE\u522B\uFF0C\u7136\u540E\u518D\u786E\u5B9A\u662F\u5426\u8C03\u7528runtime\u6765\u6269\u7F29\u5BB9\u96C6\u7FA4</p><blockquote><p>\u76EE\u524Dk3s\u8FD8\u6CA1\u6709\u5B9E\u73B0\uFF0Ck0s\u5728\u6700\u65B0\u4EE3\u7801\u4E2D\u8FD8\u6CA1\u6709\u9002\u914D\u8D77\u6765\uFF0C\u4E0A\u9762\u8FD9\u4E2A\u6587\u6863\u662F\u57280.8.6\u7248\u672C\uFF0C\u4E5F\u5C31\u662F9\u6708\u4E0B\u65EC\u53D1\u5E03\u7684\u90A3\u4E2A\u7248\u672C\u4EE3\u7801\u524D\u8BBE\u8BA1\u7684\uFF0C\u73B0\u5728\u7684\u8BDD\u5927\u4F53\u601D\u8DEF\u4E00\u81F4\uFF0C\u5982\u679C\u9700\u8981\u5B9E\u73B0k3s\u7684\u8BDD\uFF0C\u9996\u5148\u9700\u8981\u719F\u8BFBk3s\u7684\u5B98\u65B9\u5B89\u88C5\u6587\u6863\uFF0C\u5176\u6B21\u9605\u8BFBsealer runtime\u7684\u63A5\u53E3\u903B\u8F91\uFF0Cinstall/scaleup\u7B49\u63A5\u53E3\u5E72\u4E9B\u4EC0\u4E48\u4E8B\u513F\u3002\u6700\u540E\u8FD8\u9700\u8981\u770B\u4E00\u4E0B\u5982\u4F55\u4E0Erootfs\u8FDB\u884C\u4EA4\u4E92\uFF0C\u4E5F\u5C31\u662F\u96C6\u7FA4\u955C\u50CF\u90A3\u4E2A\u90E8\u5206\u3002\u5982\u679C\u6709\u5174\u8DA3\u7684\u8BDD\uFF0C\u6B22\u8FCE\u5BF9sealer\u8FDB\u884C\u8D21\u732E\u3002k0s\u3001k3s runtime\u90E8\u5206\u7684\u4EE3\u7801\u4F1A\u662F\u7531\u6211\u4E3B\u8981\u8D1F\u8D23\u3002</p><p>\u8FD9\u4E2A\u4E0D\u597D\u8BF4\uFF0C\u76EE\u524D\u65B0\u67B6\u6784\u4E0B\u7684cri\u8FD8\u6CA1\u6709\u652F\u6301containerd\uFF0Ck0s\u90E8\u5206\u4FEE\u6539\u8D77\u6765\u5F88\u5FEB\u5E76\u4E14\u5DF2\u7ECF\u63A8\u52A8\u4E86\uFF0C\u9884\u8BA11\u4E2A\u6708\u5C31\u53EF\u4EE5\u4E86\uFF0C\u53EF\u4EE5\u671F\u5F85sealer\u4E0B\u4E2A\u5927\u7248\u672C\u7684\u66F4\u65B0\u54E6\u5982\u679C\u73B0\u5728\u60F3\u4F53\u9A8Ck0s\u7684\u8BDD\uFF0C\u53EF\u4EE5\u5207\u6362\u52309\u670830\u53F7\u7684\u90A3\u6B21starcomingup\u7684\u63D0\u4EA4\uFF0C\u57FA\u4E8E\u90A3\u6B21commit\u8FDB\u884C\u7F16\u8BD1\uFF0Ck0s\u955C\u50CF\u7684\u8BDD\u53EF\u4EE5\u4F53\u9A8C\u4E00\u4E0B</p><p>\u4F46\u662F\u4E0D\u5EFA\u8BAE\u4E0A\u751F\u4EA7\u54E6</p></blockquote><h2 id="\u5148\u51B3\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5148\u51B3\u6761\u4EF6" aria-hidden="true">#</a> \u5148\u51B3\u6761\u4EF6</h2>`,22),Q=s("\u5BB9\u5668\u5316\u4E3A\u57FA\u4E8E CRI"),X={href:"https://github.com/YTGhost",target:"_blank",rel:"noopener noreferrer"},Z=s("@YTGhost"),ee=s("\u8BF7\u5E2E\u6211\u8DDF\u8E2A\u8FD9\u9879\u5DE5\u4F5C"),se=l('<h2 id="\u5B89\u88C5-\u653E\u5927-\u7F29\u5C0F-\u91CD\u7F6E-\u5347\u7EA7" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-\u653E\u5927-\u7F29\u5C0F-\u91CD\u7F6E-\u5347\u7EA7" aria-hidden="true">#</a> \u5B89\u88C5/\u653E\u5927/\u7F29\u5C0F/\u91CD\u7F6E/\u5347\u7EA7</h2><ul><li>\u5220\u9664\u6CE8\u518C\u8868\u4EA4\u4E92\u903B\u8F91</li><li>\u66F4\u6539\u4E3A <code>infra-driver</code> \u547D\u4EE4</li></ul><h2 id="\u66F4\u6539-basefs-\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#\u66F4\u6539-basefs-\u811A\u672C" aria-hidden="true">#</a> \u66F4\u6539 basefs \u811A\u672C</h2><ul><li>\u5BB9\u5668 <code>d.sh</code></li><li>\u6709\u4E9B\u4E1C\u897F\u9700\u8981\u9075\u5FAA <code>k8s</code> \u9886\u5148\u7684\u903B\u8F91</li></ul><h2 id="\u5165\u53E3\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u5165\u53E3\u51FD\u6570" aria-hidden="true">#</a> \u5165\u53E3\u51FD\u6570</h2><ul><li><code>ChooseClusterRuntime()</code>\uFF1A\u4F7F\u7528 <code>Metadata</code> \u6765\u533A\u5206\u96C6\u7FA4 <code>Runtime</code>\uFF0C\u9700\u8981\u6DFB\u52A0\u4E00\u4E2A\u5B57\u6BB5\u6765\u533A\u5206k0s\u3001k3s\u3001k8s</li></ul><h3 id="\u9644\u52A0\u4E0A\u4E0B\u6587" tabindex="-1"><a class="header-anchor" href="#\u9644\u52A0\u4E0A\u4E0B\u6587" aria-hidden="true">#</a> \u9644\u52A0\u4E0A\u4E0B\u6587</h3><p>\u5728\u6B64\u5904\u6DFB\u52A0\u6709\u5173\u529F\u80FD\u8BF7\u6C42\u7684\u4EFB\u4F55\u5176\u4ED6\u4E0A\u4E0B\u6587\u6216\u5C4F\u5E55\u622A\u56FE\u3002</p><p><strong>sealos \u4E3B\u8BAE\u9898\uFF1A</strong></p>',9),ne={href:"https://github.com/sealerio/sealer/issues?q=is%3Aissue+is%3Aopen+k3s",target:"_blank",rel:"noopener noreferrer"},ie=s("k3s \u6240\u6709\u8BAE\u9898"),le={href:"https://github.com/labring/sealos/issues/1943",target:"_blank",rel:"noopener noreferrer"},ae=s("https://github.com/labring/sealos/issues/1943"),te=e("li",null,[e("p",null,"https://github.com/sealerio/sealer/issues/1399")],-1),re=l('<p><strong>\u7B56\u5212\u6587\u6863\uFF1A</strong></p><ul><li>https://www.yuque.com/zhouxinyuan-6woia/nodno9/iswdqd</li></ul><h2 id="\u8BA1\u5212" tabindex="-1"><a class="header-anchor" href="#\u8BA1\u5212" aria-hidden="true">#</a> \u8BA1\u5212</h2><ul><li>[x] \u719F\u8BFBk3s\u5B98\u65B9\u6587\u6863</li><li>[x] \u719F\u6089 k3s \u7684\u5B89\u88C5\u811A\u672C</li><li>[x] \u9605\u8BFB sealer runtime \u7684\u63A5\u53E3\u903B\u8F91 install / scaleup \u63A5\u53E3</li><li>[x] \u5982\u4F55\u548C rootfs \u4EA4\u4E92</li></ul><h2 id="issues" tabindex="-1"><a class="header-anchor" href="#issues" aria-hidden="true">#</a> issues</h2>',5),oe=s("\u6211\u4EEC\u5728\u8DEF\u7EBF\u56FE\u4E2D\u5BF9 k8s\u3001k0s\u3001k3s \u8FD0\u884C\u65F6\u652F\u6301\u7684\u5DE5\u4F5C\u5E94\u8BE5\u6709\u4E00\u4E2A\u8FDB\u5EA6\u8BB0\u5F55\uFF0C\u5E94\u8BE5\u662F\u8BA9\u5DE5\u4F5C\u8FDB\u5EA6\u66F4\u52A0\u6E05\u6670\uFF0C\u5E76\u5438\u5F15\u66F4\u591A\u7684\u53C2\u4E0E\u8005\u52A0\u5165\u8FD9\u4E2A\u6838\u5FC3\u5DE5\u4F5C\u3002\u8FD9\u91CC\u7B80\u5355\u4ECB\u7ECD\u4E00\u4E0B\u90E8\u5206\u5DE5\u4F5C\uFF1A \u9605\u8BFBSealer\u4E3B\u5206\u652F\u4EE3\u7801\uFF0C\u7406\u89E3 "),de=e("code",null,"runtime",-1),ce=s(" \u6A21\u5757\u4E2D\u7684\u4EE3\u7801\uFF0C\u638C\u63E1\u4ECEcmd\u6A21\u5757\u5230runtime\u6A21\u5757\u7684\u4EE3\u7801\u8C03\u7528\u903B\u8F91\u3002 \u901A\u8FC7k8s\u3001k0s\u3001k3s\u5B98\u7F51\u9605\u8BFB\u5E76\u8BBE\u8BA1\u8FD0\u884C\u65F6\u63A5\u53E3\u5B9E\u73B0\u65B9\u6CD5\u3002 \u4E3A\u6307\u5B9A\u7684\u8FD0\u884C\u65F6\u8BFB\u53D6\u548C\u8BBE\u8BA1 clusterImage\u3002\u4E3B\u8981\u53C2\u8003\uFF1A "),ue={href:"http://sealer.cool/docs/advanced/define-cloudimage.html#customize-the-cloudrootfs",target:"_blank",rel:"noopener noreferrer"},he=s("ClusterImage"),pe=s("\u3001"),me={href:"https://github.com/sealerio/basefs",target:"_blank",rel:"noopener noreferrer"},be=s("basefs"),ve=s("\u3002 \u7C7B\u578B\uFF1A"),ge=e("em",null,"\u529F\u80FD\u8BF7\u6C42",-1),ke={href:"https://github.com/sealerio/sealer/pull/1686",target:"_blank",rel:"noopener noreferrer"},_e=s("k0s \u8DDF\u8FDB\u6587\u6863"),fe={href:"https://github.com/sealerio/sealer/pull/1686/files",target:"_blank",rel:"noopener noreferrer"},xe=s("1686\u8BAE\u9898\u8DDF\u8FDB\u4EE3\u7801"),ye=l(`<h2 id="k0s-runtime-\u8BBE\u8BA1-readme" tabindex="-1"><a class="header-anchor" href="#k0s-runtime-\u8BBE\u8BA1-readme" aria-hidden="true">#</a> k0s runtime \u8BBE\u8BA1 readme</h2><ul><li>https://github.com/sealerio/sealer/blob/main/pkg/runtime/k0s/README.md</li></ul><h3 id="\u57FA\u7840\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840\u6587\u4EF6" aria-hidden="true">#</a> \u57FA\u7840\u6587\u4EF6</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u251C\u2500\u2500 amd64
\u2502   \u251C\u2500\u2500 bin
\u2502   \u2502   \u251C\u2500\u2500 k0s
\u2502   \u2502   \u251C\u2500\u2500 kubectl
\u2502   \u2502   \u251C\u2500\u2500 nerdctl
\u2502   \u2502   \u2514\u2500\u2500 seautil
\u2502   \u251C\u2500\u2500 images
\u2502   \u2502   \u2514\u2500\u2500 registry.tar.gz
\u2502   \u2514\u2500\u2500 Metadata
\u251C\u2500\u2500 imageList
\u251C\u2500\u2500 Kubefile
\u2514\u2500\u2500 rootfs
    \u251C\u2500\u2500 etc
    \u2502   \u251C\u2500\u2500 dump-config.toml
    \u2502   \u2514\u2500\u2500 registry.yml
    \u2514\u2500\u2500 scripts
        \u251C\u2500\u2500 containerd.sh
        \u251C\u2500\u2500 init-registry.sh
        \u2514\u2500\u2500 init.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u91CD\u6784\u76F8\u5BF9\u8FD0\u884C\u65F6\u7684\u5217\u8868" tabindex="-1"><a class="header-anchor" href="#\u91CD\u6784\u76F8\u5BF9\u8FD0\u884C\u65F6\u7684\u5217\u8868" aria-hidden="true">#</a> \u91CD\u6784\u76F8\u5BF9\u8FD0\u884C\u65F6\u7684\u5217\u8868</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>runtime
\u251C\u2500\u2500 interface.go <span class="token comment"># runtime interface</span>
\u2514\u2500\u2500 kubernets
    \u251C\u2500\u2500 join_masters.go     <span class="token comment"># add master nodes/controlplanes</span>
    \u251C\u2500\u2500 join_worker.go      <span class="token comment"># add worker nodes</span>
    \u251C\u2500\u2500 common.go           <span class="token comment"># Enum relative Kubeadm</span>
    \u251C\u2500\u2500 init.go             <span class="token comment"># create cluster</span>
    \u251C\u2500\u2500 delete_masters.go   <span class="token comment"># delete master nodes/controlplanes</span>
    \u251C\u2500\u2500 delete_nodes.go     <span class="token comment"># delete worker nodes</span>
    \u251C\u2500\u2500 kubeadm_runtime.go  <span class="token comment"># runtime implement</span>
    \u251C\u2500\u2500 kubeadm_type        <span class="token comment"># kubeadm version type</span>
    \u2502   \u2514\u2500\u2500 v1beta1
    \u2502       \u2514\u2500\u2500 type.go
    \u251C\u2500\u2500 registry_service.go  <span class="token comment"># get and set some registry info</span>
    \u251C\u2500\u2500 reset.go             <span class="token comment"># reset a kubernetes cluster</span>
    \u251C\u2500\u2500 static_file.go       <span class="token comment"># AuditPolicyYml type</span>
    \u251C\u2500\u2500 update_cert.go       <span class="token comment"># update certs about kubernetes</span>
    \u2514\u2500\u2500 util.go              <span class="token comment"># util of kubernetes runtime</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cloud\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#cloud\u955C\u50CF" aria-hidden="true">#</a> cloud\u955C\u50CF</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>COPY rootfs/* .
COPY \${ARCH} .
COPY ImageList manifests
BASE rootfs cache
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u76EE\u5F55\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#\u76EE\u5F55\u8BBE\u8BA1" aria-hidden="true">#</a> \u76EE\u5F55\u8BBE\u8BA1</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u251C\u2500\u2500 bin
\u2502   \u251C\u2500\u2500 conntrack
\u2502   \u251C\u2500\u2500 containerd-rootless-setuptool.sh
\u2502   \u251C\u2500\u2500 containerd-rootless.sh
\u2502   \u251C\u2500\u2500 crictl
\u2502   \u251C\u2500\u2500 k0s
\u2502   \u251C\u2500\u2500 kubectl
\u2502   \u251C\u2500\u2500 <span class="token punctuation">..</span>.
\u2502   \u2514\u2500\u2500 seautil
\u251C\u2500\u2500 etc
\u2502   \u251C\u2500\u2500 admin.conf
\u2502   \u251C\u2500\u2500 Clusterfile  <span class="token comment"># \u955C\u50CF\u9ED8\u8BA4\u96C6\u7FA4\u6587\u4EF6</span>
\u2502   \u251C\u2500\u2500 daemon.json <span class="token comment"># docker \u5B88\u62A4\u8FDB\u7A0B\u914D\u7F6E\u6587\u4EF6\u3002</span>
\u2502   \u251C\u2500\u2500 docker.service
\u2502   \u251C\u2500\u2500 k0s.yaml <span class="token comment"># k0s config</span>
\u2502   \u251C\u2500\u2500 kubelet.service
\u2502   \u2514\u2500\u2500 registry.yml <span class="token comment"># \u5982\u679C\u7528\u6237\u60F3\u81EA\u5B9A\u4E49\u7528\u6237\u540D\u548C\u5BC6\u7801\uFF0C\u53EF\u4EE5\u8986\u76D6\u8FD9\u4E2A\u6587\u4EF6\u3002</span>
\u251C\u2500\u2500 images
\u2502   \u2514\u2500\u2500 registry.tar  <span class="token comment"># \u6CE8\u518Cdocker\u955C\u50CF\uFF0C\u5C06\u52A0\u8F7D\u6B64\u955C\u50CF\u5E76\u5728\u96C6\u7FA4\u4E2D\u8FD0\u884C\u672C\u5730\u6CE8\u518C\u8868</span>
\u251C\u2500\u2500 Metadata
\u251C\u2500\u2500 registry <span class="token comment">#\u662F\u5426\u5C06\u6B64\u76EE\u5F55\u6302\u8F7D\u5230\u672C\u5730\u6CE8\u518C\u8868</span>
\u2502   \u2514\u2500\u2500 <span class="token function">docker</span>
\u2502       \u2514\u2500\u2500 registry
\u251C\u2500\u2500 scripts
\u2502   \u251C\u2500\u2500 script-wait-for-develop
\u2514\u2500\u2500 statics <span class="token comment"># yaml\u6587\u4EF6, sealer \u5C06\u6E32\u67D3\u8FD9\u4E9B\u6587\u4EF6\u4E2D\u7684\u503C</span>
    \u2514\u2500\u2500 audit-policy.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u4ECB\u7ECD" aria-hidden="true">#</a> \u4ECB\u7ECD</h3><p>\u6211\u4EEC\u5B9A\u4E49 k0s \u8FD0\u884C\u65F6\u6709 5 \u4E2A\u9636\u6BB5\u6765\u5B89\u88C5/\u6269\u5C55/\u91CD\u7F6E\u96C6\u7FA4\u3002</p>`,12),we=s("basefs \u5305\u542B\u4E8C\u8FDB\u5236\u3001shell \u811A\u672C\u3001\u914D\u7F6E\u6587\u4EF6\u548C\u955C\u50CF\u3002\u4E86\u89E3\u6709\u5173"),Ce={href:"https://github.com/sealerio/basefs",target:"_blank",rel:"noopener noreferrer"},Le=s("sealerio/basefs \u7684\u66F4\u591A\u4FE1\u606F"),Ee={href:"https://github.com/k0sproject/k0s",target:"_blank",rel:"noopener noreferrer"},qe=s("\u901A\u8FC7\u6267\u884Ck0s"),Ae=s(" \u547D\u4EE4\u5B89\u88C5\u6587\u4EF6\u7CFB\u7EDF\u5F15\u5BFC\u96C6\u7FA4\u4E4B\u524D\u7684\u8FD0\u884C\u65F6\u3002"),Re=l(`<ul><li>init <ul><li>\u5F53 sealer \u5BFC\u81F4\u5148\u5B89\u88C5\u96C6\u7FA4\u65F6\uFF0Cinit \u9636\u6BB5\u5C06 rootfs/bin \u590D\u5236\u5230 <code>init.sh</code> \u811A\u672C\u4E2D\u7684 <code>/usr/bin</code></li><li>\u521B\u5EFA\u5F15\u5BFC\u914D\u7F6E /etc/k0s/k0s.yaml \u4EE5\u5F15\u5BFC\u63A7\u5236\u5668\u521D\u59CB\u5316</li><li>\u751F\u6210 k0s \u52A0\u5165\u4EE4\u724C <code>/etc/k0s/worker-token</code> \u548C /etc/k0s/controller-token\uFF0C\u4E5F\u662F\u79C1\u6709\u6CE8\u518C\u8868\u8BC1\u4E66</li><li>\u521D\u59CB\u5316\u63A7\u5236\u5668\u8282\u70B9</li><li>\u83B7\u53D6 <code>~/.kube/config</code> \u7684\u914D\u7F6E\u4EE5\u7BA1\u7406\u96C6\u7FA4\u3002</li></ul></li><li>join <ul><li>\u52A0\u5165\u9636\u6BB5\u51C6\u5907\u6CE8\u518C\u8868\u8BC1\u4E66\uFF0C\u5E76\u7528\u4E8E <code>k0s join</code> \u6269\u5C55\u96C6\u7FA4\u3002</li></ul></li><li>delete <ul><li>\u5220\u9664\u4E0E\u52A0\u5165\u76F8\u540C\uFF0C\u4F46\u5B83\u56DE\u6536\u52A0\u5165\u9636\u6BB5\u5B89\u88C5\u7684\u4EFB\u4F55\u5185\u5BB9\u3002</li></ul></li><li>reset <ul><li>\u901A\u8FC7 k0s \u91CD\u7F6E\u4EE5\u79FB\u9664\u8BE5\u96C6\u7FA4\u5E76\u79FB\u9664\u7531 sealer \u751F\u6210\u7684\u96C6\u7FA4\u7684\u4EFB\u4F55\u76F8\u5173\u5185\u5BB9\u3002</li></ul></li><li>Upgrade <ul><li>upgrade \u53EF\u4EE5\u5347\u7EA7 k0s \u96C6\u7FA4\u3002</li></ul></li></ul><h2 id="\u8868\u683C-cn" tabindex="-1"><a class="header-anchor" href="#\u8868\u683C-cn" aria-hidden="true">#</a> \u8868\u683C\uFF08CN\uFF09</h2><p><img src="http://sm.nsddd.top/smimage-20221113000126421.png" alt="image-20221113000126421"></p><h2 id="code-runtime-module" tabindex="-1"><a class="header-anchor" href="#code-runtime-module" aria-hidden="true">#</a> code runtime module</h2><p><strong>util.go\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/*
Loads the metadata file from the given rootfs.
\u4ECE\u7ED9\u5B9A\u7684rootfs\u52A0\u8F7D\u5143\u6570\u636E\u6587\u4EF6\u3002

Args:
	rootfs: The rootfs path.

Returns:
	The metadata object.
*/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#end-\u94FE\u63A5" aria-hidden="true">#</a> END \u94FE\u63A5</h2><ul><li><div><a href="4.md" style="float:left;">\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} </a><a href="6.md" style="float:right;"> \uFE0F\u4E0B\u4E00\u8282\u{1F517}</a></div></li></ul>`,8),Be=s("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),Ie={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},Se=e("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),Ne=s(")"),je=s("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),Me={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},Te=s("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function Oe(Ye,De){const i=a("ExternalLinkIcon"),t=a("RouterLink");return o(),d("div",null,[e("ul",null,[e("li",null,[e("a",h,[p,n(i)])])]),m,b,v,g,e("blockquote",null,[e("p",null,[k,e("a",_,[f,n(i)]),x,e("a",y,[w,n(i)]),C,e("a",L,[E,n(i)])])]),q,e("blockquote",null,[e("p",null,[e("strong",null,[A,e("a",R,[B,n(i)]),I])]),S]),N,j,e("ul",null,[e("li",null,[e("a",M,[T,n(i)])]),e("li",null,[e("a",O,[Y,n(i)])])]),D,P,z,K,e("p",null,[V,e("a",G,[U,n(i)]),F,e("a",W,[H,n(i)]),J]),$,e("ul",null,[e("li",null,[Q,e("a",X,[Z,n(i)]),ee])]),se,e("ul",null,[e("li",null,[e("p",null,[e("a",ne,[ie,n(i)])])]),e("li",null,[e("p",null,[e("a",le,[ae,n(i)])])]),te]),re,e("p",null,[oe,de,ce,e("a",ue,[he,n(i)]),pe,e("a",me,[be,n(i)]),ve,ge]),e("ul",null,[e("li",null,[e("a",ke,[_e,n(i)])]),e("li",null,[e("a",fe,[xe,n(i)])])]),ye,e("p",null,[we,e("a",Ce,[Le,n(i)])]),e("p",null,[e("a",Ee,[qe,n(i)]),Ae]),Re,e("ul",null,[e("li",null,[e("p",null,[n(t,{to:"/"},{default:c(()=>[Be]),_:1})])]),e("li",null,[e("p",null,[e("a",Ie,[Se,n(i)]),Ne])]),e("li",null,[e("p",null,[je,e("a",Me,[Te,n(i)])])])])])}const ze=r(u,[["render",Oe],["__file","5.html.vue"]]);export{ze as default};
