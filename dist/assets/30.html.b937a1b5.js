import{_ as c,r as t,o as i,c as l,a as n,b as a,w as r,e as s,d as o}from"./app.1bf152e6.js";const u={},d={href:"http://nsddd.top",target:"_blank",rel:"noopener noreferrer"},k=s("author"),v=n("h1",{id:"\u7B2C30\u8282-localregistry-s-info-into-a-secret-in-namespace-kube-system-2056",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B2C30\u8282-localregistry-s-info-into-a-secret-in-namespace-kube-system-2056","aria-hidden":"true"},"#"),s(" \u7B2C30\u8282 localRegistry's info into a secret in namespace kube-system #2056")],-1),m=n("br",null,null,-1),b=s("\u2764\uFE0F\u{1F495}\u{1F495}\u8BB0\u5F55"),g={href:"https://github.com/3293172751/sealos",target:"_blank",rel:"noopener noreferrer"},h=s("sealos"),y=s("\u5F00\u6E90\u9879\u76EE\u7684\u5B66\u4E60\u8FC7\u7A0B\u3002"),f={href:"https://github.com/3293172751/sealos",target:"_blank",rel:"noopener noreferrer"},_=s("k8s,docker\u548C\u4E91\u539F\u751F\u7684\u5B66\u4E60"),C=s("\u3002Myblog:"),D={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},R=s("http://nsddd.top"),S=n("hr",null,null,-1),I=n("p",null,"[TOC]",-1),q=n("h2",{id:"issue-description",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#issue-description","aria-hidden":"true"},"#"),s(" Issue Description")],-1),w={href:"https://github.com/sealerio/sealer/issues/2056",target:"_blank",rel:"noopener noreferrer"},x=s("issues#2056"),j=o('<p>Maybe Sealer can dump localRegistry&#39;s info into a <code>secret</code> in namespace <code>kube-system</code>. Some component can use this <code>secret</code>.</p><p><strong>Type: <em>feature request</em></strong></p><p><strong>date: <em>2023-02-21</em></strong></p><h2 id="namespace" tabindex="-1"><a class="header-anchor" href="#namespace" aria-hidden="true">#</a> namespace</h2><p>Three initial namespaces for a cluster\uFF1A<code>default</code>\u3001<code>kube-system</code> \u548C <code>kube-public</code>\u3002</p><ul><li><code>Default</code>: Used for some deployments that don&#39;t specify namespaces, this is a quick way to create messes that can be difficult to clean up if you do a lot of deployments without the right information. I&#39;m not going to touch it because it has only one purpose and has misled me in more than one situation.</li><li><code>Kube-system</code> : Is the namespace of all objects associated with the Kubernetes system. Any deployment of this namespace can be a dangerous operation that could irreparably damage the system itself. Yes, I&#39;ve tried; So I don&#39;t recommend it.</li><li><code>Kube-public</code> : It is readable by all (public), but the namespace is reserved for the system.</li></ul><blockquote><p>\u4F60\u597D\uFF0Csealer\u662F\u642D\u5EFAKubernetes\u7684\u5DE5\u5177\uFF0C\u73B0\u5728sealer\u6709\u4E00\u4E2A\u4EFB\u52A1\uFF0C\u9700\u8981\u5C06 localRegistry&#39;s info into a <code>secret</code> in namespace <code>kube-system</code>\uFF0CSome component can use this <code>secret</code>.</p><p><code>Kube-system</code> \u662F Kubernetes \u7CFB\u7EDF\u76F8\u5173\u7684\u6240\u6709\u5BF9\u8C61\u7EC4\u6210\u7684\u547D\u540D\u7A7A\u95F4\u3002\u8BF7\u95EE\u6211\u8BE5\u600E\u4E48\u5B9E\u73B0\u8FD9\u4E2A\u529F\u80FD</p><p>localRegistry\u7684\u4FE1\u606F\u5728\u547D\u540D\u7A7A\u95F4kube-system\u4E2D\u53D8\u6210\u4E86\u4E00\u4E2A\u201C\u79D8\u5BC6\u201D\uFF0C\u4E00\u4E9B\u7EC4\u4EF6\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u201C\u79D8\u5BC6\u201D\u3002</p></blockquote><p>API \u96C6\u7FA4\u914D\u7F6E\u6587\u4EF6\uFF08yaml\u6587\u4EF6\uFF09</p><p>\u7AEF\u53E3\u5BC6\u7801\uFF0C\u8F6C\u5B58\u5230 System namespace</p><p>\u9ED8\u8BA4\u751F\u6210\u3002</p><p><code>pkg/cluster-runtime/installer.go</code></p><p><img src="http://sm.nsddd.top/sm202302211739502.png" alt="be19b04545eacc4fb0a793db36c3cc7a"></p><h2 id="registry" tabindex="-1"><a class="header-anchor" href="#registry" aria-hidden="true">#</a> Registry</h2><p>There are at least three types of registry, Kubernetes Registry, Docker Registry and container registry. The following are the explanations for these registries:</p>',14),A={href:"https://betterme.xin/posts/2021-09/k8s04/",target:"_blank",rel:"noopener noreferrer"},K=s("maybe u should read this articre"),E=n("ul",null,[n("li",null,"**Docker registry\uFF1A**A Docker registry contains Docker images that you can pull in order to use them in your deployment. The registry is a stateless, scalable server side application that stores and lets you distribute Docker images."),n("li",null,[n("strong",null,"Kubernetes registry"),s("\uFF1AThe Kubernetes registry is an image pull secret that your deployment uses to authenticate with a Docker registry.")]),n("li",null,[n("strong",null,"Container registry\uFF1A"),s(" A container registry is a repository\u2014or collection of repositories\u2014used to store and access container images.")])],-1),N=n("h2",{id:"secrets",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#secrets","aria-hidden":"true"},"#"),s(" Secrets")],-1),L=s("A Secret is an object that contains a small amount of sensitive data such as a password, a token, or a key. Such information might otherwise be put in a "),T={href:"https://kubernetes.io/docs/concepts/workloads/pods/",target:"_blank",rel:"noopener noreferrer"},P=s("Pod"),G=s(" specification or in a "),J={href:"https://kubernetes.io/docs/reference/glossary/?all=true#term-image",target:"_blank",rel:"noopener noreferrer"},M=s("container image"),U=s(". Using a Secret means that you don't need to include confidential data in your application code."),V=s("Secrets are similar to "),z={href:"https://kubernetes.io/docs/concepts/configuration/configmap/",target:"_blank",rel:"noopener noreferrer"},B=s("ConfigMaps"),F=s(" but are specifically intended to hold confidential data."),O=n("p",null,"\u26A0\uFE0F Kubernetes Secrets are, by default, stored unencrypted in the API server's underlying data store (etcd). Anyone with API access can retrieve or modify a Secret, and so can anyone with access to etcd. Additionally, anyone who is authorized to create a Pod in a namespace can use that access to read any Secret in that namespace; this includes indirect access such as the ability to create a Deployment.",-1),Y=n("p",null,[n("strong",null,"In order to safely use Secrets, take at least the following steps:")],-1),H={href:"https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/",target:"_blank",rel:"noopener noreferrer"},Z=s("Enable Encryption at Rest"),X=s(" for Secrets."),$=n("li",null,"Enable or configure RBAC rules](https://kubernetes.io/docs/reference/access-authn-authz/authorization/) with least-privilege access to Secrets.",-1),W=n("li",null,"Restrict Secret access to specific containers.",-1),Q={href:"https://secrets-store-csi-driver.sigs.k8s.io/concepts.html#provider-for-the-secrets-store-csi-driver",target:"_blank",rel:"noopener noreferrer"},nn=s("Consider using external Secret store providers"),sn=s("."),an=n("p",null,[n("strong",null,"There are several options to create a Secret:")],-1),en={href:"https://kubernetes.io/docs/tasks/configmap-secret/managing-secret-using-kubectl/",target:"_blank",rel:"noopener noreferrer"},tn=s("Use "),on=n("code",null,"kubectl",-1),pn={href:"https://kubernetes.io/docs/tasks/configmap-secret/managing-secret-using-config-file/",target:"_blank",rel:"noopener noreferrer"},cn=s("Use a configuration file"),ln={href:"https://kubernetes.io/docs/tasks/configmap-secret/managing-secret-using-kustomize/",target:"_blank",rel:"noopener noreferrer"},rn=s("Use the Kustomize tool"),un=o(`<p><strong>\u67E5\u770B namespace \u4E2D\u6240\u6709 secret \u5BF9\u8C61\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl get secrets <span class="token parameter variable">-n</span> kube-system
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u60A8\u5E94\u8BE5\u80FD\u591F\u770B\u5230\u4E00\u4E2A\u540D\u4E3A<code>&lt;registry-name&gt;-secret</code>\u7684Secret\u5BF9\u8C61\uFF0C\u5176\u4E2D<code>&lt;registry-name&gt;</code>\u662F\u60A8\u5728\u5B89\u88C5Docker Registry\u65F6\u6307\u5B9A\u7684\u540D\u79F0\u3002\u6B64Secret\u5BF9\u8C61\u5305\u542B Docker Registry \u7684\u767B\u5F55\u51ED\u8BC1\uFF0C\u5305\u62EC\u7528\u6237\u540D\u548C\u5BC6\u7801\u7B49\u4FE1\u606F\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u83B7\u53D6Secret\u5BF9\u8C61\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl describe secret <span class="token operator">&lt;</span>registry-name<span class="token operator">&gt;</span>-secret <span class="token parameter variable">-n</span> kube-system
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u60A8\u5B89\u88C5\u7684\u662F\u5176\u4ED6\u7C7B\u578B\u7684\u5BB9\u5668\u955C\u50CF\u4ED3\u5E93\uFF0C\u4F8B\u5982Harbor\u6216Nexus\u7B49\uFF0C\u90A3\u4E48\u8FD9\u4E9B\u5BB9\u5668\u955C\u50CF\u4ED3\u5E93\u7684\u4FE1\u606F\u53EF\u80FD\u5B58\u50A8\u5728\u5176\u4ED6\u4F4D\u7F6E\u3002</p></blockquote><p>\u4EE5\u4E0B\u662F\u4E00\u4E2A\u793A\u4F8Byaml\u6587\u4EF6\uFF0C\u5176\u4E2D\u5305\u542B\u4E86\u4E00\u4E2A\u540D\u4E3A<code>registry-secret</code>\u7684Secret\u5BF9\u8C61\uFF0C\u7528\u4E8E\u5B58\u50A8 <code>Docker Registry</code> \u7684\u767B\u5F55\u51ED\u8BC1\u3002\u8BF7\u5C06\u5176\u4E2D\u7684\u5360\u4F4D\u7B26\uFF08<code>&lt;registry-url&gt;</code>\u3001<code>&lt;registry-username&gt;</code>\u548C<code>&lt;registry-password&gt;</code>\uFF09\u66FF\u6362\u4E3A\u60A8\u7684Docker Registry\u7684URL\u3001\u7528\u6237\u540D\u548C\u5BC6\u7801\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Secret
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> registry<span class="token punctuation">-</span>secret
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token key atrule">type</span><span class="token punctuation">:</span> kubernetes.io/dockerconfigjson
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">.dockerconfigjson</span><span class="token punctuation">:</span> eyAiYXV0aCI6ICJodHRwczovL2RvY2tlci5leGFtcGxlLmNvbSIsICJ1c2VybmFtZSI6ICJ1c2VybmFtZSIsICJwYXNzd29yZCI6ICJwYXNzd29yZCJ9Cg==
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2D\uFF0C<code>data</code>\u5B57\u6BB5\u4E2D\u7684\u503C\u662F\u4E00\u4E2ABase64\u7F16\u7801\u7684JSON\u5B57\u7B26\u4E32\uFF0C\u5176\u4E2D\u5305\u542BDocker Registry\u7684\u767B\u5F55\u51ED\u8BC1\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u5C06Docker Registry\u7684\u767B\u5F55\u51ED\u8BC1\u7F16\u7801\u4E3ABase64\u5B57\u7B26\u4E32\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;{&quot;auth&quot;: &quot;https://&lt;registry-url&gt;&quot;, &quot;username&quot;: &quot;&lt;registry-username&gt;&quot;, &quot;password&quot;: &quot;&lt;registry-password&gt;&quot;}&#39;</span> <span class="token operator">|</span> base64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8981\u5C06\u8FD9\u4E2Ayaml\u6587\u4EF6\u5E94\u7528\u5230Kubernetes\u96C6\u7FA4\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> registry-secret.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u5C06\u521B\u5EFA\u540D\u4E3A<code>registry-secret</code>\u7684Secret\u5BF9\u8C61\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5728kube-system\u547D\u540D\u7A7A\u95F4\u4E2D\u3002\u5176\u4ED6Kubernetes\u7EC4\u4EF6\u53EF\u4EE5\u4F7F\u7528\u6B64Secret\u5BF9\u8C61\u4E2D\u7684\u51ED\u8BC1\u6765\u8BBF\u95EE\u60A8\u7684Docker Registry\u3002</p><p>\u5982\u679C\u60A8\u5728\u5B89\u88C5Kubernetes\u65F6\u5C06Docker Registry\u7684\u767B\u5F55\u51ED\u8BC1\u5B58\u50A8\u5728Secret\u5BF9\u8C61\u4E2D\uFF0C\u90A3\u4E48\u60A8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u4ECESecret\u5BF9\u8C61\u4E2D\u63D0\u53D6\u51FADocker Registry\u7684\u4FE1\u606F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl get secret <span class="token operator">&lt;</span>registry-secret-name<span class="token operator">&gt;</span> <span class="token parameter variable">-n</span> kube-system <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&#39;{.data.\\.dockerconfigjson}&#39;</span> <span class="token operator">|</span> base64 <span class="token parameter variable">--decode</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5176\u4E2D\uFF0C<code>&lt;registry-secret-name&gt;</code>\u662F\u60A8\u5728\u5B89\u88C5Kubernetes\u65F6\u521B\u5EFA\u7684Secret\u5BF9\u8C61\u7684\u540D\u79F0\u3002\u8FD9\u4E2A\u547D\u4EE4\u5C06\u8F93\u51FA\u4E00\u4E2AJSON\u5B57\u7B26\u4E32\uFF0C\u5176\u4E2D\u5305\u542BDocker Registry\u7684URL\u3001\u7528\u6237\u540D\u548C\u5BC6\u7801\u7B49\u4FE1\u606F\u3002</p><p>\u60A8\u53EF\u4EE5\u4F7F\u7528<code>jq</code>\u547D\u4EE4\u5BF9\u8FD9\u4E2AJSON\u5B57\u7B26\u4E32\u8FDB\u884C\u89E3\u6790\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>kubectl get secret <span class="token operator">&lt;</span>registry<span class="token operator">-</span>secret<span class="token operator">-</span>name<span class="token operator">&gt;</span> <span class="token operator">-</span>n kube<span class="token operator">-</span>system <span class="token operator">-</span>o jsonpath<span class="token operator">=</span>&#39;<span class="token punctuation">{</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>\\<span class="token punctuation">.</span>dockerconfigjson<span class="token punctuation">}</span>&#39; <span class="token operator">|</span> base64 <span class="token operator">--</span>decode <span class="token operator">|</span> jq <span class="token char">&#39;.auth&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u5C06\u8F93\u51FADocker Registry\u7684URL\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&quot;https://&lt;registry-url&gt;&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u60A8\u53EF\u4EE5\u4F7F\u7528\u7C7B\u4F3C\u7684\u65B9\u5F0F\u63D0\u53D6\u51FA\u5176\u4ED6\u767B\u5F55\u51ED\u8BC1\u4FE1\u606F\uFF0C\u4F8B\u5982\u7528\u6237\u540D\u548C\u5BC6\u7801\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl get secret <span class="token operator">&lt;</span>registry-secret-name<span class="token operator">&gt;</span> <span class="token parameter variable">-n</span> kube-system <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&#39;{.data.\\.dockerconfigjson}&#39;</span> <span class="token operator">|</span> base64 <span class="token parameter variable">--decode</span> <span class="token operator">|</span> jq <span class="token string">&#39;.username&#39;</span>
kubectl get secret <span class="token operator">&lt;</span>registry-secret-name<span class="token operator">&gt;</span> <span class="token parameter variable">-n</span> kube-system <span class="token parameter variable">-o</span> <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&#39;{.data.\\.dockerconfigjson}&#39;</span> <span class="token operator">|</span> base64 <span class="token parameter variable">--decode</span> <span class="token operator">|</span> jq <span class="token string">&#39;.password&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u521B\u5EFA secret \u5BF9\u8C61\uFF1A</strong></p><p>\u5728<code>installer.go</code>\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A<code>registry-secret</code>\u7684Secret\u5BF9\u8C61\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>secret :<span class="token operator">=</span> <span class="token operator">&amp;</span>corev1.Secret<span class="token punctuation">{</span>
    ObjectMeta: metav1.ObjectMeta<span class="token punctuation">{</span>
        Name:      <span class="token string">&quot;registry-secret&quot;</span>,
        Namespace: <span class="token string">&quot;kube-system&quot;</span>,
    <span class="token punctuation">}</span>,
    Data: map<span class="token punctuation">[</span>string<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span>byte<span class="token punctuation">{</span>
        <span class="token string">&quot;.dockerconfigjson&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>byte<span class="token punctuation">(</span><span class="token operator">&lt;</span>registry-login-info<span class="token operator">&gt;</span><span class="token punctuation">)</span>,
    <span class="token punctuation">}</span>,
    Type: corev1.SecretTypeDockerConfigJson,
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2D\uFF0C<code>&lt;registry-login-info&gt;</code>\u662F\u4E00\u4E2A\u5305\u542BDocker Registry\u7684\u767B\u5F55\u51ED\u8BC1\u4FE1\u606F\u7684JSON\u5B57\u7B26\u4E32\u3002\u60A8\u9700\u8981\u5C06\u8BE5\u5B57\u7B26\u4E32\u5B58\u50A8\u5728Sealer\u4EE3\u7801\u4E2D\uFF0C\u6216\u4ECE\u5916\u90E8\u8BFB\u53D6\u5E76\u4F20\u9012\u7ED9Sealer\u4EE3\u7801\u3002</p><p><strong>\u5C06Secret\u5BF9\u8C61\u4FDD\u5B58\u5230Kubernetes\u4E2D</strong></p><p>\u63A5\u4E0B\u6765\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u5C06\u4E0A\u8FF0\u521B\u5EFA\u7684Secret\u5BF9\u8C61\u4FDD\u5B58\u5230Kubernetes\u4E2D\uFF1A</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> kubeClient<span class="token punctuation">.</span><span class="token function">CoreV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Secrets</span><span class="token punctuation">(</span><span class="token string">&quot;kube-system&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> secret<span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>CreateOptions<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> err
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u5C06\u5728<code>kube-system</code>\u547D\u540D\u7A7A\u95F4\u4E2D\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A<code>registry-secret</code>\u7684Secret\u5BF9\u8C61\uFF0C\u5E76\u5C06\u5176\u5B58\u50A8\u5230Kubernetes\u4E2D\u3002</p><p><strong>\u5728\u9700\u8981\u4F7F\u7528\u767B\u5F55\u51ED\u8BC1\u7684\u7EC4\u4EF6\u4E2D\u5F15\u7528Secret\u5BF9\u8C61</strong></p><p>\u6700\u540E\uFF0C\u60A8\u53EF\u4EE5\u5728\u9700\u8981\u4F7F\u7528Docker Registry\u7684\u7EC4\u4EF6\u4E2D\u5F15\u7528\u4E0A\u8FF0\u521B\u5EFA\u7684Secret\u5BF9\u8C61\u3002\u4F8B\u5982\uFF0C\u53EF\u4EE5\u5C06\u4EE5\u4E0B\u914D\u7F6E\u6DFB\u52A0\u5230Deployment\u5BF9\u8C61\u7684 <code>spec.template.spec.containers[].imagePullSecrets</code> \u6570\u7EC4\u4E2D\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;registry-secret&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u5C06\u4F7FKubernetes\u5728\u62C9\u53D6Docker\u955C\u50CF\u65F6\u4F7F\u7528<code>registry-secret</code> Secret\u5BF9\u8C61\u4E2D\u5B58\u50A8\u7684Docker Registry\u7684\u767B\u5F55\u51ED\u8BC1\u3002</p><h2 id="\u5173\u952E\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#\u5173\u952E\u76EE\u5F55" aria-hidden="true">#</a> \u5173\u952E\u76EE\u5F55</h2><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">NewInstaller</span><span class="token punctuation">(</span>conf v2<span class="token punctuation">.</span>ContainerRuntimeConfig<span class="token punctuation">,</span> driver infradriver<span class="token punctuation">.</span>InfraDriver<span class="token punctuation">)</span> <span class="token punctuation">(</span>Installer<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">switch</span> conf<span class="token punctuation">.</span>Type <span class="token punctuation">{</span>
	<span class="token keyword">case</span> common<span class="token punctuation">.</span>Docker<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">:</span>
		conf<span class="token punctuation">.</span>Type <span class="token operator">=</span> common<span class="token punctuation">.</span>Docker
		ret <span class="token operator">:=</span> <span class="token operator">&amp;</span>DefaultInstaller<span class="token punctuation">{</span>
			rootfs<span class="token punctuation">:</span> driver<span class="token punctuation">.</span><span class="token function">GetClusterRootfsPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			driver<span class="token punctuation">:</span> driver<span class="token punctuation">,</span>
			envs<span class="token punctuation">:</span>   driver<span class="token punctuation">.</span><span class="token function">GetClusterEnv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			Info<span class="token punctuation">:</span> Info<span class="token punctuation">{</span>
				CertsDir<span class="token punctuation">:</span>               DefaultDockerCertsDir<span class="token punctuation">,</span>
				CRISocket<span class="token punctuation">:</span>              DefaultDockerCRISocket<span class="token punctuation">,</span>
				ContainerRuntimeConfig<span class="token punctuation">:</span> conf<span class="token punctuation">,</span>
				ConfigFilePath<span class="token punctuation">:</span>         filepath<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span><span class="token function">GetHomeDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;.docker&quot;</span><span class="token punctuation">,</span> DockerConfigFileName<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
		ret<span class="token punctuation">.</span>Info<span class="token punctuation">.</span>CgroupDriver <span class="token operator">=</span> DefaultCgroupDriver
		<span class="token keyword">if</span> cd<span class="token punctuation">,</span> ok <span class="token operator">:=</span> ret<span class="token punctuation">.</span>envs<span class="token punctuation">[</span>CgroupDriverArg<span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token operator">&amp;&amp;</span> cd <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			ret<span class="token punctuation">.</span>Info<span class="token punctuation">.</span>CgroupDriver <span class="token operator">=</span> cd<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">,</span> <span class="token boolean">nil</span>
	<span class="token keyword">case</span> common<span class="token punctuation">.</span>Containerd<span class="token punctuation">:</span>
		ret <span class="token operator">:=</span> <span class="token operator">&amp;</span>DefaultInstaller<span class="token punctuation">{</span>
			rootfs<span class="token punctuation">:</span> driver<span class="token punctuation">.</span><span class="token function">GetClusterRootfsPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			driver<span class="token punctuation">:</span> driver<span class="token punctuation">,</span>
			envs<span class="token punctuation">:</span>   driver<span class="token punctuation">.</span><span class="token function">GetClusterEnv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			Info<span class="token punctuation">:</span> Info<span class="token punctuation">{</span>
				CertsDir<span class="token punctuation">:</span>               DefaultContainerdCertsDir<span class="token punctuation">,</span>
				CRISocket<span class="token punctuation">:</span>              DefaultContainerdCRISocket<span class="token punctuation">,</span>
				ContainerRuntimeConfig<span class="token punctuation">:</span> conf<span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
		ret<span class="token punctuation">.</span>Info<span class="token punctuation">.</span>CgroupDriver <span class="token operator">=</span> DefaultCgroupDriver
		<span class="token keyword">if</span> cd<span class="token punctuation">,</span> ok <span class="token operator">:=</span> ret<span class="token punctuation">.</span>envs<span class="token punctuation">[</span>CgroupDriverArg<span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token operator">&amp;&amp;</span> cd <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			ret<span class="token punctuation">.</span>Info<span class="token punctuation">.</span>CgroupDriver <span class="token operator">=</span> cd<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">,</span> <span class="token boolean">nil</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;invalid container runtime type&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token keyword">func</span> <span class="token function">NewInstaller</span><span class="token punctuation">(</span>conf v2<span class="token punctuation">.</span>ContainerRuntimeConfig<span class="token punctuation">,</span> driver infradriver<span class="token punctuation">.</span>InfraDriver<span class="token punctuation">)</span> <span class="token punctuation">(</span>Installer<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">switch</span> conf<span class="token punctuation">.</span>Type <span class="token punctuation">{</span>
	<span class="token keyword">case</span> common<span class="token punctuation">.</span>Docker<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">:</span>
		conf<span class="token punctuation">.</span>Type <span class="token operator">=</span> common<span class="token punctuation">.</span>Docker
		ret <span class="token operator">:=</span> <span class="token operator">&amp;</span>DefaultInstaller<span class="token punctuation">{</span>
			rootfs<span class="token punctuation">:</span> driver<span class="token punctuation">.</span><span class="token function">GetClusterRootfsPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			driver<span class="token punctuation">:</span> driver<span class="token punctuation">,</span>
			envs<span class="token punctuation">:</span>   driver<span class="token punctuation">.</span><span class="token function">GetClusterEnv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			Info<span class="token punctuation">:</span> Info<span class="token punctuation">{</span>
				CertsDir<span class="token punctuation">:</span>               DefaultDockerCertsDir<span class="token punctuation">,</span>
				CRISocket<span class="token punctuation">:</span>              DefaultDockerCRISocket<span class="token punctuation">,</span>
				ContainerRuntimeConfig<span class="token punctuation">:</span> conf<span class="token punctuation">,</span>
				ConfigFilePath<span class="token punctuation">:</span>         filepath<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span><span class="token function">GetHomeDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;.docker&quot;</span><span class="token punctuation">,</span> DockerConfigFileName<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
		ret<span class="token punctuation">.</span>Info<span class="token punctuation">.</span>CgroupDriver <span class="token operator">=</span> DefaultCgroupDriver
		<span class="token keyword">if</span> cd<span class="token punctuation">,</span> ok <span class="token operator">:=</span> ret<span class="token punctuation">.</span>envs<span class="token punctuation">[</span>CgroupDriverArg<span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token operator">&amp;&amp;</span> cd <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			ret<span class="token punctuation">.</span>Info<span class="token punctuation">.</span>CgroupDriver <span class="token operator">=</span> cd<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">,</span> <span class="token boolean">nil</span>
	<span class="token keyword">case</span> common<span class="token punctuation">.</span>Containerd<span class="token punctuation">:</span>
		ret <span class="token operator">:=</span> <span class="token operator">&amp;</span>DefaultInstaller<span class="token punctuation">{</span>
			rootfs<span class="token punctuation">:</span> driver<span class="token punctuation">.</span><span class="token function">GetClusterRootfsPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			driver<span class="token punctuation">:</span> driver<span class="token punctuation">,</span>
			envs<span class="token punctuation">:</span>   driver<span class="token punctuation">.</span><span class="token function">GetClusterEnv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			Info<span class="token punctuation">:</span> Info<span class="token punctuation">{</span>
				CertsDir<span class="token punctuation">:</span>               DefaultContainerdCertsDir<span class="token punctuation">,</span>
				CRISocket<span class="token punctuation">:</span>              DefaultContainerdCRISocket<span class="token punctuation">,</span>
				ContainerRuntimeConfig<span class="token punctuation">:</span> conf<span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
		ret<span class="token punctuation">.</span>Info<span class="token punctuation">.</span>CgroupDriver <span class="token operator">=</span> DefaultCgroupDriver
		<span class="token keyword">if</span> cd<span class="token punctuation">,</span> ok <span class="token operator">:=</span> ret<span class="token punctuation">.</span>envs<span class="token punctuation">[</span>CgroupDriverArg<span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token operator">&amp;&amp;</span> cd <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			ret<span class="token punctuation">.</span>Info<span class="token punctuation">.</span>CgroupDriver <span class="token operator">=</span> cd<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">,</span> <span class="token boolean">nil</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;invalid container runtime type&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">GetHomeDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	home<span class="token punctuation">,</span> err <span class="token operator">:=</span> homedir<span class="token punctuation">.</span><span class="token function">Dir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;/root/.docker/config.json&quot;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> home
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="localregistry" tabindex="-1"><a class="header-anchor" href="#localregistry" aria-hidden="true">#</a> localregistry</h2><p><strong>\u6587\u4EF6\uFF1A</strong></p><p><code>/root/.sealer/Clusterfile</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl get cm <span class="token parameter variable">-n</span> kube-system sealer-clusterfile  <span class="token parameter variable">-oyaml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u8FD9\u662F\u4E00\u4E2A\u5728 Kubernetes \u96C6\u7FA4\u4E2D\u4F7F\u7528\u7684\u547D\u4EE4\uFF0C\u5B83\u7528\u4E8E\u83B7\u53D6\u540D\u4E3A sealer-clusterfile \u7684 ConfigMap \u7684 YAML \u683C\u5F0F\uFF0C\u8BE5 ConfigMap \u4F4D\u4E8E kube-system \u547D\u540D\u7A7A\u95F4\u4E2D\u3002\u8F93\u51FA\u5C06\u5305\u62EC ConfigMap \u7684\u540D\u79F0\u3001\u547D\u540D\u7A7A\u95F4\u3001\u6807\u7B7E\u548C\u6570\u636E\u3002\u7531\u4E8E\u4F7F\u7528\u4E86 <code>-oyaml</code> \u6807\u5FD7\uFF0C\u8F93\u51FA\u5C06\u4EE5 YAML \u683C\u5F0F\u5448\u73B0\u3002</p></blockquote><p><strong>Clusterfile:</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> sealer.io/v2
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Cluster
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token null important">null</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>cluster
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containerRuntime</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> LocalRegistryDomain=sea.hub
  <span class="token punctuation">-</span> LocalRegistryPort=5000
  <span class="token punctuation">-</span> LocalRegistryURL=sea.hub<span class="token punctuation">:</span><span class="token number">5000</span>
  <span class="token punctuation">-</span> RegistryDomain=sea.hub
  <span class="token punctuation">-</span> RegistryPort=5000
  <span class="token punctuation">-</span> RegistryURL=sea.hub<span class="token punctuation">:</span><span class="token number">5000</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">ips</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> 192.168.137.133
    <span class="token key atrule">roles</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
    <span class="token key atrule">ssh</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.io/sealerio/kubernetes<span class="token punctuation">:</span>v1.22.15
  <span class="token key atrule">registry</span><span class="token punctuation">:</span>
    <span class="token key atrule">localRegistry</span><span class="token punctuation">:</span>
      <span class="token key atrule">cert</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token key atrule">domain</span><span class="token punctuation">:</span> sea.hub
      <span class="token key atrule">ha</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">insecure</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5000</span>
  <span class="token key atrule">ssh</span><span class="token punctuation">:</span>
    <span class="token key atrule">pk</span><span class="token punctuation">:</span> /root/.ssh/id_rsa
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token string">&quot;22&quot;</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span> root
<span class="token key atrule">status</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#end-\u94FE\u63A5" aria-hidden="true">#</a> END \u94FE\u63A5</h2><ul><li><div><a href="29.md" style="float:left;">\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} </a><a href="31.md" style="float:right;"> \uFE0F\u4E0B\u4E00\u8282\u{1F517}</a></div></li></ul>`,43),dn=s("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),kn={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},vn=n("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),mn=s(")"),bn=s("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),gn={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},hn=s("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function yn(fn,_n){const e=t("ExternalLinkIcon"),p=t("RouterLink");return i(),l("div",null,[n("ul",null,[n("li",null,[n("a",d,[k,a(e)])])]),v,m,n("blockquote",null,[n("p",null,[b,n("a",g,[h,a(e)]),y,n("a",f,[_,a(e)]),C,n("a",D,[R,a(e)])])]),S,I,q,n("ul",null,[n("li",null,[n("a",w,[x,a(e)])])]),j,n("p",null,[n("a",A,[K,a(e)])]),E,N,n("p",null,[L,n("a",T,[P,a(e)]),G,n("a",J,[M,a(e)]),U]),n("p",null,[V,n("a",z,[B,a(e)]),F]),O,Y,n("ol",null,[n("li",null,[n("a",H,[Z,a(e)]),X]),$,W,n("li",null,[n("a",Q,[nn,a(e)]),sn])]),an,n("ul",null,[n("li",null,[n("a",en,[tn,on,a(e)])]),n("li",null,[n("a",pn,[cn,a(e)])]),n("li",null,[n("a",ln,[rn,a(e)])])]),un,n("ul",null,[n("li",null,[n("p",null,[a(p,{to:"/"},{default:r(()=>[dn]),_:1})])]),n("li",null,[n("p",null,[n("a",kn,[vn,a(e)]),mn])]),n("li",null,[n("p",null,[bn,n("a",gn,[hn,a(e)])])])])])}const Dn=c(u,[["render",yn],["__file","30.html.vue"]]);export{Dn as default};
