import{_ as r,r as o,o as l,c as d,a as e,b as s,w as c,e as n,d as t}from"./app.9f14a191.js";const p={},u={href:"http://nsddd.top",target:"_blank",rel:"noopener noreferrer"},h=n("author"),m=e("h1",{id:"\u7B2C82\u8282-openim-application-containerization-deployment-guide",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u7B2C82\u8282-openim-application-containerization-deployment-guide","aria-hidden":"true"},"#"),n(" \u7B2C82\u8282 OpenIM Application Containerization Deployment Guide")],-1),b=e("div",null,[e("a",{href:"81.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),e("a",{href:"83.md",style:{float:"right"}}," \u2B07\uFE0F\u4E0B\u4E00\u8282\u{1F517}")],-1),g=e("br",null,null,-1),_=n("\u2764\uFE0F\u{1F495}\u{1F495}\u65B0\u65F6\u4EE3\u62E5\u62B1\u4E91\u539F\u751F\uFF0C\u4E91\u539F\u751F\u5177\u6709\u73AF\u5883\u7EDF\u4E00\u3001\u6309\u9700\u4ED8\u8D39\u3001\u5373\u5F00\u5373\u7528\u3001\u7A33\u5B9A\u6027\u5F3A\u7279\u70B9\u3002Myblog:"),k={href:"http://nsddd.top/",target:"_blank",rel:"noopener noreferrer"},v=n("http://nsddd.top"),f=e("hr",null,null,-1),y=e("p",null,"[TOC]",-1),x=e("h1",{id:"openim-application-containerization-deployment-guide",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#openim-application-containerization-deployment-guide","aria-hidden":"true"},"#"),n(" OpenIM Application Containerization Deployment Guide")],-1),S=e("p",null,[n("OpenIM supports a variety of cluster deployment methods, including but not limited to "),e("code",null,"helm"),n(", "),e("code",null,"sealos"),n(", "),e("code",null,"kustomize")],-1),E=e("p",null,"Various contributors, as well as previous official releases, have provided some referenceable solutions:",-1),C={href:"https://github.com/OpenIMSDK/k8s-jenkins",target:"_blank",rel:"noopener noreferrer"},I=n("k8s-jenkins Repository"),R={href:"https://github.com/openimsdk/open-im-server-k8s-deploy",target:"_blank",rel:"noopener noreferrer"},A=n("open-im-server-k8s-deploy Repository"),q={href:"https://github.com/OpenIMSDK/openim-charts",target:"_blank",rel:"noopener noreferrer"},w=n("openim-charts Repository"),M={href:"https://github.com/showurl/deploy-openim",target:"_blank",rel:"noopener noreferrer"},O=n("deploy-openim Repository"),L=t(`<h3 id="dependency-check" tabindex="-1"><a class="header-anchor" href="#dependency-check" aria-hidden="true">#</a> Dependency Check</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Kubernetes: <span class="token operator">&gt;=</span> <span class="token number">1.16</span>.0-0
Helm: <span class="token operator">&gt;=</span> <span class="token number">3.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="minimum-configuration" tabindex="-1"><a class="header-anchor" href="#minimum-configuration" aria-hidden="true">#</a> Minimum Configuration</h3><p>The recommended minimum configuration for a production environment is as follows:</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">CPU</span><span class="token punctuation">:</span> <span class="token number">4</span>
<span class="token key atrule">Memory</span><span class="token punctuation">:</span> 8G
<span class="token key atrule">Disk</span><span class="token punctuation">:</span> 100G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="configuration-file-generation" tabindex="-1"><a class="header-anchor" href="#configuration-file-generation" aria-hidden="true">#</a> Configuration File Generation</h2><p>We have automated all the files, making the generation of configuration files optional for OpenIM. However, if you desire custom configurations, you can follow the steps below:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">make</span> init
<span class="token comment"># Alternatively, use script:</span>
<span class="token comment"># ./scripts/init-config.sh</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>At this point, configuration files will be generated under <code>deployments/openim/config</code>, which you can modify as per your requirements.</p><h2 id="cluster-setup" tabindex="-1"><a class="header-anchor" href="#cluster-setup" aria-hidden="true">#</a> Cluster Setup</h2><p>If you already have a <code>kubernetes</code> cluster, or if you wish to build a <code>kubernetes</code> cluster from scratch, you can skip this step.</p>`,11),D=n("For a quick start, I used "),$={href:"https://github.com/labring/sealos",target:"_blank",rel:"noopener noreferrer"},N=n("sealos"),U=n(" to rapidly set up the cluster, with sealos also being a wrapper for kubeadm at its core:"),T=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token assign-left variable">SEALOS_VERSION</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> https://api.github.com/repos/labring/sealos/releases/latest <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-oE</span> <span class="token string">&#39;&quot;tag_name&quot;: &quot;[^&quot;]+&quot;&#39;</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n1</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">&#39;&quot;&#39;</span> <span class="token parameter variable">-f4</span><span class="token variable">\`</span></span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\\</span>
  <span class="token function">curl</span> <span class="token parameter variable">-sfL</span> https://raw.githubusercontent.com/labring/sealos/<span class="token variable">\${SEALOS_VERSION}</span>/scripts/install.sh <span class="token operator">|</span>
  <span class="token function">sh</span> <span class="token parameter variable">-s</span> <span class="token variable">\${SEALOS_VERSION}</span> labring/sealos
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Supported Versions:</strong></p><ul><li>docker: <code>labring/kubernetes-docker</code>:(v1.24.0~v1.27.0)</li><li>containerd: <code>labring/kubernetes</code>:(v1.24.0~v1.27.0)</li></ul><h4 id="cluster-installation" tabindex="-1"><a class="header-anchor" href="#cluster-installation" aria-hidden="true">#</a> Cluster Installation:</h4><p>Cluster details are as follows:</p><table><thead><tr><th>Hostname</th><th>IP Address</th><th>System Info</th></tr></thead><tbody><tr><td>master01</td><td>10.0.0.9</td><td><code>Linux VM-0-9-ubuntu 5.15.0-76-generic #83-Ubuntu SMP Thu Jun 15 19:16:32 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux</code></td></tr><tr><td>node01</td><td>10.0.0.4</td><td>Similar to master01</td></tr><tr><td>node02</td><td>10.0.0.10</td><td>Similar to master01</td></tr></tbody></table><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">CLUSTER_USERNAME</span><span class="token operator">=</span>ubuntu
$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">CLUSTER_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span>
$ <span class="token function">sudo</span> sealos run labring/kubernetes:v1.25.0 labring/helm:v3.8.2 labring/calico:v3.24.1 <span class="token punctuation">\\</span>
    <span class="token parameter variable">--masters</span> <span class="token number">10.0</span>.0.9 <span class="token punctuation">\\</span>
    <span class="token parameter variable">--nodes</span> <span class="token number">10.0</span>.0.4,10.0.0.10 <span class="token punctuation">\\</span>
    <span class="token parameter variable">-u</span> <span class="token string">&quot;<span class="token variable">$CLUSTER_USERNAME</span>&quot;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-p</span> <span class="token string">&quot;<span class="token variable">$CLUSTER_PASSWORD</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Node</strong> Uninstallation method: using <code>kubeadm</code> for uninstallation does not remove <code>etcd</code> and <code>cni</code> related configurations. Manual clearance or using <code>sealos</code> for uninstallation is needed.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ sealos reset
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><h3 id="installing-helm" tabindex="-1"><a class="header-anchor" href="#installing-helm" aria-hidden="true">#</a> Installing helm</h3><p>Helm simplifies the deployment and management of Kubernetes applications to a large extent by offering version control and release management through packaging.</p><p><strong>Using Script:</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Adding Repository:</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ helm repo <span class="token function">add</span> brigade https://openimsdk.github.io/openim-charts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="openim-image-strategy" tabindex="-1"><a class="header-anchor" href="#openim-image-strategy" aria-hidden="true">#</a> OpenIM Image Strategy</h3>`,15),V=n("Automated offerings include aliyun, ghcr, docker hub: "),z={href:"https://github.com/openimsdk/open-im-server/blob/main/docs/conversions/images.md",target:"_blank",rel:"noopener noreferrer"},B=n("Image Documentation"),G=t(`<p><strong>Local Test Build Method:</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">make</span> image
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),H=n("This command assists in quickly building the required images locally. For a detailed build strategy, refer to the "),P={href:"https://github.com/openimsdk/open-im-server/blob/main/build/README.md",target:"_blank",rel:"noopener noreferrer"},F=n("Build Documentation"),K=n("."),W=e("h2",{id:"installation",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#installation","aria-hidden":"true"},"#"),n(" Installation")],-1),j=n("Explore our Helm-Charts repository and read through: "),J={href:"https://github.com/openimsdk/helm-charts",target:"_blank",rel:"noopener noreferrer"},Y=n("Helm-Charts Repository"),Q=e("h2",{id:"end-\u94FE\u63A5",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#end-\u94FE\u63A5","aria-hidden":"true"},"#"),n(" END \u94FE\u63A5")],-1),X=e("ul",null,[e("li",null,[e("div",null,[e("a",{href:"81.md",style:{float:"left"}},"\u2B06\uFE0F\u4E0A\u4E00\u8282\u{1F517} "),e("a",{href:"83.md",style:{float:"right"}}," \uFE0F\u4E0B\u4E00\u8282\u{1F517}")])])],-1),Z=n("\u24C2\uFE0F\u56DE\u5230\u76EE\u5F55\u{1F3E0}"),ee={href:"https://nsddd.top/archives/contributors",target:"_blank",rel:"noopener noreferrer"},ne=e("strong",null,"\u{1FAF5}\u53C2\u4E0E\u8D21\u732E\u{1F49E}\u2764\uFE0F\u200D\u{1F525}\u{1F496}",-1),se=n(")"),ae=n("\u2734\uFE0F\u7248\u6743\u58F0\u660E \xA9 \uFF1A\u672C\u4E66\u6240\u6709\u5185\u5BB9\u9075\u5FAA"),te={href:"http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC",target:"_blank",rel:"noopener noreferrer"},oe=n("CC-BY-SA 3.0\u534F\u8BAE\uFF08\u7F72\u540D-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB\uFF09\xA9");function ie(re,le){const a=o("ExternalLinkIcon"),i=o("RouterLink");return l(),d("div",null,[e("ul",null,[e("li",null,[e("a",u,[h,s(a)])])]),m,b,g,e("blockquote",null,[e("p",null,[_,e("a",k,[v,s(a)])])]),f,y,x,S,E,e("ul",null,[e("li",null,[e("a",C,[I,s(a)])]),e("li",null,[e("a",R,[A,s(a)])]),e("li",null,[e("a",q,[w,s(a)])]),e("li",null,[e("a",M,[O,s(a)])])]),L,e("p",null,[D,e("a",$,[N,s(a)]),U]),T,e("p",null,[V,e("a",z,[B,s(a)])]),G,e("blockquote",null,[e("p",null,[H,e("a",P,[F,s(a)]),K])]),W,e("p",null,[j,e("a",J,[Y,s(a)])]),Q,X,e("ul",null,[e("li",null,[e("p",null,[s(i,{to:"/"},{default:c(()=>[Z]),_:1})])]),e("li",null,[e("p",null,[e("a",ee,[ne,s(a)]),se])]),e("li",null,[e("p",null,[ae,e("a",te,[oe,s(a)])])])])])}const ce=r(p,[["render",ie],["__file","82.html.vue"]]);export{ce as default};
