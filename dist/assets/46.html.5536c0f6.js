import{_ as o,r as c,o as l,c as i,a as n,b as e,w as t,e as s,d as r}from"./app.af1c630d.js";const p={},d=n("h1",{id:"docker-nfs-\u6587\u4EF6\u5171\u4EAB\u548C\u4F20\u8F93",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#docker-nfs-\u6587\u4EF6\u5171\u4EAB\u548C\u4F20\u8F93","aria-hidden":"true"},"#"),s(" docker NFS \u6587\u4EF6\u5171\u4EAB\u548C\u4F20\u8F93")],-1),u={class:"table-of-contents"},m=s("\u5BB9\u5668\u8FC1\u79FB\u5230\u53E6\u4E00\u53F0\u670D\u52A1\u5668"),k=s("Docker \u57FA\u4E8E NFS \u5B9E\u73B0\u5BB9\u5668\u6587\u4EF6\u5171\u4EAB"),v=s("\u5B89\u88C5"),g=r(`<p>::: danegr \u6CE8\u610F \u524D\u534A\u90E8\u5206\u662F\u5BB9\u5668\u6253\u5305\u5230\u53E6\u4E00\u53F0\u670D\u52A1\u5668\u5E76\u4E14\u90E8\u7F72</p><p>\u540E\u534A\u90E8\u5206\u662F\u91CD\u5934\u620F\uFF1A<strong>NFS\u5BB9\u5668\u6587\u4EF6\u5171\u4EAB~</strong></p><p>:::</p><h3 id="\u5BB9\u5668\u8FC1\u79FB\u5230\u53E6\u4E00\u53F0\u670D\u52A1\u5668" tabindex="-1"><a class="header-anchor" href="#\u5BB9\u5668\u8FC1\u79FB\u5230\u53E6\u4E00\u53F0\u670D\u52A1\u5668" aria-hidden="true">#</a> \u5BB9\u5668\u8FC1\u79FB\u5230\u53E6\u4E00\u53F0\u670D\u52A1\u5668</h3><details class="custom-container details"><summary>\u5C55\u5F00\u67E5\u770B\u8FC7\u7A0B</summary><p>1.\u627E\u5230\u8981\u6253\u5305\u7684\u955C\u50CF</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>jaegertracing<span class="token operator">/</span><span class="token keyword">all</span><span class="token operator">-</span><span class="token operator">in</span><span class="token operator">-</span>one                   <span class="token number">1.16</span>      fea586ade9d0   <span class="token number">22</span> months ago   <span class="token number">50.5</span>MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.\u6253\u5305\u6210\u6587\u4EF6</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>docker <span class="token keyword">save</span> <span class="token operator">-</span>o cc<span class="token punctuation">.</span>tar jaegertracing<span class="token operator">/</span><span class="token keyword">all</span><span class="token operator">-</span><span class="token operator">in</span><span class="token operator">-</span>one:<span class="token number">1.16</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3.ls \u67E5\u770B\u521A\u624D\u4EE5\u6253\u5305\u7684\u6587\u4EF6</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span>root@master3 <span class="token operator">~</span><span class="token punctuation">]</span># ls
anaconda<span class="token operator">-</span><span class="token return-type class-name">ks<span class="token punctuation">.</span>cfg</span>  cc<span class="token punctuation">.</span><span class="token function">tar</span><span class="token punctuation">(</span>\u5DF2\u6253\u5305\u7684<span class="token punctuation">)</span>  kubeadm<span class="token operator">-</span>config<span class="token punctuation">.</span>yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>4.\u5BFC\u5165\u5230\u9700\u8981\u955C\u50CF\u7684\u670D\u52A1\u5668</p><div class="language-kotlin ext-kt line-numbers-mode"><pre class="language-kotlin"><code>scp cc<span class="token punctuation">.</span>tar <span class="token label symbol">root@</span><span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">200.130</span><span class="token operator">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>5.\u89E3\u538B\u955C\u50CF\u6587\u4EF6</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># docker load &lt; cc.tar </span>
<span class="token key atrule">8f1b3d3ad470</span><span class="token punctuation">:</span> Loading layer <span class="token punctuation">[</span>==================================================<span class="token punctuation">&gt;</span><span class="token punctuation">]</span>  217.6kB/217.6kB
<span class="token key atrule">44874aec6671</span><span class="token punctuation">:</span> Loading layer <span class="token punctuation">[</span>==================================================<span class="token punctuation">&gt;</span><span class="token punctuation">]</span>  45.46MB/45.46MB
<span class="token key atrule">68b1a9835e66</span><span class="token punctuation">:</span> Loading layer <span class="token punctuation">[</span>==================================================<span class="token punctuation">&gt;</span><span class="token punctuation">]</span>  3.584kB/3.584kB
<span class="token key atrule">Loaded image</span><span class="token punctuation">:</span> jaegertracing/all<span class="token punctuation">-</span>in<span class="token punctuation">-</span>one<span class="token punctuation">:</span><span class="token number">1.20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6.\u67E5\u770B\u521A\u624D\u5BFC\u51FA\u7684\u955C\u50CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># docker images </span>
REPOSITORY              
registry.aliyuncs.com/google_containers/pause                          <span class="token number">3.2</span>       80d28bedfe5d   <span class="token number">20</span> months ago   683kB
registry.aliyuncs.com/google_containers/coredns                        <span class="token number">1.6</span>.7     67da37a9a360   <span class="token number">21</span> months ago   <span class="token number">43</span>.8MB
jaegertracing/all-in-one             <span class="token comment"># \u5DF2\u89E3\u538B\u7684\u955C\u50CF                      1.16      fea586ade9d0   22 months ago   50.5MB             </span>
registry.aliyuncs.com/google_containers/etcd                           <span class="token number">3.4</span>.3-0   303ce5db0e90   <span class="token number">2</span> years ago     288MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="docker-\u57FA\u4E8E-nfs-\u5B9E\u73B0\u5BB9\u5668\u6587\u4EF6\u5171\u4EAB" tabindex="-1"><a class="header-anchor" href="#docker-\u57FA\u4E8E-nfs-\u5B9E\u73B0\u5BB9\u5668\u6587\u4EF6\u5171\u4EAB" aria-hidden="true">#</a> Docker \u57FA\u4E8E NFS \u5B9E\u73B0\u5BB9\u5668\u6587\u4EF6\u5171\u4EAB</h2><div class="custom-container tip"><p class="custom-container-title">\u4EC0\u4E48\u662F NFS\uFF1F</p><p>NFS\uFF08network file system\uFF09\u5373\u7F51\u7EDC\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u662F FreeBSD \u652F\u6301\u7684\u6587\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u79CD\uFF0C\u5B83\u5141\u8BB8\u7F51\u7EDC\u4E2D\u7684\u8BA1\u7B97\u673A\u4E4B\u95F4\u7684\u5171\u4EAB\u8D44\u6E90\u3002</p><p>\u6211\u4EEC\u5728docker \u548C kubernetes \u4F1A\u7ECF\u5E38\u6709\u9700\u6C42</p></div><h3 id="\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a> \u5B89\u88C5</h3><p><strong>\u670D\u52A1\u5668\u51C6\u5907\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">192.168</span>.71.131  cubnode01
<span class="token number">192.168</span>.71.132  cubnode02
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>centos\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yum insatll -y nfs-utils rpcbind
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ubuntu\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">apt-get</span> <span class="token parameter variable">-y</span> <span class="token function">install</span> nfs-kernel-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p><strong>\u7F16\u8F91/etc/exports\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\uFF1A</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;&gt;</span> /etc/exports <span class="token operator">&lt;&lt;-</span> <span class="token string">&#39;EOF&#39;
/share 192.168.71.0/24(rw,no_root_squash,sync)
EOF</span><span class="token punctuation">;</span> <span class="token function">cat</span> /etc/exports
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2D\uFF1A</p><ul><li><code>*</code>\uFF1A\u5141\u8BB8\u6240\u6709\u7684\u7F51\u6BB5\u8BBF\u95EE\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5177\u4F53\u7684IP</li><li><code>rw</code>\uFF1A\u6302\u63A5\u6B64\u76EE\u5F55\u7684\u5BA2\u6237\u7AEF\u5BF9\u8BE5\u5171\u4EAB\u76EE\u5F55\u5177\u6709\u8BFB\u5199\u6743\u9650</li><li><code>sync</code>\uFF1A\u8D44\u6599\u540C\u6B65\u5199\u5165\u5185\u5B58\u548C\u786C\u76D8</li><li><code>no_root_squash</code>\uFF1Aroot\u7528\u6237\u5177\u6709\u5BF9\u6839\u76EE\u5F55\u7684\u5B8C\u5168\u7BA1\u7406\u8BBF\u95EE\u6743\u9650\u3002</li><li><code>no_subtree_check</code>\uFF1A\u4E0D\u68C0\u67E5\u7236\u76EE\u5F55\u7684\u6743\u9650</li></ul></blockquote><p><strong>\u91CD\u542F\u670D\u52A1\uFF0C\u4F1A\u81EA\u52A8\u6620\u5C04\u7AEF\u53E3\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo /etc/init.d/rpcbind restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u91CD\u542Fnfs\u670D\u52A1\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo /etc/init.d/nfs-kernel-server restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u9A8C\u8BC1\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>exportfs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u521B\u5EFA\u5171\u4EAB\u6587\u4EF6\u5939</strong></p><p>\u5982\u914D\u7F6E\u6587\u4EF6\u4E2D\u6240\u8FF0\uFF0C\u5728 <code>/tmp/cubxxw/</code> \u8DEF\u5F84\u4E0B\u521B\u5EFA\u5171\u4EAB\u6587\u4EF6\u5939<code>share_folder</code>\uFF0C\u5728\u5176\u4E2D\u5199\u4E00\u4E2Atest.txt\u6587\u4EF6\uFF1A</p>`,23);function b(h,x){const a=c("router-link");return l(),i("div",null,[d,n("nav",u,[n("ul",null,[n("li",null,[e(a,{to:"#\u5BB9\u5668\u8FC1\u79FB\u5230\u53E6\u4E00\u53F0\u670D\u52A1\u5668"},{default:t(()=>[m]),_:1})]),n("li",null,[e(a,{to:"#docker-\u57FA\u4E8E-nfs-\u5B9E\u73B0\u5BB9\u5668\u6587\u4EF6\u5171\u4EAB"},{default:t(()=>[k]),_:1}),n("ul",null,[n("li",null,[e(a,{to:"#\u5B89\u88C5"},{default:t(()=>[v]),_:1})])])])])]),g])}const f=o(p,[["render",b],["__file","46.html.vue"]]);export{f as default};
