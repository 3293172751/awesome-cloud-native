+ [author](http://nsddd.top)

# 第84节 使用Docker或Docker Compose安装Loki

<div><a href = '83.md' style='float:left'>⬆️上一节🔗  </a><a href = '85.md' style='float: right'>  ⬇️下一节🔗</a></div>
<br>

> ❤️💕💕新时代拥抱云原生，云原生具有环境统一、按需付费、即开即用、稳定性强特点。Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

## 选择

如果您正在评估、测试或开发Loki，则可以使用Docker或Docker Compose安装Loki和Promtail。对于生产环境，我们建议使用Tanka或Helm安装。

使用这些安装说明获得的配置将Loki作为单个二进制文件运行。



## Prerequisites 先决条件

+ [Docker](https://docs.docker.com/install)
+ [Docker Compose](https://docs.docker.com/compose/install) (optional, only needed for the Docker Compose install method)



## Install with Docker Compose

在命令行中运行以下命令。它们适用于Windows或Linux系统。

```bash
wget https://raw.githubusercontent.com/grafana/loki/v2.9.1/production/docker-compose.yaml -O docker-compose.yaml
docker-compose -f docker-compose.yaml up
```

地址是: https://raw.githubusercontent.com/grafana/loki/v2.9.1/production/docker-compose.yaml



Docker  Compose 的内容是：

```bash
version: "3"

networks:
  loki:

services:
  loki:
    image: grafana/loki:2.9.0
    ports:
      - "3100:3100"
    command: -config.file=/etc/loki/local-config.yaml
    networks:
      - loki

  promtail:
    image: grafana/promtail:2.9.0
    volumes:
      - /var/log:/var/log
    command: -config.file=/etc/promtail/config.yml
    networks:
      - loki

  grafana:
    environment:
      - GF_PATHS_PROVISIONING=/etc/grafana/provisioning
      - GF_AUTH_ANONYMOUS_ENABLED=true
      - GF_AUTH_ANONYMOUS_ORG_ROLE=Admin
    entrypoint:
      - sh
      - -euc
      - |
        mkdir -p /etc/grafana/provisioning/datasources
        cat <<EOF > /etc/grafana/provisioning/datasources/ds.yaml
        apiVersion: 1
        datasources:
        - name: Loki
          type: loki
          access: proxy
          orgId: 1
          url: http://loki:3100
          basicAuth: false
          isDefault: true
          version: 1
          editable: false
        EOF
        /run.sh
    image: grafana/grafana:latest
    ports:
      - "3000:3000"
    networks:
      - loki
```



## node-exporter

`node-exporter` 是一个开源的工具，用于收集与 Linux 系统上的硬件和操作系统的各种指标有关的信息，并使其能够被 Prometheus 服务获取和存储。它是 Prometheus 监控工具链的一部分。

> "exporter" 是一个专门的组件，其主要职责是收集非 Prometheus 系统中的指标并将其转化为 Prometheus 可读的格式。这意味着这些 "exporter" 组件充当了数据来源和 Prometheus 之间的中间层，确保 Prometheus 可以轻松抓取并监控这些数据。

使用 `node-exporter` 可以提供以下等方面的指标：

1. **CPU 使用情况**：用户空间、系统、I/O 等待等。
2. **内存使用情况**：使用量、缓存、交换等。
3. **磁盘空间**：每个分区的使用量、总量、可用量等。
4. **I/O**：读写操作、字节等。
5. **网络**：传入/传出数据包、错误等。
6. **文件系统**：i-nodes 使用情况、大小等。
7. **硬件信息**：如 CPU 温度、风扇速度等（取决于系统是否有这些传感器信息）。
8. 其他系统信息，如运行的进程数量、系统负载等。

使用 `node-exporter`，运维团队和开发团队可以：

1. 监控服务器和基础设施的健康情况。
2. 设置警报，当某些指标超出预设范围时自动通知相关人员。
3. 对系统性能进行分析和优化。
4. 了解系统的资源使用情况和趋势，为未来的扩展和升级做准备。

> 注意，对于 Windows 来说，应该使用 `wmi_exporter`







## END 链接
<ul><li><div><a href = '83.md' style='float:left'>⬆️上一节🔗  </a><a href = '85.md' style='float: right'>  ️下一节🔗</a></div></li></ul>

+ [Ⓜ️回到目录🏠](../README.md)

+ [**🫵参与贡献💞❤️‍🔥💖**](https://nsddd.top/archives/contributors))

+ ✴️版权声明 &copy; ：本书所有内容遵循[CC-BY-SA 3.0协议（署名-相同方式共享）&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0协议文本) 

